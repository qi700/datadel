灾难备份核心技术选择
信息数据丢失将对企业组织造成灾难性的打击，因此选择合适的数据复制技术及确定适当的数据复制方案是建立灾难备份体系的关键。通过研究各种主流的数据复制技术，同时提出基于数据库的数据复制方案和基于存储的数据复制方案，说明两种数据复制方案的优缺点及可行性，从而得出灾难备份核心技术的选择结论。    在人类极度依赖信息技术的今天，一个严峻的挑战是如何应对信息系统所面临的各种天灾人祸的干扰或打击。据IDC的调查，在20世纪最后10年中，在美国发生过灾难的公司中，55%的公司当即倒闭，剩下的45%中，因为信息数据丢失，其中29%的公司在两年内倒闭，能生存下来的仅占16%。由此可见，保障信息系统在灾难的打击下平稳运行有多么重要。目前信息安全已经成为了各个国家和各类企业的重中之重，大型企业不得不着手建立灾难备份体系。然而，当前的灾备方案花样繁多、功能不一，跨国企业与小型企业由于其灾备成本核算和灾难恢复目标存在极大差别，导致所采用的数据复制解决方案存在很大差异。例如，对于小型企业来说，跨国公司提供的方案过于昂贵;对于集团用户来说，低廉的成本和过低的恢复目标会导致备份效率低下或者恢复效果差强人意，因此要建立灾难备份体系，灾难备份核心技术的选择是关键。1 灾难备份核心技术    灾难备份技术的核心是实现数据的实时复制，目前主流的数据复制技术可以从信息系统的4个层次:应用软件、数据库、操作系统、存储系统来实现，如图1所示。
图1 数据复制技术的4个层次    1.1基于应用的数据复制技术    基于应用的数据复制是指由应用软件来实现数据的远程复制和同步，当主中心失效时，灾难备份中心的应用软件恢复运行，接管主中心的业务。这种数据复制技术需要在软件开发时，在存储、操作系统、数据库等层面进行定制开发，维护人员需要了解各个层面上的工作状况，还要熟悉应用程序本身，复杂度极高，稳定性最差。    1.2基于数据库的数据复制技术    基于数据库的数据复制是由数据库系统软件来实现数据库的远程复制和同步。支持异构数据库、异构网络、异构操作系统，对网络带宽的消耗也不大，在灾难发生时能够进行热切换，因此应用较为广泛。缺点是数据库容灾仅支持结构化数据(数据库数据)，不支持系统数据、逻辑卷信息、非结构化数据的容灾恢复，对于结构化、非结构化数据混合的环境有一定的局限性。    1.3基于操作系统的数据复制技术    基于操作系统的数据复制需要在每台参与复制的服务器仁部署多个软件，如磁盘卷管理软件、磁盘卷复制管理软件等，磁盘卷复制管理软件将主节点系统的卷上每次I/O的操作数据实时(准实时或延时)复制到远程节点的相应卷上，从而实现两个卷之间的数据同步(或准同步)。该类数据复制一般与物理存储系统设备无关，对物理存储系统自身的管理功能要求不高，有较好的可管理性，也便于主、备用系统的扩充和发展;同时，也可方便地做多对一或者一对多的远程数据复制。缺点是需要对操作系统、文件系统作修改，数据存放过程中需要进行本地和远程两次I/O操作，对服务器的性能影响较大，实现过程复杂且不够稳定。    1.4基于存储的数据复制技术    基于存储的数据复制是在存储区域网络内部实现数据快照、数据复制的技术。它由存储系统自身实现数据的远程复制和同步，并保待数据的一致性:在这种方式下，数据复制软件运行在存储系统内部，比较容易实现主中心和备份中心数据的实时拷贝维护能力。一般不会影响主中心主机系统的性能。并且上层应用的变化对于存储系统本身及数据远程复制过程没有影响，具有简单、高效的特点，能较好地保证数据的完整性和一致性，数据的复制备份过程不占用主机资源,操作控制比较简单，对结构化、非结构化数据提供良好的支持，因此应用最为广泛。2 灾难备份数据复制方案    2.1基于存储的数据复制方果    基于存储的数据复制技术核心是通过磁盘阵列内建的固件或微操作系统，利用IP网络、DWDM,光纤通道等传输网络，将数据以同步或异步的方式复制到远端灾备中心，如图2所示。
图2 基于存储的数据复制方案    数据复制过程完全在磁盘阵列间实现，使得数据与上层应用软件隔离，因此对服务器的影响非常小。此外。由于运行机制是利用镜像来复制数据，并借高速缓存加速I/O读写速度，因此业务中心、灾备中心两端的数据差异时间非常小，加上存储系统本身具有一定的容错能力，因此具有较高的性能和稳定性。    总结:该方案的优点是成熟、稳定、快速、高效，对服务器处理能力的影响小:在金融、证券、电信、政府、石油等行业有广泛的应用案例。    该方案的缺点是对灾备中心的存储空间需求较大，数据复制过程对带宽的要求高，支持同构存储平台，只能单向复制。但是随着存储技术的发展，各专业存储设备厂商为数据复制灾难备份提供了基于NAS,SAN等各种存储技术的专用存储设备，它能帮助用户建立集中的存储中心，并通过专用设备所提供的各种同步镜像或异步镜像等技术，实现更加灵活的数据复制灾难备份方案。
2.2基于数据库的数据复制技术    基于数据库的数据复制方案是数据库特有的灾难备份/恢复技术，利用了数据库系统的日志备份和恢复机制。此方式需要在源数据库(业务中心)及目标数据库(灾备中心)的数据库服务器上各安装一套Agent(代理程序)，由Agent定时分析抽取Oracle数据库中实时增量数据，并将这些增量传送到灾备中心上，如图3所示。
图3 基于数据库的数据复制方案    定时的增量数据经过优化，放入传输队列中等待传输,Agent对整个传输、装载过程进行监控，如果此阶段出现错误会及时提示用户解决问题。    在数据复制过程中，目标数据始终处于打开状态，如果源数据库系统(业务中心)发生灾难，整个恢复时间只是用来准备的时间。而且在没有接管业务中心数据库系统的情况下，灾备中心的数据库还可以用来支持OLP应用、报表和查询。    总结:该方案的优点是服务器、操作系统、数据库版本可以异构(分别来自不同厂家)，组网方式灵活，数据传输过程对带宽的要求不高;灾备中心的数据库始终保持在启用状态，确保灾难恢复时数据可用。    该方案的缺点是复制软件占用主机资源，仅适用于数据库环境，无法处理文件、目录等非常结构化数据，具有一定的局限性;维护复杂度高，需要应用系统比较熟悉的人员才能维护，多见于应用软件自行维护的用户，灾难恢复的时问较基于存储的数据复制技术时间长。3 结论    综上所述可以得出结论:基于应用的数据复制技术需要大量的定制开发，目前在国内很少使用;基于服务器操作系统的数据复制技术需要改变现有操作系统对存储逻辑卷的管理，实现过程比较复杂，风险大，不建议采用。基于数据库的数据复制技术和基于存储的数据复制技术对现有信息系统的冲击比较小，比较适合现有成熟应用系统使用。因此灾难备份核心技术从以七两种方案中选择比较适当。