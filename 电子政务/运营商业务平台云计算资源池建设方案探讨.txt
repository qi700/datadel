运营商业务平台云计算资源池建设方案探讨
运营商业务网建设过程中普遍面临平台数量庞大、硬件资源利用率不高、运维成本高、能源消耗大、建设周期长等问题。随着云计算技术日趋成熟，运用虚拟化技术建设云计算资源池，对业务平台进行统一承载已成为运营商业务平台整合的重要途径。首先对云计算技术的服务模式作了概述。在此基础上明确了运营商业务平台资源池的定位。然后针对业务网的特点，提出了利用云平台进行业务平台整合的实施策略，并从某运营商的一个实际案例出发。详细论述了业务平台云计算资源池的建设方案，对硬件设备、虚拟化软件等的配置和选型提供了建议。   1.前言    随着用户规模和业务的不断发展，运营商的业务平台规模不断增大，如果沿用传统的从硬件到应用相互独立的烟囱式部署方式，IT设备采购和部署将面临越来越大的压力。以某电信运营商为例，现网已形成包含管理类平台、语音及消息类业务能力平台、视频类业务能力平台、资源类业务能力平台、浏览及下载类业务能力平台、网关类业务能力平台、应用类平台等在内的网络架构，平台数量为80个左右，共有超过400台x86服务器、70多台小型机、60多台存储设备、280多台网络设备。经统计，服务器CPU资源平均使用率35%左右，内存平均使用率40%左右。IT设备资源未得到有效利用，在造成电力等资源浪费的同时，也增加了维护成本。因此迫切希望通过建设云计算资源池，对业务平台进行统一承载，实现资源共享。通过实施业务平台的云化整合，预期获得以下收益：    通过云计算实现挖潜降耗，提高IT资源的利用率，降低资源消耗；    通过云计算实现效率提高，减少管理及建设各环节，提高运营效率；    通过云计算实现降低成本，将CAPEX(资金/固定资产的投人)转化为OPEX(运营成本)，有效降低成本；    通过云计算实现提升管理，实现数据集中、统一管理，提升管理能力；    通过云计算提供高可靠性，在基础设施层面提高系统可靠性，为各类业务系统提供高可用、连续服务的基础设施平台。    2.业务平台云计算资源池定位    云计算技术发展至今，比较成熟的服务模式按照提供的服务类型包含IaaS(infrastructure as a service，基础架构即服务)，PaaS(platform as a service，平台即服务)和SaaS(software as a service，软件即服务)等3类，按照云服务的对象包括公有云和私有云，如图1所示。 图1 云计算服务模式    对于电信运营商而言，云计算技术应用的关注点如下。    在IaaS层面，基于x86服务器、存储设备和虚拟化软件，形成业务平台云和IDC云。业务平台云定位是为业务平台的各类应用提供计算、存储和网络资源，形成统一的承载；IDC云定位是为用户提供按需付费的弹性IT资源服务，如虚拟服务器和存储空间。在PaaS层面，构建运营商能力开放平台，将短信、彩信等各类传统业务能力甚至是互联网能力进行汇聚和统一封装，为电信增值应用开发者提供端到端的软件开发、测试、运行的环境，使应用开发者便捷地调用电信能力。在SaaS层面，构建基于面向政企客户及个人用户的SaaS应用承载平台。如以中国电信为例，商航平台定位于其商务领航品牌的主要支撑平台，已经具备SaaS的关键特征，属于SaaS业务模式中的平台发展模式。    本文所讨论的业务平台云计算资源池定位为运营商内部IaaS私有云，主要为运营商自有业务平台提供资源服务。    3.业务平台云化整合实施策略    3.1 业务平台云化适用性分析    在将云计算技术应用于业务平台建设时，切忌为云而云，无论是新建平台还是已有平台，都需要通过必要的评估流程来判断是否可以通过云资源池来承载。云计算技术涵盖的范围特别广，有些技术的发展成熟度较高，但有些技术暂时处于发展起步时期，因此当前阶段要求资源池能够满足所有业务平台的承载要求是不现实的。    总的来说，业务平台云化适用性可从业务属性和技术属性两个维度展开。两个维度又可以分解为更小的子维度，详见表1。表1 平台云化适用性评估因素     3.2 业务平台云化迁移策略    运营商现网业务平台云化迁移，应以业务需求为导向、总体拥有成本(TCO)降低为目标、安全可靠有效运行为准则，演进宜采取“剥洋葱”模式由表及里稳健推进。结合上述业务平台云化评估因素，应优先从非实时、非关键性业务平台人手引人“云计算”技术，聚焦可整合的小型应用、基于标准化的B/S应用、重复性及标准化任务的处理应用、可拆分的海量计算任务处理应用、业务忙闲分布不均匀且业务峰值明显的应用和可集中整合的应用系统。具体到操作层面，可将业务平台云化整合工作分阶段进行，总体上可以分为试点整合/小规模部署阶段和规模部署阶段。    试点整合/小规模部署阶段:新建云计算资源池，初步通过服务器的整合，选择非关键、非实时的小型业务平台部署云计算技术，如一些互联网应用及后台网管平台，同时在该阶段完成技术及经验积累。    规模部署阶段:在第一阶段的基础上，整合更多的平台资源，并完善业务服务功能和流程等，结合试点经验，该阶段可以逐步对大部分业务平台进行云化整合。    4.业务网IaaS资源池建设方案    4.1 业务网IaaS资源池技术发展路线    云计算资源池建设不可能一域而就，需要综合考虑成本、业务承载需求、技术发展成熟度等因素，建议遵循以下原则。    (1)动态扩容业务平台资源池    业务平台云的规模能满足初期试点引人云计算技术的工程项目的资源需求，同时保证一定的资源富余，以后随项目的需求逐步扩容云计算资源池。    (2)虚拟化技术从易到难    根据资源虚拟化技术的成熟度，从易到难在业务平台引入不同的虚拟化技术。对各类基础资源的虚拟化整合次序建议为:PC服务器、存储系统、小型机和网络。    (3)云管理平台    初期可考虑实现一些基础管理功能，如统一管理实现资源虚拟化、动态迁移、弹性容量等，后续在云计算技术规模引入阶段实现服务自动化、复杂的业务管理等。    (4)容灾备份与安全    容灾备份方面，资源池建设初期通过虚拟机的在线热迁移并配合共享存储可以实现基础的HA(high availability，高可用性)功能。更高级别的数据异地容灾与备份可以采用重复数据删除、数据镜像、数据快照、持续数据保护等技术实现，建议在规模引人阶段实施。云安全方面，初期可以依托防火墙及虚拟机隔离等技术实现基础的主机安全和网络安全。规模引人阶段可以采用人侵检测与防护、反病毒软件等技术实现更高层次的业务和数据安全以及运营和管理安全。    综上，IaaS资源池建设过程中技术路线发展建议如图2所示。图2 IaaS资源池技术架构 4.2建设需求    本文将以某运营商业务网一个试点云化整合需求为例，探讨资源池的配置方案。结合前述业务平台云化适应性分析方法，初期拟定选择5个平台作为云化整合目标。其中，5个平台的现状调研信息见表2。表2 平台资源现状     4.3资源池硬件设备需求测算及选型    4.3.1计算资源池    下面采用区别承载业务的分析方法来计算服务器资源需求。    不同的业务平台具备不同的负载特点，对应需要的资源配置也不同。大访问量平台需要相对较高配置的虚拟机作为前端接人层服务器，应用层和数据库层只需要常规中等配置的虚拟机即可。大计算量平台需要配置较高性能的应用层虚拟机，接人层、数据库层作常规配置。大数据处理量平台虚拟化技术支撑点更多体现在整体高性能上实现数据库层虚拟服务器，接人层、应用层则可作常规配置。其他一般类型平台对资源的需求量不高，采用常规配置的虚拟机即可满足要求，如一般的小众互联网应用。    5个平台中，A平台属于大访问量平台，B平台属于大计算量平台，C平台属于大数据处理量平台，D，E平台属于一般平台。测算过程见表3、表4、表5。表3 测算过程(一) 表4 测算过程(二)(CPU核数需求计算过程) 表5 测算过程(三)(总核数需求计算过程)     资源池中物理服务器按高档的刀片配置，CPU按4颗8核配置，CPU与气内存配比为1:4，故需128 GB内存。网络互联方面，配置8个GE端口用于连接上层交换网络，2个HBA口用于连接SAN。    这样，所需的物理服务器数量二所需要的CPU总核数/32=3台(向上取整)。    4.3.2存储资源池    存储资源池容量规划主要考虑以下几个部分。    操作系统映像文件，按每台虚拟机100 GB考虑；    存储资源池资源需要考虑一定的冗余，冗余系数取定30%；    虚拟化管理软件管理数据区，按500 GB考虑；    磁阵RAID系数，按RAIDS考虑，空间消耗为70%。    基于上述参数取值及平台现状，存储资源池容量测算过程见表6。表6 存储资源池容量测算过程     经计算知，本期存储资源池容量需求为9063 GB。    4.3.3网络资源池    (1)核心交换机    本次资源池配置3台服务器，每台服务器8个吉比特网络端口，共需要24 GB数据交换。考虑到资源池中远期的扩展需求，网络设备必须具备较大的扩展空间。以该运营商为例，x86服务器总的规模在400台左右，资源池物理服务器按4C8核(4颗物理CPU，每颗CPU 8核)为单元考虑，整合比取1:6，未来资源池的物理服务器规模在67台左右，按每台服务器8个GE端口估算，背板交换容量约在0.5 TB。依此算法，若资源池物理机按2C配置，资源需求相应翻倍，背板交换容量约为1 TB。考虑到未来平台x86服务器会有一定增长，建议核心交换机背板交换容量应不小于2 TB。扩展槽位方面，背板交换容量为0.5 TB，分摊到2台交换机，每台约256 GB，每槽位端口密度按48个GE计算，总计需要6个槽位。    (2)防火墙    现网业务平台通过吉比特链路连接至防火墙，防火墙分别出口至3张不同的网络(含内网、公网及专网)。其中，本期云化整合的5个业务平台网络至防火墙的带宽均为2 Gbit/s，整体网络需要10 Gbit/s带宽，现网网络利用率不到50% ，实际需要整体带宽为5 Gbit/s，分别和3个网络连接，则每个网络出口带宽不低于2 GB即可满足业务需求。考虑到链路冗余，到各网络的总出口为4 Gbit/s，防火墙与上层网络采用交叉互联方式。选型方面，建议整机吞吐量大于等于10 Gbit/s，考虑到扩展性，应不少于3个业务插槽，可选配置IOGE端口。    4.4虚拟化软件选型    业界比较成熟的虚拟化软件厂商有VMware ， Citrix、微软、华为技术等。主流产品见表7。表7 主流产品     每个厂商的产品各有特色，在选择虚拟化软件时，应结合实际需求和不同的使用场景，从基本功能、兼容性、性能、可用性和可扩展性等方面综合考虑，对各厂商产品所支持的关键特性进行针对性分析，最终做出最合适的判断。以本文中运营商为例，业务网云资源池未来将承载其内部各大核心业务平台，需要服务器虚拟化软件的虚拟机快照、资源超配、资源优先级设置、物理机故障下的高可用性等高级功能，以保障重要业务。经过对比分析，最终确定选择VMware产品。其虚拟化软件许可按服务器的物理CPU个数配置，具体配置要求如下。    虚拟化软件：VMware VSphere企业版，12个CPU许可。    虚拟化管理软件：VCente:控制台标准版(2个许可)，2个VC HA许可。    5.结束语    在业务网建设过程中引人云计算技术，通过建设统一的IT基础资源池，实现业务平台的承载，十分契合电信运营商迫切需要解决平台数量多、维护成本高、建设周期过长等问题的诉求。本文首先阐述了云计算技术比较成熟的几类服务交付模式，并结合运营商业务网的特点，将业务平台云资源池定位为IaaS私有云。另外，考虑到成本、技术发展成熟度、平台业务属性等因素，业务平台的云化整合势必须要有步骤、有计划地分阶段实施，本文结合平台特点，对业务平台云化适用性进行了定性分析，并在云化迁移策略方面提供了建议。接着根据IaaS服务模式特点及云计算技术的发展情况，提出了IaaS云资源池的技术架构和分阶段的建设重点。最后针对一个具体的案例，分别对计算资源池、存储资源池、网络资源池及虚拟化软件的资源需求进行了详细的测算，并给出了选型建议。