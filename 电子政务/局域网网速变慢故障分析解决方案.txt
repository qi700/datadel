局域网网速变慢故障分析解决方案
有时候和一些在企业做网管的朋友聊天时，听他们说到在企业局域网中会经常遇见网络速度变慢的情况，而引起这样情况的原因也是发杂多变的，处理这样的问题也是很让他们伤脑筋。渐渐的，听他们说的多了，也就总结了一些处理这样问题的方法，下面就和大家一起分享一下。 　　一，分析原因 　　遇见问题，首先就是先要分析原因。网络速度变慢，通过对局域中数据通讯的原始数据包进行捕获分析，可以分析出是造成局域网慢的具体原因，归结一下主要有以下几个方面： 1.网络环路 　　当网络涉及的节点数不是很多、结构不是很复杂时，这种现象一般很少发生。但在一些比较复杂的网络中，经常有多余的备用线路，如无意间连上时会构成回路。比如网线从网络中心接到计算机一室，再从计算机一室接到计算机二室。同时从网络中心又有一条备用线路直接连到计算机二室，若这几条线同时接通，则构成回路，数据包会不断发送和校验数据，从而影响整体网速。这种情况查找比较困难。为避免这种情况发生，最好在铺设网线时一定养成良好的习惯：网线打上明显的标签，有备用线路的地方要做好记载。当怀疑有此类故障发生时，一般采用分区分段逐步排除的方法。 2.广播/组播风暴 　　作为发现未知设备的主要手段，广播在网络中起着非常重要的作用。然而，随着网络中计算机数量的增多，广播包的数量会急剧增加。当广播包的数量达到30%时，网络的传输效率将会明显下降。当网卡或网络设备损坏后，会不停地发送广播包，从而导致广播风暴，使网络通信陷于瘫痪。因此，当网络设备硬件有故障时也会引起网速变慢。当怀疑有此类故障时，首先可采用置换法替换集线器或交换机来排除集线设备故障。如果这些设备没有故障，关掉集线器或交换机的电源后，DOS下用“Ping”命令对所涉及计算机逐一测试，找到有故障网卡的计算机，更换新的网卡即可恢复网速正常。网卡、集线器以及交换机是最容易出现故障引起网速变慢的设备。 3.病毒攻击 　　蠕虫病毒对网络速度的影响越来越严重，危害性极大。这种病毒导致被感染的用户只要一上网就不停地往外发邮件，病毒选择用户个人电脑中的随机文档附加在用户机子的通讯簿的随机地址上进行邮件发送。成百上千的这种垃圾邮件有的排着队往外发送，有的又成批成批地被退回来堆在服务器上。造成个别骨干互联网出现明显拥塞，网速明显变慢，使局域网近于瘫痪。因此，我们必须及时升级所用杀毒软件；计算机也要及时升级、安装系统补丁程序，同时卸载不必要的服务、关闭不必要的端口，以提高系统的安全性和可靠性 4.服务器响应速度慢 　　一方面有被黑客攻击的原因，另一方面主要是开启了上传文件的临时目录，这样会造成一段时间后就会造成积压大堆垃圾数据而不能自动删除，所以每次装完系统后速度都很正常，而过段时间后速度就非常慢了。 5.客户端过多 　　连接网络的客户端过多，如果在同一时间进行网上数据作业，会加大网络的负荷能力，在这样的情况下，网络速度变慢就可以理解了。 6.端口形成瓶颈 　　实际上，路由器广域网端口和局域网端口、交换机端口、集线器端口和服务器网卡等都可能成为网络瓶颈。当网速变慢时，我们可在网络使用高峰时段，利用网管软件查看路由器、交换机、服务器端口的数据流量；也可用Netstat命令统计各个端口的数据流量。据此确认网络数据流通瓶颈的位置，设法增加其带宽。具体方法很多，如更换服务器网卡为100M或1000M、安装多个网卡、划分多个VLAN、改变路由器配置来增加带宽等，都可以有效地缓解网络瓶颈，可以最大限度地提高数据传输速度。 7.客户端主机掩码设置错误 　　子网掩码表明IP地址中哪一部分表明网络地址，哪一部分表明主机地址。同时，子网掩码可以将主机地址分成多个子网。子网掩码位设置正确，客户端向本地主机发送消息，并且IP地址第三个字节相同，消息将不被路由，可正确建立连接。然而如果本地客户端的地址第三个字节的后四位不同，消息将被路由，从而无法到达目的主机。如果错误配置的主机试图与同子网内的其他主机建立联系，消息将路由，因为第三个字节不同。由于子网掩码错误导致的问题有间歇性，有时连接工作正常，有时发生错误。当目的主机的IP地址引起该路由的报文未路由或不该路由的包却路由了，将会引发通信故障。
二、具体分析速度慢故障实例 　　我们可以用网络分析软件工作在嗅探模式，以旁路接入网络，可以对网络中的通讯进行实时捕获分析，通过分析，可以找出引起网络速度慢的原因。下图是一个网络出现网速变慢故障时，我们用网络分析系统捕获的数据包信息。
捕获的数据包信息截图 　　从上面的截图我们可以得知，当前网络中出现了大量相同的数据包，详细查看这些数据包，发现这些数据包的大小都是64字节、IP标识都是1872、序列号和确认号是都是完全相同的。据此可以推断，当前网络中可能存在网络环路的现象。查看数据包的源地址是192.168.2.100，找到连接192.168.2.100的网络交换设备，发现是一个8口简易交换机，上面竟然有两个端口直接进行了连接，这样，通过它们的数据包直接在端口之间发送，形成了网络环路。将网线拔掉，网络速度立即恢复正常，再次抓包，无类似上面的数据包出现，问题解决。 　　三、网络速度慢的表现及解决方法总结 　　下面这张表列出了网络速度慢的原因、及具体的表现和推荐的解决方法。
网速问题现象及解决方法 　　网速慢的问题复杂多变，没有绝对的方法可以保证网络绝对的正常运行，还需要我们的网管在平时的网络管理中，优化网络及时发现问题并妥善解决。