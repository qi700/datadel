网络应用解决方案 （1）
1 概述
IPv4向IPv6的过渡阶段所采用的过渡技术主要包括：
IPv6/IPv4双栈技术：
双栈节点与IPv4节点通讯时使用IPv4协议栈，与IPv6节点通讯时使用IPv6协议栈。
隧道技术：
提供了两个IPv6站点之间通过IPv4网络实现通讯连接，以及两个IPv4站点之间通过IPv6网络实现通讯连接的技术。
IPv4/IPv6协议转换技术：
提供了IPv4网络与IPv6网络之间的互访技术。
2 IPv6/IPv4双协议栈
双栈技术是IPv4向IPv6过渡的一种有效的技术。网络中的节点同时支持IPv4和IPv6协议栈，源节点根据目的节点的不同选用不同的协议栈，而网络设备根据报文的协议类型选择不同的协议栈进行处理和转发。
双栈可以在一个单一的设备上实现，也可以是一个双栈骨干网。对于双栈骨干网，其中的所有设备必须同时支持IPv4/IPv6协议栈，连接双栈网络的接口必须同时配置IPv4地址和IPv6地址。
图2-1 双栈节点示意图
双栈节点具有三种工作模式：
只运行IPv6协议，表现为IPv6节点；
只运行IPv4协议，表现为IPv4节点；
双栈模式，同时打开IPv6和IPv4协议。
双栈技术是IPv4向IPv6过渡的基础，所有其它的过渡技术都以此为基础。
3 隧道技术
隧道（tunnel）是指一种协议封装到另外一种协议中的技术。隧道技术只要求隧道两端（也就是两种协议边界的相交点）的设备支持两种协议。IPv6穿越IPv4隧道技术利用现有的IPv4网络为互相独立的IPv6网络提供连通性，IPv6报文被封装在IPv4报文中穿越IPv4网络，实现IPv6报文的透明传输。
这种技术的优点是，不用把所有的设备都升级为双栈，只要求IPv4/IPv6网络的边缘设备实现双栈和隧道功能。除边缘节点外，其它节点不需要支持双协议栈。可以大大利用现有的IPv4网络投资。但是隧道技术不能实现IPv4主机与IPv6主机的直接通信。
IPv6网络边缘设备收到IPv6网络的IPv6报文后，将IPv6报文封装在IPv4报文中，成为一个IPv4报文，在IPv4网络中传输到目的IPv6网络的边缘设备后，解封装去掉外部IPv4头，恢复原来的IPv6报文，进行IPv6转发。
图3-1 IPv6穿越IPv4隧道