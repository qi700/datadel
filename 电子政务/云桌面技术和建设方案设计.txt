云桌面技术和建设方案设计
文章简要介绍了云桌面的功能和系统架构，分析比较了目前两种主流云桌面技术，同时介绍了云桌面系统对比传统桌面的优势。建设云桌面系统时，在方案设计中应综合考虑云桌面最终用户应用场景、使用的终端外设、对网络的带宽要求、用户云桌面配置要求、投资成本等方面。    近年来，随着云计算技术的快速发展，云计算产品、技术和服务在市场引起了新一轮的产业变革。探究云计算商业价值的根本，是人们获取软硬件资源、数据应用方式的改变，是资源使用模式、业务发展模式、商业服务模式的改变。云计算的典型应用模式可分为3类：IaaS(基础架构即服务)、PaaS(平台即服务)、SaaS(软件即服务)。其中，基于远程桌面视图交付的SaaS层云桌面技术是将数据计算由传统终端(台式机等)转移到后端服务器，终端侧仅负责图形显示及鼠标键盘操作的桌面虚拟化技术。云桌面的实施可显著提高数据安全管理水平、降低软硬件管理和维护成本、降低终端能源消耗，是目前云计算产业链的重要发展方向。　　1.云桌面概述　　1.1 云桌面简介　　在计算机中的桌面是指打开个人计算机并登录到操作系统后看到的主屏幕区域，这就是我们工作的桌面。云桌面也是一个显示在我们屏幕上的桌面，但它的后面不是一个真实的计算机，而是通过网络连接远端服务器上。也就是说，云桌面是由服务器提供的，所有的数据计算运行在服务器上，云桌面仅仅显示桌面图像，并接受键盘、鼠标等外设的输入操作。服务器能同时为多人提供不同桌面，如Windows桌面、Linux桌面等。我们只需要一个客户端设备，或者其他任何可以连接网络的移动设备，通过浏览器或者专用程序，就可以访问驻留在服务器的个人桌面。用户体验和我们使用传统的个人电脑是基本一样的。　　云桌面的接入终端一般是瘦终端或者普通PC(个人计算机)。部分云桌面系统也支持智能手机、Pad等终端接入设备。接入终端用以处理与服务器间的远程连接协议、输入输出设备、外围设备驱动等，并将终端连接设备映射到服务器会话中，用户可以执行保存、打印、输出操作。　　1.2 云桌面架构　　一个云桌面系统的典型架构可分为终端接入、云桌面系统和访问的业务系统3个层次，见图1。
图1 云桌面系统典型架构　　云桌面工作流程：用户通过各种终端通过桌面显示协议访问云桌面接入地址或门户，该访问地址或接入门户一般前置负载均衡设备。由用户管理服务器，通过用户管理系统，通常是微软的AD(活动目录)验证用户身份，认证通过后请求被定向到随机或定制的云桌面。用户登录云桌面后，如同登录本地桌面一样访问业务系统进行操作。　　2.云桌面的两种主流技术　　2.1 两种主流技术介绍根据云桌面不同的实现机制，目前主流云桌面技术可分为两类：虚拟桌面基础架构的VDI(虚拟桌面基础设施)方式和基于服务器计算模式的SBC(基于服务器计算)方式。　　VDI方式：在数据中心通过虚拟化技术为用户准备好安装Windows或其他操作系统和应用程序的虚拟机。用户从客户端设备使用桌面显示协议与远程虚拟机进行连接，每个用户独享一个远程虚机。这种技术也可称为桌面虚拟化。　　SBC方式：用户通过与服务器建立不同的连接session(对话)对服务器上的应用进行访问。通过不同的会话区分和隔离用户，使多个用户同时共享同一个操作系统。可通过策略配置为每个用户提供不同的桌面。　　简而言之，VDI是连接到一个独享的虚拟机，而SBC是连接到共享的终端服务器的session。　　2.2 两种技术对比　　相对于SBC方式，VDI的优势在于：　　1)多操作系统支持。SBC方式下用户只能接入Windows系统。VDI方式下，用户可以接人Windows或Linux操作系统。　　2)更好的性能和安全性。SBC是多用户的session共享同一个操作系统，而VDI是每个用户都有自己独立的虚拟机，用户可拥有独立、完全的桌面使用和控制权限。如果其中一个用户虚拟机出错，不会影响到其他用户。在计算性能、数据的安全性和隔离性上，VDI方式优于SBC方式。　　3)应用软件兼容性支持好。在实际工作中，并不是所有的应用都与终端服务相兼容。由于VDI是独享的虚拟机操作系统，对应用的兼容性更好。　　4)对外设的支持度高。VDI使用的是一个完整的虚拟机，对各类端口的外设支持度高，包括串口、并口、USB(通用串行总线)口，还可将终端连接的不同外设通过桌面显示协议传输数据到服务器端进行二次开发。而SBC是Windows操作系统下共享的会话，部分解决方案不支持USB外设，也无法通过桌面显示协议针对外设传输数据进行二次开发，对外设的支持度较低。相对于VDI方式，SBC的优势在于：　　1)部署成本低。VDI实现的基础是在服务器侧部署虚拟化软件，为用户提供独享虚拟机。虚拟化软件购置需要成本，对计算和存储资源要求也高。相比而言，SBC的实现在服务器侧只需要安装一套操作系统，软硬件成本都较低。　　2)集中管理性好。个性化设置是云桌面用户的实际需求。在VDI方案下，每个用户在虚拟机设置、用户应用设置、用户权限上有不同需求，配置管理文件比较复杂。SBC方式只针对用户访问应用进行控制，降低管理难度。　　3)整合比更高。将一台服务器的硬件资源切分给用户session所占用的资源小于切分给用户虚拟机所占用的资源，所以SBC比VDI具有更高的整合比，同一台服务器可服务于更多的用户。　　3.云桌面优势　　与传统桌面工作方式比较，云桌面具有明显优势。　　1)工作桌面集中维护和部署，提高桌面服务能力和工作效率。云桌面改变了过去分散、独立的桌面系统环境。通过集中部署，IT人员在服务器侧完成所有的桌面管理维护]二作，包括操作系统安装、软件更新、操作系统补丁升级、安装防病毒软件等等。最终使用用户不需要对个人工作桌面自行维护，连接云桌面后可运行的程序“所见即所得”，减少了企业大量的桌面维护工作，也提高了企业桌面维护支持的服务水平。　　2)数据远程隔离，有效保护数据的信息安全。云桌面的用户桌面环境、业务数据都是托管在远程服务器上，本地终端只是一个显示设备。终端不处理和存储业务数据，通过云桌面系统的策略控制，业务数据无法下载到本地，有效保障了数据的安全。维护人员甚至通过设置不同的本地终端控制策略，禁止用户对本地USB等设备的访问，通过这样的数据隔离措施，企业能够有效的保证数据不被违规带出企业，可有效防范数据的非法窃取和传播。　　3)多终端多操作系统的接人能力。云桌面是由服务器提供的，用户可随时随地通过移动或固定网络访问。部分云桌面平台还支持多种终端的接入，如瘦客户端、PC机、上网本、手机、平板电脑等，支持苹果iOS(操作系统)、安卓等多种系统平台。　　4.云桌面建设方案设计要素　　云桌面方案只有具备替代现有终端的条件下才有实施意义。在规划云桌面的建设方案时，必须对现有环境进行充分的调研和详细的方案设计，应从云桌面最终用户应用场景、使用的终端外设、对网络的带宽要求、用户云桌面配置要求、投资成本等方面综合考虑。　　4.1 应用场景　　云桌面方案的关键技术是桌面显示协议，受目前桌面显示协议技术成熟性的限制，对大数据量的传输支持效果较差。如果最终用户是高质量多媒体需求或复杂图形计算的使用需求，则不适合应用云桌面技术来建设。　　此外，远程桌面显示离不开网络传输，每种不同的桌面显示协议对带宽有不同要求。对于网络质量不能保障的应用场景，也不适合应用云桌面技术来建设。采用基于VDI的解决方案，用户能够获得一个完整的桌面操作系统环境，虚拟机之间的数据安全隔离度较好，一个用户虚拟机的宕机不会影响其他用户，这与本地计算机的使用体验十分接近，从而使服务质量得到保障。因此，基于VDI的云桌面比较适合于对桌面功能需求完善的用户使用。采用基于SBC的解决方案，整个方案实施部署对服务器软硬件复合利用度高，但在性能隔离和安全隔离方面较差，共享操作系统方式可能发生软件兼容性冲突，最终用户可访问的是受策略控制的服务器版本操作系统，与本地计算机的使用体验有差距，较适合于应用场景单一、外设标准化程度高的用户。　　4.2 终端外设　　不同用户的最终应用场景差异很大。对于固定办公使用，一般只需要支持鼠标、键盘、打印机几个标准外设；用于业务受理的营业厅使用则除上述外设外，可能还需要支持扫描仪、身份证识别仪、指纹仪、U-key(USB key)、评价器、POS(销售点终端)磁卡刷卡器等多种复杂外设。云桌面客户端主要是使用瘦终端。在瘦终端选型时，应确保接口型号、数量能够满足运行需要。对应用场景中有特殊驱动、接口或配置的外设，必须提前进行设备驱动识别验证，确保实施要求。　　不同云桌面建设方案采用的桌面显示协议是不同的，终端选型时也要求该终端支持所使用的桌面显示协议。　　4.3 网络带宽　　每种云桌面使用的桌面显示协议对网络带宽有不同的要求，在规划建设方案时，要确认各终端网点的接入网络带宽和质量是否能够满足云桌面用户需要。接入点的网络带宽为终端数量乘每个云桌面需要的带宽，接入网出口带宽应能满足带宽需求。其次，机房出口总带宽也要能满足所有应用场景的带宽要求。　　4.4 云桌面配置　　云桌面的实施是取代原有本地计算机的使用，所以云桌面用户的配置要能满足原有用户的T作需要。这些配置包括：用户操作系统、桌面计算能力、用户数据存储空间、用户权限等。不同应用场景的最终用户对桌面配置需求也是不同的，这些配置是云桌面服务器硬件、存储设备规划采购的最重要依据。对需要保留用户个性化设置．白有桌面信息的应用场景，建议采用漫游用户配置文件的管理方式：使用漫游配置文件，全平台保持一份用户配置文件，用户随机登录每一台服务器(SBC方式)或每一台虚拟机(VDI方式)。都使用同一配置文件，保持用户使用的连贯性。　　4.5 投资成本　　规划云桌面系统时，在充分调研应用场景需求的情况下，决策采用SBC方式或VDI方式建设对于资本性支出至关重要。总体来说，VDI方式需要在服务器侧部署服务器虚拟化及其管理软件，同时对计算资源和存储资源要求较高，比SBC方式的投资成本要高。　　建设云桌面系统，数据中心要采购的硬件包括：服务器、存储、网络、机架。用户量大的情况下，要购买负载均衡设备。采购的软件包括：服务器操作系统、远程桌面协议许可、防病毒软件。VDI架构的云桌面还需要购买服务器虚拟化软件、云桌面管理软件、云桌面客户端许可、桌面操作系统。客户端需要采购的是终端设备及常用外设。此外还包含为系统建设所涉及的机房电源、空调、承重改造等新建或扩容的配套工程。　　5.结束语　　经过近几年技术的不断发展，云桌面产品的成熟度不断提高。对外设更好的兼容性、优化的桌面显示协议、更低的带宽准入要求、多移动终端系统的接入支持，为云桌面产品带来更多的客户。越来越多的企业认识到云桌面在降低企业桌面管理维护成本、保护企业数据安全、多终端接入方面的优势，已经或正在筹建企业内的云桌面系统。随着云桌面产品的日益成熟，云桌面终将以完全接近甚至超出现有传统桌面的用户体验成为云计算应用家族中重要成员，具有更加广阔的应用前景。