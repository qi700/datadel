校园安防网络监控方案
浅谈校园安防网络监控方案的应用与实践 作者：  陈斐鹏  40天内连续发生5起校园惨案，校园安全已受到国家领导的高度关注，即安协会发布校园安防设计标准后，随着社会的高速发展，知识时代的来临，教育成为个人、甚至社会的重点关注话题之一，现代人的生活节奏随着经济的发展在不断地加速，繁忙工作的需要等等，校园的安全，成为安防行业发展的重中之重。
一、项目概述
随着社会的高速发展，知识时代的来临，教育成为个人、甚至社会的重点关注话题之一，启蒙教育更成为了各界关注的焦点。现代人的生活节奏随着经济的发展在不断地加速，繁忙工作的需要，让人分身乏术，甚至于一些家长不得不将很小的孩子交给幼儿园代为看管。
对于家长来说，将孩子交由幼儿园管理，必定会慎重选择。面对众多可供选择的幼儿园，家长会将各方面进行对比。教学条件，师资力量固然是各个幼儿园的竞争重点，但是环境，安全等也是不可忽视的方面。采用远程监控系统作为教学管理辅助，家长在家、在办公室甚至出差在外都可随时观看孩子在幼儿园的情况，不仅能让家长放心地把孩子交给学校，更可让家长看到学校的管理实力。这在无形中使得学校的竞争实力倍增。
随着监控技术的不断发展，已经有越来越多的幼儿园开始采用监控系统作为学校的辅助设备。采用监控系统已成为许多幼儿园智能化管理的新趋势。根据网络视频监控系统的要求和国家有关法规的要求及幼儿园的实际需求和特点，经研究、分析设计本系统方案，该系统具有性能先进、质量可靠、经济实用等特点，而且该系统具有方便扩展、与其它信息系统实现无缝连接的能力。
依据的相关规范包括：
《中华人民共和国公共安全行业标准》GA241.9-2000
《工业电视系统工程设计规范》GBJll5—87
《远动设备终端通用技术条件》GB/T16435-1996
《建筑电器设计规范》JGJ/T16-92
《软件工程国家标准》
《电气装置安装工程施工及验收规范》
《安全防范工程程序与要求》GA/T75-94
《安全检查防范系统通用图形符号》GA/T74-94
《社会公共场所安全防范工种设计规范》
《民用建筑电气设计规范》JGJ/T16-92
《民用闭路监视电视系统工程技术规范》GB50198-94
《信息技术软件生存期过程》GB/T8566-1995
《计算机软件产品开发文件编制指南》GB/T8567-1988
《计算机软件需求说明编制指南》GB/T9385-1988
《软件工程术语》GB/T11457-1995
《计算机软件质量保证计划规范》GB/T12504-1990
《计算机软件配置管理计划规范》GB/T12505-1990
《软件维护指南》GB/T14079-1992
《计算机软件可靠性和维护性管理》GB/T14394-1993
《软件支持环境》GB/T15853-1995
通过认真分析幼儿园视频监控需求，我们在幼儿园视频监控设计方案中将遵循以下的原则：
(1)先进性
应充分考虑信息化社会迅速发展的趋势和幼儿园视频监控的本身特性、管理要求，在技术上适当超前，所采用的技术和设备应能保证满足信息化发展的需要，保证幼儿园图像建设的需要。应考虑发展的需要，使系统与未来扩展的设备有互联性与互操作性。系统建成后，其系统整体技术性能完全可以达到世界先进水平，并能在一定时期内保持技术领先的地位。
(2)可靠性
系统必须具有高度的安全性、可靠性和稳定性。在设计弱电各子系统时，应从系统配置、软件结构、设备选择、技术服务等诸方面进行综合考虑，选用技术上成熟的、具有发展前景的国内知名品牌产品。设计的系统和选用的产品能够确保在24小时连续工作模式下无故障运行。系统管理平台上也采用授权、密码、口令、验证、确认等手段，能确保系统设备可靠、无误的工作，确保应用可靠。
(3)实用性
一个系统是否实用、适用，是否符合实际应用是最主要的。我们在考虑系统的设计方案时，充分考虑管理的需要，又要考虑到具体职能部门的机构设置、管理模式、岗位分配、岗位职能等。使本系统适应于现代化办公的需要。
(4)可用性
弱电系统工程对营造现代化的办公、休闲环境和气氛起到很重要的作用，因此我们提供的“各弱电子系统”持续可用，所选用的产品均具有很高的质量标准和制造水平，其平均无故障工作时间长，即使发生临时性故障，产品维修维护方便，故障后需恢复正常工作的时间极短。即使在出现重大的故障时，如黑客攻击、网络瘫痪等，各子系统仍备有本地数据存储系统，并备有人工输入信息的操作截面，使授权的操作员能及时处理各类问题，确保系统仍能正常工作和操作。
(5)可维护性和可扩展性
本系统全部采用模块化积木式结构设计，应用软件中具有一定的开放性，设置扩展接口，以满足今后系统的扩展、升级要求，充分保护用户投资。
(6)集成性
充分考虑本系统各子系统及以后系统的扩展，以便实现集中管理、监测和分散控制，达到信息共享。
(7)安全性
安全性和可靠性是密不可分的。本系统的设计具有高度的安全性和保密性，通过对系统分级保护、数据存储权限的控制等手段，并具有病毒探测、薄弱环节分析、密码管理功能，可以有效的防止各种形式的对系统的非法侵入和攻击。系统的所有终端用户在对系统进行操作和访问之前都必须进行注册登记。
系统将根据注册所得的用户唯一标识和密码来控制此用户的访问权限，以防止非法操作。不同级别的授权才具有相应的操作权限。系统的安全操作除采用软/硬件保护性措施外，还与操作人员的素质和管理制度密不可分。管理部门应建立严格的“安全操作规程”，由操作者执行并“按章操作”。
依据以上设计原则，进行系统设计时，应充分考虑当前技术发展的潮流，并紧密结合我国的实际情况，在本系统设计中一切以先进、实用、可靠、追求高性能价格比，满足幼儿园视频监控管理平台需求为本。
三、需求分析
幼儿园网络视频监控系统的功能，主要体现在以下几个方面：
活动场所监控：孩子们在玩耍时，往往不会在意到一些安全问题，老师也不可能全面地照顾到每一个孩子。将幼儿园网络视频监控系统系统安装在孩子们的活动场所，可以最直接得了解到孩子们的成长情况，同时，也可以注意到孩子们在玩耍过程中的安全问题。
休息场所监控：对于幼儿园的孩子们，由于年龄还很小，并不能够做到自己照顾自己，在睡觉的时候，经常会有被子没盖好、睡觉姿势不正确等等情况，这就需要老师们在休息室一直巡视。但是，有限的人手、有限的精力，不可能全面得照顾他们，同时也会影响到孩子们的休息。将幼儿园网络视频监控系统安装在孩子们的休息场所，可以全面地了解到孩子的休息情况。通过该系统，老师们不必一直待在休息场所，特别在夜晚，只需要在一个地点监看孩子们的休息情况即可。这样可合理减少人力的投入，减少管理成本，提高工作效率。
家长远程探看：作为孩子的家长，或多或少都想了解自己的孩子在学校的学习、生活情况，特别是对于寄宿的孩子，家长多少还是有些不放心的。利用幼儿园网络视频监控互动系统，孩子家长无论是在本地、外地甚至于国外，只要具备网络设施，便可通过系统客户端登录到监控点，看到孩子的实时情况，抓拍到孩子日常生活中珍贵的视频资料，同时，还可以通过系统设置的通话功能，与监控点进行通话交流。这样一来，真正解决了家长的后顾之忧，家长也就可以更加放心地把孩子交给学校。这也无形中显现出学校的实力，增添了学校的美誉度。
提高教学质量：系统可以对监控点的实时场景进行录像，并将录像资料存储。利用该功能，幼儿园可以将孩子的一些日常学习、生活等情况录制下来，进行一系列的分析，并制订出适合孩子们的教育方式，积极地开发孩子们的内在潜能，提高师资水平和教学质量。
汇总成长资料：通过幼儿园网络视频监控系统，学校可以将实时的情况进行录像并保存，可用以真实再现孩子的学习、成长历程。
增添宣传途径：幼儿园可以将一些相关的监控点公开到一些宣传媒体中(平面媒体和视频媒体都可)，让家长不必亲临幼儿园就可以看到学校的具体情况，增添了家长了解学校的途径，并且也可以减少过多接待学生家长的参观而带来的对园区教学的影响。
为满足幼儿园网络视频监控的业务需要，同时考虑到其他数据业务需要，通过校园内部网络传输系统连接中心监控室到前端监控源。
监控中心也是系统的数据处理中心，数字视频监控会产生大量数据传输将会带来数据流的压力，以及设备交换压力，为了达到数据传输的高速稳定性，高端智能交换机作为中心的核心交换设备。
前端链路建设实际上就是前端编码器与监控中心联网问题。按照每路D1图像应该最大需要2M带宽(每路图像在CIF的情况下的时候，带宽在384K~512K之间可调)。
四、系统总体设计
在幼儿园的各个班级、活动室、餐厅、室外活动区、大门口等重要公共场所安装各种类型的摄像机，通过网络视频服务器进行视音频图像信息的压缩编码并且利用校园网络资源进行网络数据传输，幼儿园监控中心人员对所有的音视频图像进行存储与管理，同时幼儿家长也可以通过Internet远程监控幼儿在学校的学生生活情况。设计方案充分考虑了后期的扩容、管理变更等可能的建设要求。
本次设计思路如下：
1、根据要求，本次设计采用一级结构，实现“大容量、多画面处理、实时录像和回放、联网远程监控”的目标。
2、本次设计系统便于以后系统用户的安装、操作和今后的维护便利;
3、系统设计考虑了各种兼容要求和扩容要求：包括监控点后期扩容、系统规模扩容、临时授权用户远程监控等各种可能扩容方式下对现有网络的兼容和便利性，设计的系统能够满足兼容和平滑扩展的要求。
4、系统设计对网络传输路由具有良好的适应性，根据网络资源的情况，在不同的网络带宽下可以灵活设置编码格式，获得不同的图像质量。
5、本次设计的系统是标准和开发的，系统软件全部采用通用的主流标准;如系统采用标准的TCP/IP协议、接口标准通用等;适合化工系统各个标准子系统的集成。
6、系统考虑了操作冗余、数据安全和远程鉴权等技术手段，保障系统安全运行和不受外部入侵，完善的身份认证能力，保证系统稳定运行。
7、在技术性价比上，方案采取实用的原则，不追求高端设备的堆砌，而是本着实用的原则进行了科学的配置建议，以求达到最大的技术性价比。
数字网络综合监控系统的关键设备是视频服务器和平台化监控系统软件。
视频服务器采用嵌入式实时多任务操作系统。摄像机送来的视频信号在网络视频服务器数字化后由高效压缩芯片压缩，通过内部总线送到网络接口发送到网络上，网络上用户可以直接在PC机上通过HSVision监控客户端软件观看视频服务器传送过来的摄像机所拍摄的图像，还可以控制摄像机镜头和云台的动作或对系统进行配置操作。
由于视频服务器可以直接连入局域网，达到即插即用，省掉多种复杂的电缆，安装方便(仅需设置一个IP地址)，用户也无需安装任何硬件设备，仅通过PC机用浏览器即可观看。
网络视频监控系统妥善处理了数字与模拟系统的结合，其优点主要包括：布控区域广阔视频服务器直接连入网络，没有线缆长度和信号衰减的限制，同时网络是没有距离概念的，彻底抛弃了地域的概念，扩展布控区域;
系统具有几乎无限的无缝扩展能力;所有设备都以IP地址进行标识，增加设备只是意味着IP地址的扩充;
可组成非常复杂的监控网络;采用基于视频服务器为核心的监控系统，在组网方式上与传统的模拟监控和基于PC平台的监控方式有极大的不同，由于视频服务器输出已完成模拟到数字的转换并压缩，采用统一的协议在网络上传输，支持跨网关、跨路由器的远程视频传输;
视频服务器实际上基于嵌入式电脑技术，采用嵌入式实时多任务操作系统(RTOS)，又由于视频压缩和网络功能集中到一个体积很小的设备内，直接连入局域网或广域网，即插即看，系统的实时性、稳定性、可靠性大大提高。
前端一体化、视频数字化、监控网络化、系统集成化是视频监控系统公认的发展方向。第四代以计算机技术及图像视频压缩、图像传输技术为核心的新型视频监控系统，解决了模拟系统的诸多弊端，是以信息技术为核心的电子技术发展的必然。
图像压缩处理技术
目前比较流行的图像压缩标准有：MJPEG、H.261、H.263、MPEG-1、MPEG-2、H.264等。H.264标准是国际标准化组织ISO/IEC下辖的运动图像专家组(MovingPictureExpertsGroup,简称MPEG)于1999年制定的专门用于多媒体信息内容访问的、适宜于各种带宽下传输的图像压缩标准，不仅是目前最新的国际标准，也是目前最适合图像监控系统的图像压缩标准。
H.264技术目前已被国际各大知名厂商采纳为国际互联网(Internet)和第三代移动通讯系统(3G)进行图像传输的标准。H.264标准的编码是基于对象的，这样就便于操作和控制对象，而以前传统的图像压缩技术是基于帧的。在传输带宽有限制的情况下，传统图像压缩技术的图像质量是帧平均的，而H.264标准可以对用户感兴趣的对象分配较大的带宽，而对用户不感兴趣的对象分配较小的带宽，从而大幅度地提高了在同等带宽下图像的主观质量。H.264标准还吸收了传统图像压缩技术的许多优点，在带宽可以得到保证的情况下，其图像质量可以达到MPEG-2(即DVD)的标准。同时，其图像传输延迟很小，一般低于0.5秒，非常适合图像监控系统的要求。
先进的分布式服务器集群架构
随着数字网络监控系统规模的快速发展，客户对系统访问的响应时间、监控图像质量以及所提供服务的可靠性、即时性等要求也越来越高，使得以单台服务器来支撑整个网络监控系统已无法满足客户需求。取而代之的是一组服务器群。我公司的HSVision网络监控系统利用第四层至第七层通信管理技术，可以根据服务器实际的响应时间，平衡服务器群中所有服务器之间的通信负载，从而提高整个监控网络的性能和响应能力，提高服务器群的效率，节省投资。
负载均衡是由多台服务器以对称方式组成一个服务器群集，除主服务器外其他从服务器都具有同等地位，均能单独对外提供服务。通过特定的负载均衡技术，将外部客户请求视服务器群集中各服务器上的负载状况合理分配到某台服务器上，负载均衡技术根据实际响应时间制定优先响应策略，从而提高系统性能、优化流量管理、提高服务器群集性能，保证系统正常运行的高可用性和高可靠性。如果访问量超出了服务器的响应能力，只需增加服务器数目就可平滑升级。由于采用了负载均衡技术，进一步强化了系统的稳定性、可靠性和持续性。它也支持路径外返回模式，即绕过流量分配器，为急于等待大量访问请求响应的客户提供更快的响应服务。
我公司在HSVision网络监控系统中提出并运用了先进的MAXROUTER负载均衡算法(对个别服务器配置最大连接数阀值或加权值)以及基于实际响应时间的智能流量分配算法，在性能不同的服务器之间进行负载平衡，充分利用服务器群中的每一台服务器，保护用户投资。位于主服务器上的负载均衡模块能定时监测从服务器的可用性，包括物理连接、服务器运行状况。当发现某台从服务器不能提供内容访问时，主服务器自动把用户请求分配到其他健康的服务器上，从而保证了用户的访问服务;同时负载均衡模块可通过设置每台服务器能承受最大的会话数、设置溢出服务器、备份服务器等手段来进一步保证系统连接的可靠性(根据实际系统需求用户可要求定制)。
多级组网可按多级组网的方式，形成大规模的监控网络，高一级的监控中心能管理和监控低一级监控中心的运行。组网经济，基于TCP/IP网络构建，利用宽带资源或客户原有资源，成本低。平台统一升级，维护成本低。
先进的视频流调度管理
支持多种传输协议(TCP、UDP、RTP)和多种传输方式(单播、广播、组播)，支持多级转发模式。
系统扩容方便
用户可根据业务需要随时增加前端监控点的数量。HSVision系统是一个开放的、通用的视音频处理平台，可制定相定的功能模块。
扩展性强
可与其它标准接口的设备配套使用。系统接供OCX控件和DLL动态库，可与其它信息管理系统集成。
先进稳定的C/S结构系统
主干框架采用C/S结构，结构严密，系统稳定，且高度保密，非常适合专业部门使用。在C/S结构下，系统有严格的用户身份认证机制，对用户的合法性及权限有严密的控制。系统内，客户端与服务器之间有专有的通讯协议，可防止窃听和复制，从而达到系统的整体安全和保密效果。另外从总体系统安全性上考虑，由于B/S结构是建立在浏览器基础上的，功能上就受到浏览器本身功能的限制，如浏览器不支持直接写屏，很多时候会造成系统显示的不必要延时等。而且目前网络上的绝大多数病毒是针对浏览器的，所以导致整个监控系统易受到攻击，给日常工作带来不必要的麻烦。因此，建议采用专业的C/S结构。
考虑到部门领导或某种场合下使用的方便性，HSVision系统配置了专门的插件，用户可通过浏览器访问系统的服务器，后台自动安装该插件后，用户即可方便使用该系统的全部功能，使用效果上和B/S几乎没有差别。多级用户管理机制系统用户设立多级管理模式，从视频管理服务器完成所属用户和站点的建立、权限管理工作，并向管理中心主视频管理服务器数据库备份。主视频管理服务器完成所有用户和所有站点的建立、权限管理工作，管理中心用户具有最高级别的管理权限。各个用户依据不同权限、不同管理范围、不同优先权进行对询问记录的查看和控制。
数据传输技术
TCP/IP网络协议是目前最流行也是最稳定的网络协议。HSVision视频监控系统在TCP/IP网络协议之上开发了专用通讯层，针对图像数据的混合传输做了优化处理，适合多点视频和数据的并发传输，降低了系统资源的占用率。该通讯层支持多种TCP/IP协议的传输，包括TCP、UDP、RTP和组播等。组播是一种允许一个或多个发送者(组播源)发送单一的数据包到多个接收者(一次的，同时的)的网络技术。组播源把数据包发送到特定组播组，而只有属于该组播组的地址才能接收到数据包。组播可以大大的节省网络带宽，因为无论有多少个目标地址，在整个网络的任何一条链路上只传送单一的数据包。它提高了数据传送效率，减少了主干网出现拥塞的可能性。组播组中的主机可以是在同一个物理网络，也可以来自不同的物理网络。
数据存储、处理、分析技术
为了对告警数据进行分析处理，综合管理系统使用了Microsoft公司的SQLServer数据库系统。并成功地实现了数据库的分布存储和访问，有效地降低了系统负担，大大提高了系统的稳定性。同时，系统支持对数据的多种查询和分析方式。同时系统提供了各类数据库。主要有告警数据库、历史统计值数据库、系统事件数据库。从而为整体数据的存储、处理及分析提供了强有力的依据。系统采用文件传输协议进行录像文件的传输，防止外来入侵对文件系统的破坏和由于录像文件过大而带来的不稳定性。
四、总体框架
根据幼儿园视频监控要求，结合实际情况，设计如下方案：
所有的视频的传输、切换主要是由HSVision1600系列网络视频服务器及综合管理软件来完成。
HSVision1600视频服务器能清晰的实时的显示监控画面的图像信息，满足系统的严格要求。
对本系统的设计，我们严格遵照国家及部级标准进行设计，使整个系统的配置充分的体现科学合理、实用、经济的原则，以达到较高的性能价格比和技术的先进性，同时也使系统的功能和容量都具有可扩展性，为今后的升级和扩充创造一个较大的技术空间。
幼儿园网络视频监控系统管理现主要分为一级管理，下设一个视频监控中心，所有的前端监控源通过网络全部接入到监控中心的视频管理服务器上进行统一的管理。考虑到未来与上级教育部门的联网，本系统还提供能与上级部门连接及系统扩容的接口。系统结构如下图：
系统拓扑图
点击此处查看全部新闻图片
由于整个监控体系需要在多个区域进行布防监控，包括园区内主要公共场所如教师、休息室、活动区及园区出入等，针对不同地方的实际情况和需求安置不同类型的摄像机，比如在公共活动区需要安装球机，在楼道可以安装吸顶半球或者枪机，如果考虑到夜间监控或光线不足的地方监控可以使用带红外灯的摄像机等。
网络视频服务器主要功能就是将前端输入的模拟视频信号通过压缩转换成数字信号以方便在网络上进行远程传输。根据各监控点之间相对集中程度，该系统前端可以采用一路、两路或者四路的HSVision1600系列网络视频服务器,HSVision1600系列网络视频服务器支持MPEG4图像压缩标准，它将摄像头输入的模拟视频信号和话筒语音信号转换成数字信号，并按照TCP/IP标准送入专网传输。HSVision1600系列网络视频服务器支持实时图像传输和双向的音频对讲，支持6路报警输入和3路报警输出。同时可以通过网络视频服务器上的485接口、RS232接口等可以和多个其他系统进行整合。
监控中心建设包括电视墙显示系统、服务器及存储系统、监控管理软件。监控中心配备高性能的管理服务器并在其上安装监控服务器软件，可以对多级服务器、用户权限、视频录像回访和检索、报警联动等功能进行管理。
根据监控点数量情况和录像时间要求，可以在服务器上添加磁盘阵列或者硬盘扩展柜来进行海量存储，同时转发数据流，用来管理记录指向到该服务器的视频服务器的视频流。这样与前端子系统就建成了一个完全基于网络，功能非常强大的网络视频系统。
如果监控中心要求配置电视墙的话，此时监控中心可以配备HSV1600RA单路解码器可以在每台显示器上实时显示1画面，通过监控管理软件控制多台解码器可以实现所有摄像机画面全部轮询方式显示。联网的授权用户都可通过登陆HSVision管理服务器完成包括查看系统内任意一路图像及录像文件等操作。
五、安全体系
1)软件自身安全性
对于HSVision软件，服务端提供完善的事件日志和系统诊断功能;整套软件包括日志管理、设备巡检、客户端巡检、服务器巡检、服务器工作上下文诊断、故障弱化功能;有效的避免了故障的发生，并能第一时间自愈;
2)网络安全性
幼儿园网络视频监控系统网络采取独立的监控局域网，保证了系统数据的基本物理安全性。
用户权限安全
监控系统的整体架构通过多目录服务器来统一管理的用户和监控设备的权限管理。系统的管理规则由用户自行定义，多目录服务器的管理模式可以保证系统内所有用户的权限管理统一，采用身份认证技术最常用的是使用者名称与密码或Key认证等方式。
对于整个系统的用户安全性，可以采用身份秘密认证系统对整个系统的用户进行整个认证。
拥有统一的用户权限管理，每一级机构的用户只要在自己所属的监控中心开设帐号、分配权限即可。以此设立用户权限(可细分为图像浏览、控制、语音等权限)。
监控设备管理安全
统一的监控设备管理机制，所有前端监控的信息和权限由设备管理服务器管理，设备管理服务器的权限由目录服务器管理，形成一个统一管理机制。所有的设备登陆必须经过用户认证才能够登陆。
网络阻塞
方案采用分布式的多服务器群的设计理念，利用流媒体技术，完成视频信号的存储和转发，避免客户端直接访问前端摄像机，降低网络流量，避免了大流量数据造成网络阻塞的问题，同时由于这种结构，使得系统在部分子系统出故障时整个系统不会瘫痪，仍然能正常运行。在有限带宽下处理大流量数据主要采用以下技术避免网络堵塞：
基于发端的速率控制
因为TCP重传造成的时延对于实时业务质量的影响是不能承受的，通常采用UDP包来传输实时业务。但UDP包没有提供拥塞控制和质量保证的机制，所有需要在UDP的上层加上拥塞控制的机制。这个过程主要是通过调整视频编码的速率使其适应网络带宽。
抽侦策略
码率控制是视频编码中一个重要的问题，在超大运动量时，由于运动量的急剧增大，使得这时编出的码流突然增多。在IP网络中，将引起丢包。要解决此问题，在超大运动量的情况下，须采取一定的抽帧策略来降低码流，使得上述情况避免发生，同时还要保证图像的流畅。
打包策略
限制每次发送数据帧IP通信中物理层要限制每次发送数据帧的最大长度。每当网络层接收到要发送的数据报时，它要判断向本地哪个端口发送数据，并查询该端口的MTU。IP把MTU与数据报长度进行比较，如果需要则进行分片。分片可以由发送端或中间路由器执行。过多的IP分片会导致如下问题：分片的独立性导致这些片到达目的端时有可能会失序;如果对数据报分片的是中间路由器，而不是发送端，那么发送端就无法知道数据报是如何被分片的，当一片数据丢失，发送端无法只重传丢失的数据片，只能重传整个数据报或将整个数据报丢弃。因此需要提供打包策略。
访问策略
利用组播，就近访问流媒体服务器。
抽侦策略
码率控制是视频编码中一个重要的问题，在超大运动量时，由于运动量的急剧增大，使得这时编出的码流突然增多。在IP网络中，将引起丢包。要解决此问题，在超大运动量的情况下，须采取一定的抽帧策略来降低码流，使得上述情况避免发生，同时还要保证图像的流畅。
打包策略
限制每次发送数据帧IP通信中物理层要限制每次发送数据帧的最大长度。每当网络层接收到要发送的数据报时，它要判断向本地哪个端口发送数据，并查询该端口的MTU。IP把MTU与数据报长度进行比较，如果需要则进行分片。分片可以由发送端或中间路由器执行。过多的IP分片会导致如下问题：
分片的独立性导致这些片到达目的端时有可能会失序;如果对数据报分片的是中间路由器，而不是发送端，那么发送端就无法知道数据报是如何被分片的，当一片数据丢失，发送端无法只重传丢失的数据片，只能重传整个数据报或将整个数据报丢弃。因此需要提供打包策略。
访问策略
利用组播，就近访问流媒体服务器。
抽侦策略
码率控制是视频编码中一个重要的问题，在超大运动量时，由于运动量的急剧增大，使得这时编出的码流突然增多。在IP网络中，将引起丢包。要解决此问题，在超大运动量的情况下，须采取一定的抽帧策略来降低码流，使得上述情况避免发生，同时还要保证图像的流畅。
打包策略
限制每次发送数据帧IP通信中物理层要限制每次发送数据帧的最大长度。每当网络层接收到要发送的数据报时，它要判断向本地哪个端口发送数据，并查询该端口的MTU。IP把MTU与数据报长度进行比较，如果需要则进行分片。分片可以由发送端或中间路由器执行。过多的IP分片会导致如下问题：
分片的独立性导致这些片到达目的端时有可能会失序;如果对数据报分片的是中间路由器，而不是发送端，那么发送端就无法知道数据报是如何被分片的，当一片数据丢失，发送端无法只重传丢失的数据片，只能重传整个数据报或将整个数据报丢弃。因此需要提供打包策略。
访问策略
利用组播，就近访问流媒体服务器。
六、系统功能
根据上述的系统结构设计，在充分的系统功能需求的基础上，我公司自主定制开发的核心软件--HSVision，该软件基于增强型C/S(客户端/服务器)架构。系统采取多级服务器结构，作为HSVision核心软件的运行环境。软件主要功能如下：
监视功能：根据监控点的实际情况，提供全天候及全方位的画面监视功能。通过实时观测手段进行图像查看，采用全天候、多方位、固定、移动等方式对监看目标进行实时、直观、清晰的监视，全天24小时均可在监控中心、监控室观察到前端现场的实时监看画面。监视界面分为16、13、12、10、9、8、7、6、5、4、3、单画面显示，可通过轮询选择对所有的镜头进行分时段的浏览。
图像远程调节：系统通过矩阵的控制功能来操作前端活动云台的运动方向，摄像机的焦距及景深来达到最佳的监控效果。
音视频存储功能：可以通过录像计划对音视频信息进行记录，可采用硬盘、磁盘阵列多种存储介质，有本地和远程两种存储方式。
日志信息查询：通过查询此日志了解与分析系统运行情况。
图像传输功能：利用网络视频服务器压缩编码后，将模拟音、视信号转换成数字信号通过以太网络把数据传送到远程用户，实现网络内计算机的远程观看。
录像播放器：根据对画质或对时间的不同需求选择VCD、SVCD、DVD选择存储，依据录像时间、地点、企业信息、等各种关键字进行综合查询、检索，查询后可以实时显示录像资料，对于其中的图像可以单帧存储以便于做进一步的分析处理。
图像联网功能：系统通过城市综合治安系统也可以进行图像的联网传输，各级目录管理中心内安装各分级HSVision远程网络视频监控系统，在实时观看的同时还可调用远程目录管理中心的录像资料。相关部门领导也可通过中心的内部网络随时随地监看或调用各级目录管理中心的图像，使本系统更好地为水务系统服务。
配置管理：
系统配置包括：设备参数、摄像机管理、录像计划、报警计划、用户权限等，方便系统进行维护与管理。
权限管理：为了保证系统保密性、安全性，系统权限细化到每个功能。用户根据所被赋予的权限执行相应的功能。
联动报警：当有报警发生时，系统会通过客户端信息、图像显示、开关量报警、短消息、彩信、E-mail来通知用户。联动报警延迟不超过0.01秒。
B/S架构功能：系统提供后台控件安装，通过IE可直接浏览到图像文件。
多级电子地图：用最直观的方式来管理镜头和调阅图像;通过平面图快速地了解地理位置，通过点击相关的摄像头，直观的掌握事发点的事件情况。多叉树型的地图结构，可以实现多级的地图层次管理;
时间条同步回放及快照检索：利用图像快照迅速锁定事发点;及时通讯：语音和文字双重的用户交流方式;
虚拟镜头：以多种视频拼接技术提高图像分辨率或将全景监控和局部监控完美结合;
录像文件同步与异步回放：16路录像文件异步回放，4路录像文件同步回放;
心跳管理：实时掌握系统内设备和应用的健康状态;
支持巡视组管理：轻松建立含电子地图、布局、镜头等多元素的浏览模式;
报警功能体现：结合电子地图与图像双重报警
图像信息发布：通过系统提供短信网关服务，把图像作为实时消息或联动报警辅助输出到PDA;HSVision软件的系统是一套采用现代计算机网络技术及多媒体信息压缩、解压技术实现的数字图形监控系统。该系统监控的视频、音频、告警、控制信号可传至网络内的每一个节点，用户可以利用计算机网络在不同地点同时监视、控制远程某一或某些场所，同时具有动态感知、视频存储、告警管理等功能;如图5.2-1;
图5.2-1
点击此处查看全部新闻图片
技术实现
作为一个通用化视频监控平台，HSVision系统由如下一些模块组成：
设备控制模块
该模块是系统的设备驱动层，整个系统通过该模块完成与编解码器的通信。应用层的设备无关指令通过该模块翻译成设备相关指令，通过网络传输层，完成对设备的各种控制与交互。
媒体控制模块
该模块是HSVision视频监控系统的核心，用以完成对大容量媒体流以及透明数据的管理。媒体流包括两个方面的内容：一个是实时的视音频流;一个是文件流。数据管理包含两个方面的内容：存储和转发。HSVision通过一套高效和强壮的流处理机制完成存储和转发的统一资源调度，从而使得系统的处理能力得到极大的提高。
连接管理模块
连接管理接口是媒体控制接口的核心。每个连接由源和目的唯一标识。一个连接表示了一个数据传输通道。系统为每个连接创建专门的处理任务。连接相互独立，有效的避免了系统故障的扩散。每个连接可以附加一个存储请求和若干的转发请求。存储和转发共享数据，独立运行。数据的共享可以节约网络带宽。数据的并行处理保障了系统的效率和强壮性。
客户端管理模块
所有客户端和服务器的通信都要经过该模块的翻译和处理。通过该接口，客户端和服务器可以完成各种控制信令的交互。客户端管理接口又可以细分为如下的几个模块：权限管理：用户、角色和权限的管理认证管理：身份的认证呼叫管理：客户端各种请求的响应：包括连接的建立和删除，设备的参数请求等等报警管理模块通过该接口，HSVision系统实时调度各种资源用于完成对报警信息的及时处理和联动。服务器管理模块HSVision系统采用分布式多叉树服务器架构，用以分担整个系统的网络和计算压力。
服务器管理模块
负责在各个服务器之间传递和同步服务器状态，协调各个服务器的工作上下文。系统诊断模块该模块是包括如下一些组成部分：
日志管理：负责记录系统内发生的事件，并且在第一时间将要发布的日志发布到相应的客户端上。这样，可以减轻系统管理员对整个系统的维护工作量。
设备巡检：负责第一时间获得设备的各种状态，包括：网络是否正常、镜头是否正常、名称是否改变、配置是否改变等等。这些状态数据也需要同步传递到各个在线的客户端，保障应用视频图像的一致性。
客户端巡检：负责客户端状态的获取，包括客户端的登陆、退出和掉线。
服务器巡检：负责查询每个服务器是否在线。如果服务器掉线，系统会在第一时间给出提示，从而转入相应的故障处理模块。
服务器工作上下文诊断：用于诊断服务器各个模块是否正常，对于一些不正常的模块，系统负责恢复或者清除。
故障弱化：客户端故障弱化，为了保障服务器的性能，对于已经掉线的客户端，服务器自动剔除并释放相应资源。服务器故障弱化，如果服务器出现故障，在故障修复好后，系统会自动修复与所有在线客户端的连接，让用户自动重新回到正常的工作环境。
HSVision1600系列网络视频服务器专为IP网络进行视频监控而设计的嵌入式视音频设备，采用H.264的压缩方式，可以通过五类线、光纤或无线传媒在10/100Base-T网络上以每秒25帧(PAL制)的速率传输高清晰的图像，HSVision网络视频服务器可以通过ISDN，PSTN，或xDSL路由器，在局域网、广域网或者互连网上方便地实现实时视频传播。
更开放的数据集成
自主和开放的软件设计，使HSVision能更方便的和第三方系统完成数据集成。丰富的数据接口形式和强大的二次开发能力，让您能根据项目现状选择最优的数据集成方式。HSVisionV4.0已经成功的实现了和报警主机、报警软件、温湿度传感器、门禁控制器以及GPS、GIS系统的集成。强大的集成数据浏览平台、高效的数据关联查询平台以及专业的数据联动平台让您的安防应用具有更多的附加值。
HSVision客户端应用软件V4.0版
以下是客户端软件特点：多画面显示支持1至16多画面分屏、全屏显示，用户可定义浏览模式;个性化镜头管理为了降低大规模镜头管理和图像调度的复杂度，HSVisionV4.0基于站点和地图融为一体的镜头模式，为您提供强大的镜头管理能力：个性化图像浏览布局、电视墙布局、音视频组合调度、多元素组合巡视、多级电子地图等功能的发布让您在镜头管理、图像浏览以及数据的规划上更加直观、灵活和快捷。
便捷的日志管理提供查询、导出、保存和打印日志记录功能，用户可通过日志随时了解整个系统的运行状况。
远程录像文件回放基于时间、设备名称、事件名称的远程流式录像回放，录像文件可与实时传输的图像在浏览器窗口同时显示;提供多文件基于时间条的同步回放，提供基于快照的快速检索。本地录像文件回放单独的播放器回放本地录像文件，支持多文件拼接和剪辑，支持录像文件到.AVI文件的转换;方便用户编辑和保存录象资料。
专业化图像浏览
HSVisionV4.0发布的即时回放功能帮您实现瞬间场景再现;区域图像增强功能使您能更加清晰的浏览图像;虚拟镜头和广角浏览功能让您更加逼真地浏览场景;云台和工具栏自动停泊功能让您对图像的控制更加高效;焦点区域自动捕获让您对敏感场景的掌控更加轻松;即时通信和桌面共享功能的引入，为您的监控系统融入更多的信息交互手段。
高效率录像回放
HSVisionV4.0录像回放模块的发布旨在向用户提供高效的录像管理机制。录像点播(VOD)引擎的采用让录像数据的发布更加实时和灵活;强大的录像回放引擎可实现16路图像的异步回放和4路图像的同步场景回放，让录像的查阅更加快捷和直观;快照检索引擎和书签/事件定位引擎的实现，让您更快的在大容量的录像数据中快速定位事件;AVI转换和视频剪辑功能的发布让您在录像文件的后期处理和永久保存上更加方便。
实用化报警联动
HSVisionV4.0旨在向您提供面向实战的预案制定和报警联动系统。全网范围内基于防区的预案定义和调度，使网络联动成为现实，让您轻松掌控全局;报警队列机制的引入，让您在处理大容量并发警情时轻松做到全局自由调度;多级电子地图联动报警，让您的报警预案更加直观，报警调度更加高效;防区镜头预置位联动和预置位图像抓拍，让镜头协防成为可能，使得您的报警预案更贴近现实流程;开关量延时自动控制，使您的联动预案更加实用。