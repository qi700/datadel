信息系统数据容灾方案 结合盘阵与Mirror技术
随着计算机技术的深入应用，信息系统运载的数据重要性越来越高。传统的数据保护模式与容灾应急方案有诸多缺陷。本文在分析信息系统风险与问题基础上，介绍了一种结合盘阵与Mirror技术的先进数据容灾方案。
近年来，信息系统服务器安全运营问题十分突出.如病毒破坏、黑客攻击、误操作、人为原因等，轻则引起系统配置失常、系统效率降低、文件损坏丢失等，重则往往造成服务器系统崩溃，乃至所有系统信息和用户数据丢失等恶劣后果。随着互联网对整个社会的不断渗透，大量的企事业单位内部网以不同的模式(如Intranet、WAN、VPN等)融入互联网。各类互联网相关的服务器/主机均面临安全运营问题。因此，研究信息系统数据容灾新产品与新技术，并应用到企业生产实际的过程，有着十分重要的意义。
1、信息系统风险与问题
1.1信息系统面临的威胁
随着我国信息化建设的不断深入，信息系统已经成为企业不可缺少的运营支撑系统，一旦发生问题将对企业的运营带来致命的影响。信息系统面临的威胁及风险主要包括以下几方面：
(1)关键数据被破坏或丢失。如生产经营数据、财务数据、客户信息等被破坏或丢失。
(2)关键业务系统中断运行。如服务器硬件故障、病毒与黑客破坏、人为误操作等。
(3)重要的工作电脑大面积故障。如类似“冲击波”病毒的大面积感染或防病毒软件误杀毒，将使整个办公网络陷入停顿和瘫痪。
1.2传统的安全体系
传统的安全体系(如图1所示)在数据保护层面方式相对单一(如数据库本地异地备份、系统环境GHOST备份等)。一旦系统发生故障，主机的系统重装、维护，会造成系统在恢复周期内无法提供服务。更为严重的是，如果问题不仅仅是单一的系统环境，而是多因素造成的，即安全体系中的多个环节遭到攻击而停止运行(比如本地、异地备份都损坏)，那么就可能会造成不可挽回的、难以估量的损失。而且传统信息系统安全保障体系，大多是基于防火墙、IDS、防病毒等技术构建的单纯的防御体系.上述模式存在着较大的缺陷，如：对未知的攻击难于防范：对已知病毒采用对比法进行处理，清除病毒导致系统不可预见风险；对未知病毒无法及时应对。
1.3信息系统数据容灾方案的模式
传统的保护模式安全成本过高，系统恢复时间过长，难以满足网站“7x24”运行模式的要求。因此，需要一种具备以下模式的方案以应对系统运维过程中的各种情况：适用于任何软件原因(病毒、黑客攻击、误操作)造成服务器、主机崩溃、死机或出现系统不稳定的情况；适用于各种病毒感染、黑客攻击或人为破坏引发的服务器、主机故障；
适用于任何软件原因，造成服务器、主机数据损坏、丢失；适用于由于硬盘故障造成整个服务器、主机系统瘫痪；适用于系统和数据。瞬间使多台主机恢复至故障前的正常状态。
根据以上分析，我们认为，具备上述功能的新型信息系统数据容灾方案可以回避目前所知的绝大多数风险，切实保障信息系统的高可用性。
2、PlusWell Mirror技术在远程容灾系统中的应用
PlusWellMirror镜像是—种软件技术，是专为Windows/Linux系统设计的客户/月暖务器环境下一种有效的、高性能的高可用性解决方案(如图2所示)。单独使用而无需较贵的RAID磁盘子系统，无需考虑小型计算机系统接口(SCSI)对缆线长度的限制，去除了单点故障(磁盘阵列子系统)。同时它在局域网的服务器之间提供完全基于软件的镜像。两个服务器分别被指定为主、从服务器。只能对主服务器上的镜像文件夹进行读或写，从服务器上相应的文件夹被锁定以防对数据的存取，除非在主服务器上检测到故障状态。这是实现一个高件能方案要考虑的一个重要问题，因为数据的完整性是主要凶素。该技术具有以下优点：可将整个应用环境保护到镜像盘阵；提供应用环境的整体快速恢复；可直接与服务器、主机连接；通过SAN(IPSAN/FCSAN)与多个服务器、主机连接；可外挂通用盘阵。
3、盘阵技术在数据容灾中的应用
盘阵是把多个磁盘组成一个阵列.当作单一磁盘使用，它将数据以分段(striping)的方式储存，存取数据时相关磁盘一起动作，大幅减少数据存取时间，同时使空间利用率更佳。盘阵技术又称为廉价冗余磁盘阵列(Redundant ArraysofIndependent Disks，RAID)。作为高性能的存储系统，得到了越来越广泛的应用。RAID从概念的提出到现在发展了6个级别，分别是0、1、2、3、4、5等。常用的是0、1、3、5四个级别。综合使用RAID技术的系统环境对数据的保护更加出色，如0+1、10、30、50等。盘阵技术以镜像模式将主盘阵数据同步到镜像盘阵。主盘阵发生故障造成数据损坏、丢失时，快速切换到镜像盘阵，保持系统的连续运行。但盘阵技术同样有自身的缺陷，比如构成盘阵的几块盘同时损坏。再比如受病毒攻击影响。文件被删除而系统时间未到备份点，造成关键数据丢失等。
4、结合盘阵与Mirror技术的新一代系统安全保护方案模式
4.1通用数据保护系统UDP介绍
目前业界出现了一类以通用数据保护系统(如图3所示)为代表的数据保护产品。产品提供了一种安全机制.能够适合大多数原因(病毒、黑客攻击、误操作)造成服务器、主机崩溃、死机或出现系统不稳定的情况；适合各种已知或未知的计算机病毒感染、黑客攻击或人为破坏引发的服务器、主机故障；适合任何软件原因.造成服务器、主机数据损坏、丢失；适合由于硬盘故障造成整个服务器、主机系统瘫痪，保护系统和数据.瞬间使多台主机恢复至故障前的正常状态。
4.2技术实现原理
技术实现原理如图4所示。被保护对象的在线保护功能是由基于物理层的多版本连续数据保护物理层复制和基于多时间点的逻辑层的数据保护逻辑层复制来实现的。利用Remote Mirror技术，自动扫描服务器的本地磁盘信息智能，信息获取各盘大小，并为其自动分配相应的空间，对动态在线复制文件及数据库、多台服务器的全部系统和环境文件则在线复制到相应的磁盘空间：同时.自动地对各服务器的本地磁盘实施动态增量复制，形成多版本。当系统受病毒或其他因素影响出问题的时候。能根据设定参数，自动实施网络启动操作系统，应用软件，并使用原有的复制的数据，实现数据库数据多版本回滚；若所选择的某时刻的文件。备份数据有问题。则可通过回滚到其他不同时刻的版本而快速恢复到可用数据状态：当实施网络启动操作系统.应用软件并恢复运营后。可在系统I/O比较少的时间(如深夜)，使用恢复功能，对各服务器原有的磁盘实施恢复操作。当完成对本地盘的全部系统和数据的恢复后，根据需要，即可将运营切换到本地盘上。该操作很简单。只须重启系统.并选择本地启动即可。
5、结论
本文针对信息系统数据容灾应急解决方案进行了多方案的分析对比。本文认为，随着技术的发展，结合盘阵与Mirror技术的方式以其部署简单(现有系统无须作任何变更，仅在主盘阵与镜像盘阵间建立Mirror关系)；通用性强(支持不同OS及主机、支持不同存储系统、支持不同厂家产品组成的混合系统)的特色，将成为今后数据容灾的主流解决方案。