基于现代备份技术的数据保护策略
备份基础设施现代化并不像一些备份厂商让你相信的那么简单。需要做很多工作来选择备份替代品以及确保正确使用这些产品，最终才能保护你的数据。但是一旦你度过最初部署阶段，并对操作进行了验证，你的数据保护将会更加灵活，其扩展性也将更好。　　虽然每周全量夜间增量备份仍是常态，但很多组织机构逐渐发现他们的数据（以及恢复那些数据所需的条件）打破了长久以来传统备份所依赖的模型。存储管理人员备份操作不当，意味着困难并关键的备份现代化任务迎面而来。　　备份现代化将是一个有点痛苦的过程，不仅需要选择一项备份技术，还需要考虑这种转变对关键业务处理和需求的影响。　　备份替代技术考量　　就备份现代化来讲，有各种各样的解决方案，无论经济实用型方案，还是舶来品。不过，当今有三类主要的数据保护策略：持续数据保护（CDP）快照基于镜像的备份　　CDP技术对数据进行近乎连续不断地保护。并非在夜间进行大型备份，CDP产品的备份全天候执行，每隔几分钟就进行一次。　　CDP产品首先将数据以块的方式复制到磁盘备份介质中。当某个块被创建或更改时，该块被备份。CDP有对版本信息进行跟踪的索引，而数据重删技术能够保证只有不重复的块会被存储到备份介质中。　　快照与备份有所不同，前者并不创建数据的拷贝，而是提供将虚拟机、文件或应用回滚到先前某点状态的方法。快照是使用磁盘差分或指针的技术。由于快照并不进行实际备份，一些备份厂商将快照作为一种提高自身产品恢复能力的方式，而不是将其用作单独的数据保护策略。　　基于镜像的备份代表着备份领域一种新的策略，并应用于虚拟机备份中。此类备份源于这样一种思想即备份处理对虚拟机进行整体数据捕获。如果需要进行恢复操作，将虚拟机的拷贝挂载至沙盒环境中用以承载数据。沙盒挂载能力有时也用来提供本地恢复测试甚至模拟实验能力。只要你受保护的资源全部部署在虚拟服务器上，基于镜像的备份就能够提供显著的灵活性。　　重大业务考量　　不管你选择使用哪种备份技术，都有一些与公司业务需求相关的重要因素需要考虑。一些因素在购买一个新的备份系统前就需要考虑，另外一些在新的备份系统安装完毕时，就需要立即考虑。　　保留需求。选择一个现代备份系统时你最先需要考虑的你的备份保留要求。换句话说，你在多长的时间之内会需要检索数据。　　这样的考虑很是重要，因为大多数现代备份方案都是基于磁盘或云服务，或者两者都是。以磁带为基础的备份能够提供近乎无限的保留跨度，因为你能备份到磁带上，而你想将磁带保留多久都可以，而基于磁盘的备份却并非如此。磁盘的容量是有限的，而容量会影响能够保留在备份中历史数据的总量。　　快照的回滚可能引起数据库崩溃，除非该快照产品经过特殊设计，能够与你服务器上运行的应用一起工作。　　即使磁盘的容量不是一个问题，一些现代备份应用也会有各种限制。比如，一些CDP产品区分短期保存（磁盘）和长期保存（磁带），并对前者存储介质上的恢复点数量有十分严格的限制。　　代理软件兼容性。如果你正在考虑的备份方案是基于代理的，那么就必须在购买之前把代理软件的兼容性当做一个首要考虑因素。尽管大部分备份软件提供商都会提供适用于大多数流行的操作系统的代理软件，你仍需要核实在你自己的环境下运行的操作系统中，该软件是否能正常使用。　　另一个有时会被忽视的因素是与未来系统的兼容性。比如说，Windows2012 R2服务器很快就会发布。一些备份厂商已经提供能够适于新操作系统的支持，但是其他的却没有。如果你计划在不久的将来迁移到Windows2012 R2，你就需要确保每个备选备份厂商都能够支持新的操作系统。　　业务识别性。在选择一个备份业务时，业务识别性是最重要的一个标准之一。如果你的备份不仅仅是文件数据，那么你的备份软件都必须支持你所运行的业务。　　对于CDP或基于镜像的备份产品，业务识别性的确认通常意味着验证某备份产品是否包含一个Microsoft卷影复制服务（VSS），服务器上你所备份业务的运行需要它。对于快照产品，你则需要找寻细粒度应用回滚功能。　　尽管大多数快照应用支持整个服务器的回滚，但可能会对数据库应用造成很严重的后果。因为在获取快照时，快照并不能捕捉储存在服务器内存中的处理状态。因此，快照回滚可能引发数据库崩溃，除非某快照产品对你服务器上的应用进行了定制化设计。　　初始备份。在你付费并部署了现代备份解决方案之后，关于你的首次备份，有些事情需要考虑一番。由于新的备份系统未曾对你的数据进行过备份，所以它需要对所有数据进行全量备份。初始备份可能会相当费时，这取决于你手边数据的数量。　　除此之外，服务器在初始备份阶段会处于脆弱状态。比如，我们假设初始备份需要用三天来完成，而一个服务器进入一个备份处理一天半后出现故障。你或许可以也可能不能依靠在那个点备份的数据来恢复服务器。　　对于这个问题一个吸引人的解决方案是除了新的备份软件，同时运行你以前的备份软件。然而，这也会引起问题。比如，如果两个产品同时操作一个文件，那么备份系统就会迷惑，不知道是否已经做了备份。同样的，数据库应用软件，比如Microsoft Exchange需要向数据库提交事务日志，运行两个独立的备份产品会导致日志文件缺失，进而影响恢复能力。　　更好的方法是逐步实现新的备份解决方案，而不是一开始就备份整个公司中的每一份资源。比如说，你可以从一次备份一个软件或一个虚拟机开始，可以仍然使用你的传统备份产品来备份其他所有的资源。这个方法最小化的减少在过渡时期丢失数据的数量，也大大减少了初始处理给你的网络和存储基础设施带来的负担。　　恢复测试。在任何一个公司中，这都是数据保护进程中非常重要的一部分。尤其是当你刚刚对备份方案进行升级和迁移时，恢复测试就更加重要了。　　一旦你开始了方案过渡，在最初的六个月内，你应该至少每周做一次恢复测评。在最初的几个月内，使用新的备份系统时，你可能会对备份配置做出一些修改，而这些修改有时会造成意想不到的结果。唯一一个可以确保你的数据仍然受到保护的方法就是定期进行恢复操作来测试恢复能力。　　备份基础设施现代化并不像一些备份厂商让你相信的那么简单。需要做很多工作来选择备份替代品以及确保正确使用这些产品，最终才能保护你的数据。但是一旦你度过最初部署阶段，并对操作进行了验证，你的数据保护将会更加灵活，其扩展性也将更好。