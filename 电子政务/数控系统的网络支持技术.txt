数控系统的网络支持技术
本文对数控系统的网络支持技术进行了概述。介绍了现场总线技术,对几种典型数控系统的网络接入能力进行了描述。结合两个数控系统网络化技术的应用实例,阐述了如何在自动化控制领域中充分运用控制系统的网络支持技术。最后,分析了数控系统网络化的发展趋势。1 网络化制造技术
数控系统的快速网络接入，全方位的组网，数字化的制造信息流在制造网络的全面渗透，已成为当今先进制造技术的一个重要发展方向，并且受到业界的高度重视。网络化制造通过企业内部网络(Intranet)，可将制造过程的各个子系统以及制造过程与企业中的设计、管理信息系统等子系统进行集成，或者通过外部计算机网络(Extranet)灵活地组织各种资源进行异地产品设计、异地远程操纵机器设备进行制造，从而快速地制造出高质量、低成本的新产品。网络化制造将在产品的快速响应研制技术方面，发挥重要的作用。网络化制造以数字化、柔性化、敏捷化为基本特征，这些特征是快速响应用户需求的前提，表现为结构上的分布性、组织上的快速动态可重构性、执行上的并行性以及时间上的快速响应。作为支持制造网络中的底层制造设备的系统／单元控制技术，是网络化制造的核心技术之一，它为实现网络制造的数字化、柔性化和敏捷化提供基本的技术支撑。研究和开发支持网络化制造的数字控制技术，对于增强我国制造工业快速响应和应变能力、缩短研制周期、保证制造工艺要求、保障产品质量，具有重要的意义。
对于一个完整的制造网络来说，按功能和作用，其网络形式可以分成信息层、控制层、设备层、传感／执行层等。
1．信息层：
文字、图象、声音、多媒体，Ethemet以太网为代表。面向对象是具有智慧的人。主要面向管理计算机，为管理服务，网的规模大，覆盖的地域广，数据交换量大，可扩充和互联。对实时性要求不太高。
服务内容如下：
· 远程编程与监控：在网络PC计算机上运行控制编程软件，可对接入到网络的控制装置进行编程和监控，实现远程监控和诊断。
·Socket服务：使用UDP或TCP／IP协议传送数据。
· FTP服务：在控制器的储存模块与PC计算机之间传送文件。
· E-mail邮件服务：当控制器发生故障时，由控制器向上位PC机发送电子邮件。
1．2控制层：
提供所需的PLC之间的报文通信和制造厂的可靠的数据链接。
1．3设备层：
开放的现场网络能给制造商的设备之间提供报文通信，以及远程I/O服务。具有高速实时特点。
1．4传感／执行层：
直接连接现场传感器、执行器，是最底层的控制系统。它由主站、从站、供电单元和网络部件组成。网络化制造的底层，实现对制造过程各种设备(包括加工设备、测试设备等)的控制、维护，并可以根据生产任务需要，快速实现柔性生产线的组线和任务调度，以适应产品多品种、变批量生产的快速转换：在网络化制造的上层，直接支持单个设备或生产线联网，构成网络化制造系统中的子系统，并可方便接入Intranet和Intemet，支持多领域专家联合、异地对系统安装、调试、改进，并实现制造过程和制造设备的异地控制和监测。
总之，现代的数控系统可以组成由底层到顶层、低级到高级的全方位制造网络，真正全面实现了制造信息的集成一体化。
2 现场总线技术
现场总线技术是当今自动化领域技术发展热点之一，被誉为自动化领域的计算机局域网，它的出现标志着自动化控制技术又一个新时代的开始。同时，也是当今数控系统追逐的一个技术标准，它的现场总线接入种类、速度、可靠性，直接表明了该系统的网络接入能力。现场总线是连接现场控制仪表与控制设备的数字化、串行、多站通信的网络。其关键标志是能支持双向、多节点、总线式的全数字通信。
现场总线技术近年来成为国际上自动化和仪器仪表发展的热点，它的出现是传统的控制系统结构产生了革命性的变化，是自动控制系统朝着智能化、数字化、信息化、网络化、分散化的方向迈进，形成新型的网络集成全分布式控制系统，现场总线控制系统FCS(Fieldbus Control System)。
2．1现场总线的特点
传统的控制系统很难实现设备之间以及系统与外界之间的信息交换，是封闭的。要满足自动控制系统更高的要求，实现企业的信息集成和综合自动化，形成工厂的底层网络，完成自动化设备之间的多点数字通信，实现底层现场设备之间以及生产现场与外界的信息交换，现场总线就是在这种实际要求的背景下产生的。现场总线控制系统是一种开放的通信网络，是一种全分布控制系统。它作为智能设备的联系纽带，把挂接在总线上、作为网络节点的智能设备连接为网络系统，并进一步构成自动系统，实现基本控制、补偿计算、参数修改、报警、显示、监控、优化及控管一体化的综合自动化功能。现场总线的特点是：
现场通信数字化
开放性和互操作性
集成远程控制、故障诊断、参数传递工业自动化仪表智能化
分布式数据库的采用
网络通讯向现场延伸
高的性价比
减少IO装置、电缆
免去数字与模拟转换
集成效果佳
2．2现场总线控制系统(FCS)与分散型控制系统(DCS)比较
表1 现场总线与分散型控制系统的比较
2．3几种典型现场总线比较
现在流行的现场总线种类繁多，在性能与造价比上各有千秋。下面就几种在工业控制领域中典型现场总线性能进行比较。
3 几种典型数控系统网络接入
随着计算机技术的飞速发展，出现了开放的数控系统，它采用PC机为工作平台。应用了通用的网络连接技术，非常便于数控系统的网络接入。它们不仅提供了信息层的以太网接口，同时还提供了各种现场总线的接口。一般情况下，典型数控系统在信息层上采用人机界面接口(HMI)的以太网络接入形式，在控制层采用了诸如ControINet的接入，在设备层则利用数控核心模块上的ProfiBus．DP来解决。开放式的数控系统为设备制造商提供了丰富的系统网络接入的硬件和软件接口。在硬件上，开发了各种针对不同层次的网络接口板；在软件上，则为网络接入提供了丰富的动态连接库或接口控件库。它们采用了不同的网络协议，如NUM系统采用UNI．TE协议，西门子则采用了TCP／IP协议。
针对数字化车间多台数控设备，通过数控系统的网络接入可以组成的一个数字化制造网络单元，它为数控设备维护操作人员提供一个强大的网络表2典型现场总线的性能对比
表2 典型现场总线的性能对比
化制造的支持工具，主要功能包括：
·设备状态的访问与监控诊断
·各类文件的传输
·远程设备操作
·异地远程网络连接
基于以太网(符合IEEE802．3)的制造网络环境，通过网络系统的应用软件可实现数控设备的灵活添加与删除，快速组网。应用系统为今后的升级与扩充保留一些接口，并发布服务器版与客户器版，在数字化制造网络中，只需安装有一个网络服务器(充当拨号WEB服务器)，可克隆多个客户工作站。通过采用统一的数据存储组织方式一分布式数据库，采用多线程网络编程技术，可以实现同时对几台设备的网络操作。采用NUMl000系列系统UNI-TE和西门子SINUMERK 840D的SINCOM控件库可以实现数控系统的网络接入。
3．1 NUM数控系统的网络接入
NUM1060数控系统提供了先进的网络接入功能。为了便于系统的网络接入，NUM1060提供了一块网络卡，采用EHTWAY网络协议，并且提供了UNI．TE请求动态连接库LIB_UNIT．DLL，DNC．DLL， Npara．DLL。PC 平台安装WINDOWS2000操作系统，采用RJ45网络线与数控系统相连，便构成了一个高效制造网络系统。该数控系统采用的网络协议如下：
ETHWAY网络协议模型如下：
ISO模型 OSI／MMS(MAP802．2) ETHWAY
图1 网络协议模型
UNI．TE采用请求／确认的问答对话式的点到点通讯，它们采用客户／服务器模式进行。
·客户机
该设备进行初始化通讯，它请求(READ读)，发送命令(WRITE写)或一个状态(运行，停止等)。
·服务器
该设备执行客户机发送的命令，执行后发送确认。
图2 客户／服务器模式
3．2 西门子数控系统的网络接入
SINCOM是SINUMERIK 840D数控系统提供的一个通讯软件，它采用标准的ETHERNET以太网卡接口和TCP／IP网络协议，把SIM7MERIK840D与主机连接起来。SINCOM给制造机床厂家提供一个预先定义的SINUMERjK通讯界面，控制系统中的基本数据可以跟主机进行交换。在主机端，用户自行开发的应用程序可以访问控制系统上的SINCOM软件。数据接口如下：
计算机通讯接口建立在应用DCE标准远程过程调用(RPC)和文件传输。
图3 远程过程调用
4 数控系统网络技术的应用
4．1西门子SINCOM网络OCX组件的应用
该应用系统充分挖掘西门子SINCOM组件所提供的功能，完成对数控机床状态的查询，各种数据文件的传输，信息对话，数控文件的管理，数控机床远程控制，PLC与NCK变量的查询与设置，工作日志文件生成，网络及系统参数的设置。
软件包含了功能菜单、工具条显示，状态条(菜单提示，时间提示)，各种对话框(设置／显示)。为了操作方便，设置右菜单键功能。
图4 远程过程调用
该软件将完成各种网络功能，具体功能描述如下：
1)机床状态数据查询
2)数据文件传输
3)文本信息对话
上了这些通用的控制系统，会使系统许多功能闲置，最终造成成本高，而且控制效果不理想、不可靠。这种设备有一个共同的特点：控制的轴多(大多为几百上千根)，但轴驱动功率小：不要求联动，但要求精确快速定位。制造这种设备所遇到的最大障碍之一就是需要专用的多轴微电机伺服控制器。“嵌入式SERCOS接口的多轴微电机智能伺服控制器”可以解决这个技术难题。它采用了数字信号处理DSP芯片，集成了开放式SERCOS现场总线协议接口，拥有八个独立通道的数字位置控制环路和相应的驱动单元，可以控制八个带位置环的微特电机。可以根据控制规模需要，将多个“多轴智能伺服控制器”通过光纤构成环路接入到基于PC的数字控制器，其光纤的最大最大速率16Mbit／s，单个环路的最多控制的轴数为254个。
图5 多轴智能伺服控制器
4)数控文件管理
5)机床远程控制
6)PLC与NCK变量查询
7)PLC与NCK变量设置
8)工作日志文件
9) 网络及系统参数设置。
4．2飞机制造中快速工装电气控制系统的设计
快速数控工装系统拥有众多的伺服运动轴，其规模少则百根，多则上千根。如果采用通用的数字控制系统，往往不能满足设备的控制要求。即便用如果数控工装控制系统不能与机床的数控系统进行数据通讯，数控工装系统上的支撑杆就不能进行有效的躲闪控制。数控工装系统不能再是一个孤立的封闭的控制系统，应以网络为桥梁，与机床数控系统进行有效的数据交换。基于国际上一些知名的数控系统(如西门子840D和NUMl000系列数控系统)都会提供实时高可靠网络接入手段和工具。这样，在高速机床进行蒙皮切削时，一旦刀具进入某一特定区域，数控工装系统的吸盘就可以进行及时有效的躲闪。
图6 工装系统的系统集成关系
5 结论
数控系统的网络化已经走向高速化、实时化、多元化、全球化、智能化。数控系统的网络化在数字制造中扮演一个很重要的角色。数控系统网络化已将触角伸向了制造网络的各个层次，如信息层、控制层、设备层、传感／执行器层。
传感器与执行器的本地数字化、网络化，以及各种现场总线应用，为数控系统的网络化注入了新的活力。
SERCOS、ProfiBus．DP、DeviceNet、AS．i等现场总线接口已成为许多开放式数控系统的可选配置。数控系统必将融入到全球数字化制造网之中，与其它控制系统取长补短，在网络化制造中发挥更大的作用。