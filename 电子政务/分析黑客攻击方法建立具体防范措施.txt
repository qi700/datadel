分析黑客攻击方法建立具体防范措施
妖界之箭
卡巴斯基买1年用3年瑞星2009绝杀木马保护账号    随着计算机网络的发展，网络的开放性、共享性、互连程度随之扩大。特别是Internet的普及，使得商业数字货币、互联网络银行等一些网络新业务的迅速兴起，网络安全问题显得越来越重要。目前造成网络不安全的主要因素是在协议、系统及数据库等的设计上存在缺陷。网络互连一般采用TCP/IP协议，它是一个工业标准的协议簇，但该协议簇在制订之初，对安全问题并没有考虑太多，协议中存在很多的安全漏洞。 对于操作系统，由于目前使用的计算机网络操作系统在本身结构设计和代码设计时偏重于考虑系统的使用方便性，导致了系统在远程访问、权限控制和口令管理及等许多方面存在安全漏洞。同样，数据库管理系统（DBMS）也存在权限管理、数据的安全性及远程访问等许多方面问题，在DBMS或应用程序中能够预先安置从事情报收集、受控激发破坏程序。
由上述可见，针对协议、系统及数据库等，无论是其本身的设计缺陷，还是由于人为因素造成的各种漏洞，都可能被一些另有图谋的黑客利用进行网络攻击，因此要保证网络信息的安全，必须熟知黑客网络攻击的一般过程，在此基础上才能制定防范策略，确保网络安全。
1、黑客进行网络攻击的一般过程
1.1 信息收集
信息收集并不对目标本身造成危害，只是为进一步入侵提供有用的信息。黑客可能会利用下列的公开协议或工具，收集驻留在网络系统中的各个主机系统的相关信息：     ·SNMP协议：用来查阅网络系统[url=http://www.hacker.cn/Get/lyjh/index.shtml]路由器[/url]的路由表，从而了解目标主机所在网络的拓扑结构及其内部细节。     ·TraceRoute程序：能够用该程序获得到达目标主机所要经过的网络数和[url=http://www.hacker.cn/Get/lyjh/index.shtml]路由器[/url]数。     ·Whois协议：该协议的服务信息能提供所有有关的DNS域和相关的管理参数。     ·DNS服务器：该服务器提供了系统中可以访问的主机IP地址表和它们所对应的主机名。     ·Ping实用程序：可以用来确定一个指定的主机的位置。
1.2 系统安全弱点的探测
在收集到攻击目标的一批网络信息之后，黑客会探测目标网络上的每台主机，以寻求该系统的安全漏洞或安全弱点，其主要使用下列方式进行探测：
·自编程序：对某些产品或者系统，已经发现了一些安全漏洞，但是用户并不一定及时使用对这些漏洞的“补丁”程序。因此入侵者可以自己编写程序，通过这些漏洞进入目标系统。     ·利用公开的工具：象Internet的电子安全扫描程序IIS、审计网络用的安全分析工具SATAN等这样的工具，可以对整个网络或子网进行扫描，寻找安全漏洞。
·慢速扫描：由于一般扫描侦测器的实现是通过监视某个时间段里一台特定主机发起的连接的数目来决定是否在被扫描，这样黑客可以通过使用扫描速度慢一些的扫描软件进行扫描。
·体系结构探测：黑客利用一些特定的数据包传送给目标主机，使其作出相应的响应。由于每种操作系统都有其独特的响应方式，将此独特的响应报与数据库中的已知响应进行匹配，经常能够确定出目标主机所运行的操作系统及其版本等信息。
1.3 建立模拟环境，进行模拟攻击
根据前两步所获得的信息，建立一个类似攻击对象的模拟环境，然后对模拟目标机进行一系列的攻击。在此期间，通过检查被攻击方的日志，观察检测工具对攻击的反应等，可以了解攻击过程中留下的“痕迹”及被攻击方的状态，以此来制定一个系统的、周密的攻击策略。     1.4 具体实施网络攻击
入侵者根据前几步所获得的信息，同时结合自身的水平及经验总结出相应的攻击方法，在进行模拟攻击的实践后，将等待时机，以备实施真正的网络攻击。
2、协议欺骗攻击及其防范措施
2.1 源IP地址欺骗攻击
许多应用程序认为如果数据包能够使其自身沿着路由到达目的地，而且应答包也可以回到源地，那么源IP地址一定是有效的，而这正是使源IP地址欺骗攻击成为可能的前提。 假设同一网段内有两台主机A、B，另一网段内有主机X。B 授予A某些特权。X 为获得与A相同的特权，所做欺骗攻击如下：首先，X冒充A，向主机 B发送一个带有随机序列号的SYN包。主机B响应，回送一个应答包给A，该应答号等于原序 列号加1。然而，此时主机A已被主机X利用拒绝服务攻击 “淹没”了，导致主机A服务失效。结果，主机A将B发来的包丢弃。为了完成三次握手，X还需要向B回送一个应答包，其应答号等于B向A发送数据 包的序列号加1。此时主机X 并不能检测到主机B的数据包（因为不在同一网段），只有利用TCP顺序号估算法来预测应答包的顺序号并将其发送给目标机B。如果猜测正确，B则认为收到的ACK是来自内部主机A。此时，X即获得了主机A在主机B上所享有的特权，并开始对这些服务实施攻击。
要防止源IP地址欺骗行为，可以采取以下措施来尽可能地保护系统免受这类攻击：     ·抛弃基于地址的信任策略： 阻止这类攻击的一种非常容易的办法就是放弃以地址为基础的验证。不允许r类远程调用命令的使用；删除.rhosts 文件；清空/etc/hosts.equiv 文件。这将迫使所有用户使用其它远程通信手段，如telnet、ssh、skey等等。
·使用加密方法： 在包发送到 网络上之前，我们可以对它进行加密。虽然加密过程要求适当改变目前的网络环境，但它将保证数据的完整性和真实性。
·进行包过滤：可以配置[url=http://www.hacker.cn/Get/lyjh/index.shtml]路由器[/url]使其能够拒绝网络外部与本网内具有相同IP地址的连接请求。而且，当包的IP地址不在本网内时，[url=http://www.hacker.cn/Get/lyjh/index.shtml]路由器[/url]不应该把本网主机的包发送出去。     有一点要注意，[url=http://www.hacker.cn/Get/lyjh/index.shtml]路由器[/url]虽然可以封锁试图到达内部网络的特定类型的包。但它们也是通过分析测试源地址来实现操作的。因此，它们仅能对声称是来自于内部网络的外来包进行过滤，若你的网络存在外部可信任主机，那么[url=http://www.hacker.cn/Get/lyjh/index.shtml]路由器[/url]将无法防止别人冒充这些主机进行IP欺骗。
2.2 源路由欺骗攻击
在通常情况下，信息包从起点到终点走过的路径是由位于此两点间的[url=http://www.hacker.cn/Get/lyjh/index.shtml]路由器[/url]决定的，数据包本身只知道去往何处，但不知道该如何去。源路由可使信息包的发送者将此数据包要经过的路径写在数据包里，使数据包循着一个对方不可预料的路径到达目的主机。下面仍以上述源IP欺骗中的例子给出这种攻击的形式：
主机A享有主机B的某些特权，主机X想冒充主机A从主机B（假设IP为aaa.bbb.ccc.ddd）获得某些服务。首先，攻击者修改距离X最近的[url=http://www.hacker.cn/Get/lyjh/index.shtml]路由器[/url]，使得到达此[url=http://www.hacker.cn/Get/lyjh/index.shtml]路由器[/url]且包含目的地址aaa.bbb.ccc.ddd的数据包以主机X所在的网络为目的地；然后，攻击者X利用IP欺骗向主机B发送源路由(指定最近的[url=http://www.hacker.cn/Get/lyjh/index.shtml]路由器[/url])数据包。当B回送数据包时，就传送到被更改过的[url=http://www.hacker.cn/Get/lyjh/index.shtml]路由器[/url]。这就使一个入侵者可以假冒一个主机的名义通过一个特殊的路径来获得某些被保护数据。     为了防范源路由欺骗攻击，一般采用下面两种措施：
·对付这种攻击最好的办法是配置好[url=http://www.hacker.cn/Get/lyjh/index.shtml]路由器[/url]，使它抛弃那些由外部网进来的却声称是内部主机的报文。     ·在[url=http://www.hacker.cn/Get/lyjh/index.shtml]路由器[/url]上关闭源路由。用命令no ip source-route。
3、拒绝服务攻击及预防措施
在拒绝服务攻击中，攻击者加载过多的服务将对方资源全部使用，使得没有多余资源供其他用户无法使用。SYN Flood攻击是典型的拒绝服务攻击。     SYN Flood常常是源IP地址欺骗攻击的前奏，又称半开式连接攻击，每当我们进行一次标准的TCP连接就会有一个三次握手的过程：
而SYN Flood在它的实现过程中只有前两个步骤，当服务方收到请求方的SYN并回送SYN-ACK确认报文后，请求方由于采用源地址欺骗等手段，致使服务方得不到ACK回应，这样，服务方会在一定时间内处于等待接收请求方ACK报文的状态，一台服务器可用的TCP连接是有限的，如果恶意攻击方快速连续的发送此类连接请求，则服务器的系统可用资源、网络可用带宽急剧下降，将无法向用户提供正常的网络服务。
为了防止拒绝服务攻击，我们可以采取以下预防措施：     ·对于信息淹没攻击，我们应关掉可能产生无限序列的服务来防止这种攻击。比如我们可以在服务器端拒绝所有的ICMP包，或者在该网段[url=http://www.hacker.cn/Get/lyjh/index.shtml]路由器[/url]上对ICMP包进行带宽限制，控制其在一定的范围内。
·要防止SYN数据段攻击，我们应对系统设定相应的内核参数，使得系统强制对超时的Syn请求连接数据包复位，同时通过缩短超时常数和加长等候队列使得系统能迅速处理无效的Syn请求数据包。
·建议在该网段的[url=http://www.hacker.cn/Get/lyjh/index.shtml]路由器[/url]上做些配置的调整，这些调整包括限制Syn半开数据包的流量和个数。
·建议在[url=http://www.hacker.cn/Get/lyjh/index.shtml]路由器[/url]的前端做必要的TCP拦截，使得只有完成TCP三次握手过程的数据包才可进入该网段，这样可以有效地保护本网段内的服务器不受此类攻击。
总之，要彻底杜绝拒绝服务攻击，只有追根溯源去找到正在进行攻击的机器和攻击者。要追踪攻击者不是一件容易的事情，一旦其停止了攻击行为，很难将其发现。唯一可行的方法就是在其进行攻击的时候，根据[url=http://www.hacker.cn/Get/lyjh/index.shtml]路由器[/url]的信息和攻击数据包的特征，采用逐级回溯的方法来查找其攻击源头。这时需要各级部门的协同配合才能很好的完成。