浅谈中小型企业数据备份与恢复
该文主要从对备份和恢复的正确认识、备份方案的选择、备份方式及备份系统的管理几方面对中小型企业数据的备份与恢复进行了初步的探讨与分析。    在企业信息化进程不断加快的今天，保持业务的连续性是企业用户进行数据存储时必须考虑的重要方面。灾难的出现可能导致生产停顿、客户满意度降低，减少企业的竞争力。如何安全、可靠、完整地保存数据，实现系统的灾难恢复是市场竞争的需要，更是进一步提高服务水平和改善服务质量、提升业务支撑能力的重要技术手段。     下面，结合本人长期从事企业信息化建设的实践，针对中小型企业数据备份与恢复谈一下自己的观点。 1 对备份和恢复的正确认识     1）备份工作的核心是恢复。数据备份的根本目的，是重新利用。一个无法恢复的备份，对任何系统来说都是毫无意义的。从企业应用的角度考虑，要认识到，备份系统的核心关键是使数据能够方便、安全而又高效的恢复。     2）备份是计划内的工作，而恢复则是计划外的工作。备份是按照既定的备份策略，每隔一定时间，按部就班地操作即可。而恢复，则是只有当发生数据丢失时，或者要查找历史数据时，才会进行的操作。通常情况下，实施恢复操作时，往往都是十万火急，越快越好，同时还希望恢复后的数据可用。由于备份对系统的影响比较大，所以备份的工作往往是在特定的时间内完成的，也即所谓的“备份窗口”，这时生产系统通常不工作。而恢复，因为是计划外的工作，对生产系统会产生影响。     3）备份是大批量的数据移动过程，往往需要将所有数据或所有增量数据全部拷贝到备份设备，而恢复往往是少量的数据移动过程，只需将需要恢复的数据从备份设备拷贝回主服务器。 2 备份方案的选择     对于中小型企业，企业的网络已具有一定的规模，企业的应用系统服务器达到10台左右，对外有防火墙和路由器等设备实现网络安全，此时企业的数据安全就显得越来越重要了，数据备份的投资力度相应的也会增大。企业的数据总量大概为几十到几百GB，要选择一种既能有效实现高性能数据保护，又能实现对复杂存储网络便捷化管理的数据存储方案。在实施备份项目前要对备份方案进行充分的论证。     一般来说，这种方案应当满足以下条件：     1）可以适应多种环境，支持多个平台，实现跨平台备份。可以适应企业多操作系统、多种数据库的应用环境。这时的备份软件要求具有主流数据库的广泛支持，如SQL Server 、Oracle、DB2、等，支持数据库、表空间和数据文件级的备份与恢复；支持企业内所有操作系统平台，如windows、unix、LINUX等。2）可以支持多种群集系统。3）具有扩展性的体系结构，要易于升级和扩展。包括磁带扩容、新客户端添加、新带库添加。企业的信息系统及系统数据不断地增多，新增的信息系统数据要易于纳入备份系统进行管理。4）系统恢复时无需重装操作系统。在服务器宕机时，能够快速恢复系统，缩短系统恢复时间。5）备份和介质管理简洁高效。备份软件应能对备份份系统中的备份设备、备份介质备份、恢复任务等进行统一集中管理，操作界面友好，备份软件应支持图形操作界面和命令行操作界面两种方式，且支持远程操作和监控。6）备份系统应能支持监控报警功能，对备份作业进行有效的监控，且具有多种报警提示，便于维护人员进行硬件的管理。7）恢复功能易于操作。备份系统应当在计算机系统故障或其它一些环境因素造成数据丢失后，可以快速有效地恢复数据，可以通过网络方式快速恢复想要的数据。（8）可定义备份用户及权限。可大大提高备份系统的稳定安全运行。9）能够实现备份硬件资源在各系统之间的共享和动态分配，实现多服务器多数据流的并行备份。     在资金充足、备份数据量较大的状况下，可以选用SAN架构的备份方案，SAN备份简化了数据的备份和恢复过程，是一种更快速，更具扩展性和更可靠的数据备份和恢复解决方案。采用SAN 解决方案，存储设备，服务器和局域网(LAN) 中的资源得以被更高效的利用。如图1所示。   图1     对双机及单机信息系统进行备份，通过SAN网络将数据备份至阵列及异地磁带库中。整个备份系统通过SAN网络，由单独的光纤通道实现备份数据的传输，避免占用企业局域网宽，影响业务系统正常运行。     在资金有限、备份数据量较少的状况下，可以采用LAN-BASED备份方式。如图2所示。   图2     在LAN-Based数据备份方式中数据的传输是以网络为基础。配置一台服务器作为备份服务器，由它负责整个系统的备份操作，磁带库链接到网络中，在数据备份时备份对象把数据通过网络传输到磁带库中实现备份。LAN-Based备份结构的优点是节省投资、磁带库共享、集中备份管理，它的缺点是对网络传输压力大。 3 备份方式的选择     信息数据根据系统情况和备份内容，可以采取以下备份方式：     1）全备份：对备份的内容进行整体备份。优点是直观，容易被人理解，恢复数据快。缺点一是备份数据量大，数据多时可能做一次全备份需要很长时间；二是如果每天都对系统进行完全备份，备份数据中就会有大量数据是重复的，例如操作系统与应用程序。这些重复的数据占用了大量的磁带空间，这对用户来说就意味着成本的增加。因此，对于业务繁忙，备份窗口时间有限的企业来说，选择这种备份策略是不明智的。     2）增量备份：仅备份相对于上一次备份后新增加和修改过的数据。优点是每次备份的数据量少，没有重复的备份数据，节省磁盘空间，又缩短了备份时间，缺点是恢复时需要全备份及多份增量备份，在这种备份下，各备份的关系就像链条一样，一环套一环，如果任何一个备份出了问题，都会导致恢复的失败。     3）差分备份：仅备份相对于上一次全备份之后新增加和修改过的数据。优点是备份所需时间短，并节省磁带空间，它的灾难恢复也很方便，系统管理员只需全备份及发生灾难前的差分备份就可以将系统完全恢复。对不同的信息系统可以结合以上三种备份方式，灵活运用。比如：数据量少时每次采用全备份方式，这样恢复时只需要一个备份数据就可以。数据量较大时，可以每周做一次全备份，每天差分备份，恢复时只需要全备份及最后一次差分备份即可。 4 系统的管理     1）配备专人进行备份系统管理，并制订相应的岗位职责或管理制度为了保证备份系统的正常运行，需配备专人进行管理，并制订相应的管理制度。管理人员要定期巡检备份系统的运行情况。巡检内容包括备份计划作业完成情况、作业报告及日志、存储介质硬件运行情况、存储空间使用情况等。     2）制订备份系统应急预案，并定期进行演练一旦发生重大故障事件，应启动应急预案，及时处理，最大限度保障数据的安全。定期在测试环境中进行备份数据恢复测试。恢复测试后要及时清理测试环境数据。     3）备份策略管理及备份任务变更备份策略由备份管理人员和系统管理人员共同协商，确定切实可行的计划策略和存储策略，随着服务器系统功能的变化或数据位置的变更及时改变备份策略及备份内容。确保重要数据的安全，并能得到及时有效的恢复。