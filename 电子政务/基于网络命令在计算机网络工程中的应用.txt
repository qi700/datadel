基于网络命令在计算机网络工程中的应用
引言
现代的社会是数字化、网络化、信息化的社会 。 网络化已成为社会发展的必然 。计算机网络工程是 一个系统的 、复杂的工程 , 在计算机网络工程设计的 方法上将得到体现 。计算机网络工程设计的一般方法为 ( 1 )需求分析 :提出整个设计目标、调查用户的需 求是网络规划的前提。 ( 2 ) 系统设计与设备的选择 : 当把一个网络系统的需求以及现有的情况搞清楚之后 ,系统分析员便可以开始进行网络结构设计 , 包括 网络结构化布线系统设计、网络结构设计、网络产品 选型、系统集成等 。 ( 3 )系统的安装与调试。 ( 4 )系统 的试运行与维护 :通过试运行来发现整个网络设计过 程中的缺点 ,以便及时调整。同时便于网络工程人员 对网络进行故障维护。 ( 5 ) 网络系统的验收 : 系统试 运行无误后 , 要请用户方进行网络工程验收 , 检查工 程是否符合设计要求和工程规范 ,用户验收后就可投 入使用。 ( 6 )网络评价 : 网络评价是对网络的性能及 工程施工水平做出的评价。同时 ,计算机网络安全是计算机网络技术的一个 重要领域 , 计算机网络网络安全具有明显的重要性 , 主要体现在现代社会信息的两个重要方面 : 信息的保 密性和信息的共享性。计算机网络的功能是实现信息的通讯和资源的共享 ,是计算机技术和通讯技术相 结合的产物 。
当然社会的发展和进步也要求人们得用 计算中心机网络进行资源共享和交流。基于计算机网络的这种资源共享和交流是社会发展的必然趋势 ,但同时意味着潜在的风险。尤其是 In te rne t全球最大的网 络 ,总有些另有用心的人攻击、破坏、窃取等活动。在全 球化信息的今天 ,重要的核心的数据高度集中在计算 机中 ,这就更加要求计算机网络的安全性。网络性能测试计算机网络系统是计算机网络安 全的一个重要的环节。传统方式是采用专业的网络测试仪进行测试 ,比如 JD SU  Te st - Um N T700 网络测 试仪、JD SU Te st - Um N T750网络测试仪套件等 ,但这也存在不足 , 专业网络公司有这些设备 , 但不是每个 企业都配这些设备 ,网络管理人员如何测试网络性能 维护本单位的计算机网络。而常用的操作系统 (如 W INDOW S 98、W INDOW S XP、W INDOW S 2000及 L inux 和 U n ix)中基本上都自带有 P IN G等命令 ,如果能充分利用 P IN G等命令功能这种软件资源也可以弥补没有 计算机网络专业测试仪器硬件资源的不足 ,实现计算机 网络的性能分析、故障排除实验等基本没办法。
1 　P in g命令
1. 1 　P in g命令基本概念 P IN G命令是用来发出 ICM P 响应请求信息包 。 ICM P是 In te rne t 控制消息协议 ( In te rne t Con tro l M e s2 sage P ro toco l) 。网络技术人员可以通过 P IN G命令来 发出响应 请示 给特定 的主 机 ( HO ST ) 或 者 路 由 器 ( ROU TE) ,从而实现网络的连通性测试、网络性能分 析、网络故障的诊断。 ICM P 控制信息有 : 目的地不可 到达信息 (D e stina tion ho st U n reachab le ) : 对应于网关 的路由表 ( Rou te  tab le ) ,如果在目的的域中指定的网 络不可达 ,网关发送源数据主机发送目的的不可达消息 ;数据报的超时 ( R eque st tim ed ou t) : 如果网关在处 理数据报时发现 TTL ( T IM E TO L IV E )域为 0 ,则此数 据报必须丢弃 ;数据报参数问题消息 ; 源站抑制消息 ; 重定向消息 ; 回送或者回送响应消息 ; 时间戳和时间 戳响应消息 ;信息请求或者信息响应消息 。
1. 2 　P in g命令参数功能详解 常用的操作系统中都自己身体带有 P IN G命令 , P IN G命令具有强大的功能 ,这与 P IN G命令有参数有关 , 可 以 在 通 过 运 行 CMD 进 入 DO S 状 态 , 执 行 P IN G / ? 来在线帮助找到该命令的参数格式 , 具体 P IN G命令格式如下 : P ing [ -  t ]  [ - a ]  [  - n coun t ]  [  -  l length ]  [  - f ]  [ -  i ttl ]  [  - v to s ]  [  -  r coun t ]  [  -  s coun t ]  [  -  j comp u te r -  list ]  | [  - k comp u te r -  list ]  [  - w  tim eou t ] de stina tion -  list 参数功能具体祥解如下 : - t Ping指定的计算机直到用 < C trl >  +  < C >中 断。 - a 将地址解析为计算机名 , vk 如 192. 168. 1. 1 N ET06。 - n coun t 发送 coun t 指定的 ECHO 数据包数 。 默认值 (D EFAUL T VALU E)为 4 ,功能类似 -  t参数。 -  l length 发送包含由 length 指定的数据量的 ECHO 数据包 。默认为 32 字节 (B YTES) ; 最大值是 65 , 527。 - f在数据包中发送“不要分段 ”标志。数据包就不会被路由上的网关分段。 -  i ttl 将“生存时间 ”字段设置为 ttl  ( T IM E TO L IV E)指定的值。 - v to s将“服务类型 ”字段设置为 to s指定的值 。 -  r coun t在“记录路由 ”字段中记录传出和返回数据包的路由。 coun t 可以指定最少 1 台 ,最多 9 台计算机 ,一定要注意有效的范围。 -  s coun t指定 coun t指定的跃点数的时间戳。 -  j comp u te r -  list 利用 comp u te r -  list 指定的计 算机列表路由数据包。连续计算机可以被中间网关分隔 (路由稀疏源 ) IP 允许的最大数量为 9。 - k comp u te r -  list 利用 comp u te r -  list 指定的计 算机列表路由数据包。连续计算机不能被中间网关分隔 (路由严格源 ) IP 允许的最大数量为 9。 - w tim eou t指定超时间隔 ,单位为毫秒 。 de stina tion -  list指定要 P ing的远程计算机 。
1. 3 　P in g命令应用功能分析   74在网络工程中 ,我们可以充分利用 P IN G命令强 大功能来代替专业的网络测试仪的功能 , 比如 JD SU Te st - Um N T700 网络测试仪、JD SU  Te st - Um N T750 网络测试仪套件 ,具体分析如下 : 测试网络适配器 (网卡 )是否正常。网络不通 ,本 机网络适配器 (网卡 ) 要确保正常。 P IN G 本机的 IP 地址 :运行 CMD 进入 DO S状态 ,在该状态下用 IPCon2 fig或者 AR P 命令查看本机 IP, 然后 P ing 该 IP, 如 P IN G 192168. 1. 1 ,通则表明网络适配器 (网卡或 MO 2 D EM )工作正常 ,不通则是网络适配器出现故障 ,要更 换网络适配器。
测试 TCP / IP协议 。P ing 127. 0. 0. 1:该 IP地址是本地循环地址 ,如果本地址无法 P ing通 ,则表明本地 机 TCP / IP协议不能正常工作。测试线路故障 。P ing同网段计算机的 IP: P ing一台同网段计算机的 IP,如 P IN G 192168. 1. N ,不通则表 明网络线路出现故障 ; 若网络中还包含有路由器 , 则 应先 P ing路由器在本网段端口的 IP,不通则此段线路有问题 ; 通则再 P IN G路由器在目标计算机所在网段 的端口 IP,不通则是路由出现故障 ;通则再 P IN G目的 机 IP地址。测试 DN S服务和 W IN S。 P IN G网址 :若要检测一 个带 DN S服务的网络 , 在上一步 P ing通了目标计算机的 IP地址后 ,仍无法连接到该机 ,如 P IN G 192168. 1. 7 , 则可 P IN G 该机的网络名 , 比如 P ing www.  do2 m a in. com. cn,正常情况下会出现该网址所指向的 IP, 这表明本机的 DN S设置正确而且 DN S服务器工作正 常 ,反之就可能是其中之一出现了故障 ; 同样也可通过 P ing计算机名检测 W IN S解析的故障 (W IN S是将 计算机名解析到 IP地址的服务 ) 。
2 　其它命令
2. 1 　Tra cer t命令 Trace rt (跟踪路由 )是路由跟踪实用程序 ,用于确 定 IP 数据报访问目标所采取的路径。 Trace rt 命令用 IP 生存时间 ( TTL ) 字段和 ICM P 错误消息来确定从一个主机到网络上其他主机的路由 。通过向目标发 送不同 IP 生存时间 ( TTL ) 值的“In te rne t控制消息协议 ( ICM P) ”回应数据包 , Trace rt诊断程序确定到目标 所采取的路由。要求路径上的每个路由器在转发数 据包之前至少将数据包上的 TTL 递减 1。数据包上的 TTL 减为 0 时 ,路由器应该将“ICM P 已超时 ”的消息发回源系统。 Trace rt 先发送 TTL 为 1 的回应数据包 ,并在随后的每次发送过程将 TTL 递增 1 , 直到目标响应或 TTL 达到最大值 ,从而确定路由。通过检查中间路由器发回的“ ICM P 已超时 ”的消息确定路由 。某些路由器不经询问直接丢弃 TTL 过期的数据包 ,这 在 Trace rt实用程序中看不到。 Trace rt 命令按顺序打 印出返回“ICM P 已超时 ”消息的路径中的近端路由器接口列表 。具体参数格式如下 : Trace rt [ - d ]  [ - h m axim um - hop s ]  [ -  j ho st - list ]  [ - w tim eou t ]  ta rge t - nam e - d 不使用 IP 地址解析到主机名称 ; - h m axim um -  hop s 指定跃点数以跟踪到 ta rge t - nam e 的主机的路由 ; -  j ho st -  list 指定 Trace rt 实用程序数据包所采 用路径中的路由器接口列表 ( Rou te in te rface list) ; - w timeout等待 timeout,每次回复所指定的时间值; ta rge t - nam e 目标主机的名称或 IP 地址。
2. 2 　Ne tsta t命令 N e tsta t命令的功能是显示网络连接、路由表和网络接口信息 ,可以让用户得知目前都有哪些网络连接正在运作 。[ 4 ]具体参数格式如下 : N e tsta t [ - a ]  [ -  c ]  [  -  i ]  [ -  n ]  [  -  r ]  [  -  t ] [ - u ]  [ - v ]  ta rge t - nam e - a 显示所有的 socke t (包括正在监听的 ) ; - c 每隔 1秒就重新显示一遍 ,直到用户中断它 ( < C trl > + < C > ) ; -  i显示所有网络接口 ( N e two rk  In te rface ) 的信 息 ,功能上同“ip config  - e”; - n显示出网络连接情形 ; -  r显示核心路由表 ( Co re rou te tab le) ; -  t显示 TCP协议的连接状况 ; - u 显示 UD P协议的连接状况 ; - v显示正在进行的工作 。
2. 3 　A rp命令 A rp 是一个重要的 TCP / IP协议 ,并且用于确定对 应 IP地址的网卡物理地址。实用 A rp 命令 ,你能够查 看本地计算机或另一台计算机的 AR P 高速缓存中的当前内容 。此外 , 使用 A rp 命令 , 也可以用人工方式输入静态的网卡物理 / IP 地址对 , 你可能会使用这种 方式为缺省网关和本地服务器等常用主机进行这项作 ,有助于减少网络上的信息量。具体参数格式如下 : A rp [ a ]  [ - g ]  [ -  s ]  [ - d ]  [ ta rge t - nam e ] A rp  - a或 A rp  - g———用于查看高速缓存中的所 有项目。 - a和 - g参数的结果是一样的 ,多年来 - g 一直是 UN IX平台上用来显示 AR P 高速缓存中所有 项目的选项 ,而 W indow s用的是 A rp   - a ( - a 可被视为 a ll,即全部的意思 ) ,但它也可以接受比较传统的 - g选项。A rp  - a  IP———如果你有多个网卡 ,那么使用A rp  - a加上接口的 IP 地址 ,就可以只显示与该接口 相关的 AR P缓存项目。 A rp  -  s IP物理地址 ———你可以向 AR P高速缓存 中人工输入一个静态项目。该项目在计算机引导过 程中将保持有效状态 , 或者在出现错误时 , 人工配置 的物理地址将自动更新该项目 。 A rp  - d  IP———使用本命令能够人工删除一个静态项目 。
2. 4 　SO C KE编程开发网络命令软件 我们也可以采用 Socke t编程技术 ,但是对于计算 机网络管理人员计算机的水平要求较高 。 Socke t是一 种计算机网络应用层与 TCP / IP 协议族通信的中间软 件抽象层 ,它是一组接口 ( In te rface ) 。在设计模式中把复杂的 TCP / IP 协议族隐藏在 Socke t接口后面 ,让 Socke t去组织数据是符合指定的协议 。服务器端先初始化 Socke t,然后与端口绑定 ( b ind) ,对端口进行监听 ( listen) ,调用 accep t阻塞 ,等待客户端连接。客户端 初始化一个 Socke t, 然后连接服务器 ( connec t) , 如果 连接成功 ,这时客户端与服务器端的连接就建立了 。客户端发送数据请求 , 服务器端接收请求并处理请 求 ,然后把回应数据发送给客户端 ,客户端读取数据 , 最后关闭连接 ,一次交互结束。如 send ( )中利用的 SOCKET基本实现方法 : send to ( sock, &p k t, sizeof ( p k t) , 0 , &sa, sizeof ( sa) )
3 　结束语     计算机网络系统是一个复杂的系统工程 ,计算机 网络工程技术人员要在实践中要积极的思考、研究 , 要与时俱进 , 充分利用计算机操作系统自身具有的 P IN G等命令的强大功能来弥补硬件资源的不足 ,解决 实际的计算机网络问题。
参考文献 :   [ 1 ] 　张学军. 计算机网络技术 (基础篇 第三版 ) [M ]. 大连 :大连理工 大学出版社 , 2008. 1. [ 2 ] 　吴国新 ,吉 　逸.  计算机网络 (第 2 版 ) [M ]. 北京 :高等教育出版社 , 2008. 4. [ 3 ] 　谢希仁.  计算机网络 (第 5 版 ) [ M ]. 北京 : 电子工业出版社 , 2008. 1.[ 4 ] 　蔡学军 ,梁广民 ,王隆杰 ,张立娟.  网络互联技术 [ M ]. 北京 : 高等 教育出版社 , 2004. 7. [ 5 ] 　袁津生 ,郭敏哲. 计算机网络与安全实用编程 [ M ]. 北京 : 人民邮电出版社 , 2004. 7.