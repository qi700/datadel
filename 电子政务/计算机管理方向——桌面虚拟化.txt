计算机管理方向——桌面虚拟化
目前桌面计算模式中，用户需要考虑很多不必要的细节，例如软硬件的配置，管理，维护和升级等。实际上用户只希望简单地访问数据并完成他们的任务而不需要考虑各种软硬件细节，这正是普通桌面模式所面临的挑战。而发展虚拟桌面是应对这种挑战的趋势，该文对虚拟桌面技术进行了简要介绍并提供了虚拟桌面部署实施的实际方案。    现在很多企事业单位以及学校仍在沿用数十年前的桌面管理策略——即独立计算机桌面管理策略，但在实际的工作和使用中这种传统方式如今已无法有效地服务IT 或终端用户。采用传统桌面管理策略，计算机管理部门必须利用硬编码方式逐一为每个用户配置个人桌面。随着现代科技的发展，如今网络的信息传输速度几乎达到了光速，然而，就算是进行最基础的维护工作，计算机管理部门人员也必须亲临现场，对用户计算机进行逐一检查进而进行修复。这种传统桌面管理策略导致各个独立计算机只能依靠其专用设备进行访问，同时单位还要花费高额成本并配置大量管理人员来确保设备的正常运行。    由此看来，也难怪大家都希望找到一种更好的桌面管理解决方案。    从根本上看，桌面虚拟化技术和解决方案可搭建更高效的桌面基础架构。目前，许多领先部门已经开始采用桌面虚拟化技术，将计算机从过时的桌面模式中解脱出来，从而改善管理使用服务，降低TCO，提高灵活性，简化技术支持，实现创新。1 传统桌面分析    传统解决方案：从用户和IT 的角度看，速度慢、成本高、效率低，程序复杂。    （1）更改成本过高。应用全都采用硬编码方式载入操作系统，因此，不仅应用供应、更新和管理的成本很高，而且也相当耗时。任何一种升级如发布新操作系统或应用，速度都极为缓慢，且价格不菲。    （2）用户缺乏灵活性。尽管用户越来越多地希望随时随地都能实现高工作效率，但实际工作中用户却只能通过单一的专用设备访问其个性化桌面，包括应用、数据、系统配置、模板、宏指令以及其它自定义参数，这就大大限制了用户的机动性。    （3）数据易出现安全风险。由于用户数据都保存在本地计算机，因此，远程办公人员通常只能利用移动存储、电子邮件和其它临时方法将数据从一台设备拷贝到另一台设备，从而给数据带来了很大的安全风险。USB 密钥和笔记本电脑容易丢失和被盗，即使是从未离开办公室的计算机也容易被网络中的代码所覆盖。    （4）技术支持复杂，且成本高。传统的三层Help Desk 模式（每层均满负荷运作）不仅成本高，而且相当耗费资源，从而使支持成本大大增加。对管理部门来说，从库存到供应再到退役的终端设备管理也是一个沉重的负担，同时，每个地方都需要具备专业技能的人员进行部署和维护，而不断重复的过程却浪费了许多宝贵的时间和资源。    （5）资产利用率低，大大浪费了资源。一般情况下每3—4 年就需要更换终端设备，这就会花去大量的资金。2 桌面虚拟化——"桌面的未来"    桌面虚拟化作为全新桌面架构的基础，可帮助管理部门削减大量成本，摆脱传统桌面管理的局限性，采用集中化管理方式，这就意味着：    （1）用户随时随地使用各种设备都能获得相同的个性化环境，包括上网本、个人电脑、租用电脑、从朋友处借来的电脑。由于脱离了个人设备的限制，用户的工作效率得到了大幅提升，大大提高了工作的灵活性。如果某台设备出现故障，他们可立即无缝切换到另一台，继续处理未完成的工作。    （2）即使计算机丢失或被盗也不会给数据带来任何安全风险，因为所有数据都集中存储在数据中心。由于大多数虚拟设备都处在运行中和等待访问中，大多数用户会发现进行登录比启动传统系统要快得多（登录只需15 秒，而启动需要1--3 分钟），因此大大改善了整体用户体验。    （3）应用维护变得更加简单、高效，使计算机管理人员避免了一对一的终端设备管理，从而能以更低的成本更快地部署新技术，同时还不会限制终端用户管理自有环境的能力。计采用应用虚拟化技术，管理人员不仅可控制数据访问，减少所需管理的桌面镜像数量，还能消除系统冲突，减少应用回归测试。    （4）增加、更新和删除应用也变得非常方便，因为用户现可访问集中化的自助应用商店，从而可随时随地及时访问应用。由于桌面虚拟化将许多传统任务都转移到数据中心进行处理，因此，部门无需定期更新终端设备，只要这些设备能接收各地信息即可，而且设备所需的本地支持也极为有限。3 主流虚拟桌面解决方案    当前虚拟桌面解决方案主要分为两大类：VDI（Virtual Desktop Infrastructure）和SBC（Server-Based Computing）。基于VDI的虚拟桌面解决方案，其原理是在服务器侧为每个用户准备其专用的虚拟机并在其中部署用户所需的操作系统和各种应用，然后通过桌面显示协议将完整的虚拟机桌面交付给远程的用户使用。基于SBC的虚拟桌面解决方案，其原理是将应用软件统一安装在远程服务器上，用户通过和服务器建立的会话对服务器桌面及相关应用进行访问和操作，而不同用户之间的会话是彼此隔离的。基于VDI和基于SBC的虚拟桌面解决方案的比较如表1所示。表1 基于VDI 和基于SBC 的虚拟桌面解决方案比较4 虚拟桌面关键技术分析    虚拟化解决方案、桌面显示协议、用户个性化配置是虚拟桌面关键技术。本文以业界具有较大影响力的VMware、Citrix、RedHat、Microsoft等厂商的虚拟桌面产品为例，分析它们在关键技术实现上的特点。    （1）虚拟化解决方案    如前面分析，基于VDI的虚拟桌面解决方案需要为用户提供专属的虚拟机，并主要提供闭源Windows操作系统的桌面。因此，当前的支撑VDI虚拟桌面的虚拟机普遍基于完全虚拟化技术，例如VMware的ESX虚拟机、Microsoft的Hyper-V虚拟机、Red Hat的集成在Linux内核之中的KVM虚拟机以及Citrix采用的完全虚拟化的Xen虚拟机等。总体而言，不同的服务器虚拟化产品在技术本质上正逐渐趋于一致，因此单台虚拟机的性能差异并不明显。对于虚拟桌面而言，主要体现在虚拟桌面的供给和部署方式以及由此产生的相关差异上，这将成为虚拟化解决方案选择的关键。    基于SBC的虚拟桌面解决方案直接利用了服务器版Windows（例如Windows Server 2003/2008）的多用户环境，使各用户能够同时在同一服务器上获得属于自己的应用。因为服务器版Windows已经能够较好地提供相关服务，所以这类解决方案的门槛较低。    （2）桌面显示协议    桌面显示协议是影响虚拟桌面用户体验的关键，当前主流的显示协议包括PCoIP 、RDP、SPICE、ICA等，并被不同的厂商所支持，它们的比较如表2所示。    表2 主流虚拟桌面显示协议比较    桌面显示协议是各厂商产品竞争的焦点，其中，RDP和ICA拥有较长的研发历史，PCoIP和SPICE相对较新但也日渐成熟，特别是SPICE作为一个开源协议，在社区的推动下其发展尤其迅速。    （3）用户个性化配置    个性化配置是虚拟桌面用户的必然需求。当前的主流产品普遍采用了Microsoft的AD（Active Directory）域控机制进行用户的管理和认证，并将用户身份与包含其个人桌面设置需求的描述文件相关联。当用户访问虚拟桌面时，在对其身份进行认证后，即可为其交付具有不同安全级别、不同应用权限的个性化虚拟桌面。    在基于SBC的虚拟桌面解决方案中，因为服务器版Windows已经能够做到以应用的粒度设置用户权限，所以其用户描述文件比较简单。而在基于VDI的虚拟桌面解决方案中，因为每个用户在虚拟机配置、操作系统映像、用户应用部署等多个层次上都具有不同的需求，所以用户描述文件非常复杂而且相关的文件规模也比较庞大（例如用户专属的操作系统映像文件）。当前，各个厂商正在针对如何减少用户数据量进行产品改进，例如VMware的linked clone技术能够基于一个主镜像定制出多个虚拟桌面从而减少存储空间。5 总结    桌面虚拟化所具有的优势无论对于计算机的使用还是维护来说，都带来了的全新革命。它的移动计算、安全性、方便管理和降低成本在网络中都得到了充分的验证，并且可以针对不同需求的网络有着不同的侧重。    利用虚拟化技术可以大大的简化管理传统IT系统的复杂性，同时桌面虚拟化的应用场景又是多方面和多层次的。针对现代IT系统所要求的多任务型、知识型、特殊需求和移动性等多种场景，桌面虚拟化的应用将让整个系统达到更高的安全性、可管理性、更低的总体拥有成本和更好的用户体验。    因此，我们可以预见，随着硬件成本的不断降低以及人们对虚拟化技术的需要的不断提升，传统电脑渐渐会被桌面虚拟化终端所取代，而桌面虚拟化技术也将会有更美好的前景。