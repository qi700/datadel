探讨利用虚拟化技术建设数据中心的思路
本文以数据中心建设最佳实践为出发点，探讨了利用虚拟化技术建设数据中心的思路，实现实施虚拟化所带来的价值的最大化。1 引言    虚拟化(virtualization)是指计算系统在虚拟的基础上而不是真实的基础上运行，是采用软硬件分区、聚合、部分或完全模拟、分时复用等方法来管理计算资源、构造一个或多个计算环境的技术。虚拟化技术既能够屏蔽底层复杂多样的物理环境，又能够为用户提供可配置的使用环境，是一个为了简化管理，优化资源分配使用的解决方案。从而成为工业界和学术界的研究热点，特别是在2006年，由google提出以网格计算(Grid Computing)、分布式计算(Distributed Computing)、并行计算(Parallel Computing)、效用计算(Utility Computing)网络存储(Network Storage Technologies)、虚拟化(Virtualization)、负载均衡(Load Balance)等传统计算机技术和网络技术发展融合的云计算概念，迅速以其安全、便利、 数据共享等特点立即受到了业内人士的关注。虚拟化作为其基础技术也得到快速的发展，在虚拟化技术的应用产品不断丰富，为我们实施虚拟化提供了前提条件。但我们也必须承认，虚拟化技术体系架构区别于传统信息系统的体系架构，它具有物理服务器资源高度整合，资源共享，系统灵活等诸多方面的好处，同时也给我们的系统建设，安全防护以及运维管理带来了挑战，本文主要探讨如何利用虚拟化技术搭建数据中心的思路，使企业能更好的享受虚拟化技术所带来的便利性，减少新技术可能带来的风险。2 利用虚拟化技术搭建数据中心的总体思路    业界针对IT基础架构整合优化的最佳实践包括几个部分:整合、虚拟化、自动部署，通过系统虚拟化，消除资源物理边界，提升资源利用率。    2.1 系统整合    在进行数据中心建设的实施过程中，遵循“物理集中、系统整合、优化管理”的实施路线。在系统整合阶段，主要考虑服务器整合、存储整合、整合效率评估评估等几个方面的工作，通过整合使得系统基础平台集中化，并进一步实施统一集中的系统运维管理平台，系统集中监控平台等有效的降低基础架构的复杂度，并通过统一的管理平台等手段，降低对数据中心维护人力资源的需求，提升业务弹性，降低运行成本。    对于现有数据中心的整合，则考虑的问题更多是信息系统集中方案，系统迁移方面的问题，同时，要考虑建设所需要的各类物理设备，包括主机，扩展柜，存储，光纤交换机以及KVM等设备的用电量需求，将其合理的分布到不同的机柜中，还需要充分考虑对于业务影响最小，系统以及数据迁移的最佳方案，以确保业务的正常运行。    2.2 虚拟化关键技术的选择    针对X86平台和UNIX操作系统平台，不同的IT厂商提供了相应的解决方案，UNIX主机厂商包括IBM，ORACLE SUN和HP 等，都针对各自的UNIX平台主机提出了相应的解决方案，以IBM 的虚拟化技术PowerVM为出发点，分析在UNIX平台下主机虚拟化的关键技术如下:    (1)动态逻辑分区技术:将一个物理服务器划分成多个逻辑分区，每个逻辑分区之间是相互隔离的，并且每个分区运行独立的操作系统，一台物理服务器上支持多种操作系统。    (2)微分区技术:是对动态逻辑分区技术的增强，支持将一个物理的CPU分成多份，如将一颗物理CPU划分为10份。    (3)虚拟I/O服务器(即VIOS):通过统一管理物理的共享磁盘适配器、共享网络适配器等，给VIOS下联的Client分区提供共享的以太网络供分区与外部的通讯，同时，多个分区可以使用相同和不同的物理硬盘，更少的用各类适配器和线缆，减少物理开销并节省配置时间。    (4)动态分区迁移技术:针对所有I/O都通过VIOS分配的分区，可以将整个逻辑分区在运行时从一个系统迁移至另一个系统，迁移包括了操作系统在内的整个分区。    (5)虚拟机管理平台:该平台对虚拟机的基本操作，系统状态进行监控同时 可以对映像进行生命周期的管理。    目前基于X86平台虚拟化解决方案主要来自微软和VMware两家软件厂商。以VMware的虚拟化解决方案为例，分析基于X86平台的虚拟化解决方案，主要有以下几方面:    (1)物理服务器资源的虚拟化:这是配置在物理服务其上运行的虚拟化层，它将处理器、内存、存储和资源虚拟化为多个虚拟机。    (2)虚拟化管理:可以集中配置，管理多个虚拟化节点，提供基本的数据中心服务，比如访问控制，性能监控以及报警等功能。    (3)虚拟机迁移技术:可以将在线运行的虚拟机从以太无力服务器迁移到另一台物理服务器，在迁移的同时保持零停机时间，连续的服务可用性以及事物处理的完整性。    综上所述，无论是在UNIX平台还是在X86平台的虚拟化方面，目前有相对成熟的解决方案，能满足不同的虚拟需求，但同时要考虑的是，在打破物理边界后，系统共享使用，系统之间的资源争用问题需要仔细考虑。可以从以下几个方面考虑对于虚拟化技术的选型:    (1)业务系统的操作系统平台需求，不同的操作系统平台的需求直接影响到虚拟化技术的选型。    (2)业务系统的重要程度选择虚拟化技术:企业有支持业务运行，办公管理，运维支持等多方面的信息系统，比如，事先根据系统的重要性划分等级，系统的重要性包括系统业务对于企业的影响级别，系统运行的稳定性，系统业务连续性要求，以及系统数据重要程度等多个方面定义系统的级别;再根据系统运行的经验，IT运行相关标准和规范，行业内最佳实践等方面，适当选择相应的虚拟化技术，比如，重要性最高的系统，其数据的敏感性，系统边界要起非常清晰的系统，可以考虑独占整个物理设备，重要级别低的可以适当的选用资源独享的分区或者共享资源的分区等等。同时适当的选择相应的系统保护反感，如虚拟机的动态迁移技术，HA技术等等。    (3)根据企业的实施经验对新技术进行尝试性使用。从安全的角度出发，在使用虚拟化等新技术时，可以考虑在系统安全级别较低的系统或者测试中心，灾备环境上实施，并通过实施进一步制定相应的规章制度和标准，进而逐步将虚拟化技术推广到其他信息系统。 2.3 利用虚拟化技术建设数据中心方案设计    在选定了相应的虚拟化技术后，需要根据实际需求对数据中心建设方案进行总体设计，包括:    (1)针对不同平台主机资源的划分。根据系统对于主机资源的需求，合理划分，针对一级(重要)信息系统，对资源的使用采用独占式的，以确保系统正常运行的资源需求，避免出现资源争用以及资源争用可能带来的业务连续性的问题。同时针对此类信息系统还可以采用HA等技术与虚拟化技术同时使用，以确保系统的可用性。可以将重要信息系统与一般信息系统部署在同一物理平台，实现资源灵活调度。    (2)SAN实施方案规划。 主机资源需要通过SAN交换机连接到存储，通过对SAN交换机端口合理的划分，能实现数据线路的冗余，提高可用性。    (3)确定数据中心的物理拓扑图，逻辑拓扑，机柜资源的分配方案，电源分配方案以及单台主机适配器资源的划分效果图等等，确保实施方案的完整性。    (4)确定虚拟化资源的监控管理方案。    (5)确定实施步骤，测试方案，系统迁移方案。3 后记    虚拟化技术能给我们数据中心的建设带来相应的好处，如通过资源的共享提高系统灵活度，降低数据中心建设和采购以及系统运维成本，同时可用简化管理。但是在实施前关于技术方案的选择，系统的规划等等多方面也奠定了数据中心实施是否成功的基础。因此，在建设初期对数据中心进行详细的规划，确定实施路线图，有助于企业在虚拟化实施方面取得成功。