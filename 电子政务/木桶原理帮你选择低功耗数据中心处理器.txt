木桶原理帮你选择低功耗数据中心处理器
随着移动互联和商业智能的加速发展，传统数据中心已经从业务支撑，逐渐转换为生产工具。无论是利用云计算改变资源的应用模式，还是通过大数据技术挖掘分析越来越庞大的海量数据。从互联网巨头，到商业大鳄，都在开始将自身的数据中心建设的更加智能，增加企业核心竞争力。　　随着移动互联和商业智能的加速发展，传统数据中心已经从业务支撑，逐渐转换为生产工具。无论是利用云计算改变资源的应用模式，还是通过大数据技术挖掘分析越来越庞大的海量数据。从互联网巨头，到商业大鳄，都在开始将自身的数据中心建设的更加智能，增加企业核心竞争力。　　另一方面，不断增加的数据和业务，使得数据中心规模越来越庞大。这也迫使企业CIO开始采用更低功耗，高能效的计算设备。然而传统服务器的高性能，低功耗主要希望还寄托在CPU的更迭上——英特尔用先进的制程工艺和架构一边提升服务器性能，一边降低着功耗。　　从应用的角度来看，这种趋势就好理解了。从移动互联后端平台所需要的海量网页内容，APP支持，到轻量级的动态数据，CDN等应用的增多，各类网页游戏，社交平台所带来的业务压力，带动了诸如微型服务器，冷数据存储、新型网络设备等解决方案的出现。这类解决方案在应对轻量级应用的同时，相比传统服务器也降低了机房能耗、空间和总体拥有成本。　　应用领域虽小，需求五脏俱全　　微型服务器的核心价值就是在最少的机房空间内，实现尽可能高的计算密度，并且尽量将功耗控制在最低。这也就对服务器提出了三个挑战：体积要小，功耗要小，计算性能要高。但是高密度的叠放，为了控制散热就必须采用低功耗处理器，而低功耗处理器往往意味着性能不及普通处理器——这也就是为什么微型服务器只能胜任“轻量级”应用的原因。　　对于Facebook来说，轻量级应用就是无数个Web页面的支撑，还有跑在无数虚拟机上的网页应用（游戏、App等）。采用微型服务器不但极大的降低了总体拥有成本，提升了机房利用率，还降低了运维成本——尤其是功耗带来的庞大电费开支。　　与之类似，“冷存储”这种存储设备也是基于海量数据的需求孕育而生的。在Facebook每天生成的数十亿张图片和更多文字中，人们往往搜索和调用查看的内容非常有限。随着时间的过去，就会有大量数据“沉淀”下来，这些数据按照以往的做法，仍然存储在数据中心庞大的盘阵中间，这带来了持续的运维成本消耗。　　然而降低成本的方法——将不常访问的数据移入磁带机，却会导致随机数据访问时的性能严重下降。“冷存储”则是用软件算法，让不常用的数据在数据中心里从高性能的盘阵中移动到功耗更低的存储设备中（如采用凌动平台的存储设备），从而节约成本。并且可以在数据需要被访问时，快速将数据推送到高性能盘阵中去。　　从这些趋势可以看出，企业数据中心的“精打细算”不会忽略任何一个“动作”，往往会追求极致。这种追求体现在微型服务器、冷存储上，就是对不同处理器平台，甚至是存储介质的拷问。　　木桶原理论平台选择　　微型服务器诞生之初，就有言论大呼x86末日来临，服务器领域必将被更低功耗的ARM架构所统治。从传统服务器处理器高性能、高功耗、较低利用率的角度来看，ARM的低功耗和低成本确实有机可乘，然而这样比较却有失公允（英特尔也有低功耗的x86平台：凌动处理器）。　　如今，云计算技术极大提升了数据中心CPU利用率，虚拟机已然灵活的切分了高功耗服务器成为不同的“微型”服务器。抛开这些不谈，我们只需追问一下企业数据中心的需求到底是什么？　　首先是稳定：任何企业都要保证IT系统稳定以支撑自身业务。高效也必不可少：能耗尽可能低，但是性能要尽可能高。之后是灵活性：虚拟化支持不可少，即便是微型服务器的单机单用，那么应用的灵活性总要有吧。　　ARM架构作为RISC架构处理器，得益于精简的流水线，代码执行效率高，处理器不需要太多的晶体管就能够实现一定的计算性能（相比X86而言）。这也就带来了先天性的低功耗优势（晶体管越多，功耗越大）。但是相应的，ARM处理器的性能也就难以达到一般企业级应用的需求，虽然近年来ARM作为核心处理器已经能够从手机延展到平板电脑，但仍然无法与企业级处理器相比。原因就在于在动态网页的调度，CDN服务的制程中，ARM不论是稳定性（支持内存ECC等功能），还是计算能力，都还无法与x86处理器相比。　　来看一组数字，与同样低功耗的x86凌动S1200处理器（功耗仅6瓦）相比，ARM 不支持虚拟化，不支持64位架构（意味着不支持大于3.2GB的内存），没有企业级计算需要的稳定性（支持内存ECC等）。　　最简单的木桶原理告诉我们，凌动S1200平台的短板更少，更加适合企业级应用。采用了英特尔凌动S1200平台的HP ProLiant Moonshot 服务器已经在上半年全面出货，投放到数据中心中。并且，将在2013年下半年推出采用22nm新一代凌动 “Avoton”处理器的服务器，使得下一代Moonshot服务器的计算密度提升四倍（每服务器可配备4个Avoton系统芯片）。而凌动“Avoton”处理器由于采用了22nm工艺，因此在功耗上将进一步降低，从而再度削弱ARM平台唯一具有的功耗优势。　　今年年初开始，面向微型服务器的“Avoton”以及面向冷数据存储和低端网络设备的“Rangeley”处理器这的神秘面纱被一层层地被揭开。最高8颗内核，以上一代相比拥有7倍的性能提升，4倍性能功耗比提升等惊人的数字让我们对他在未来不久的面世更是充满期待。　　在企业级应用领域，ARM架构平台凭借先天性的低功耗优势引起注意，只能说明市场需求已经从对性能的追逐转向了高效能。但是ARM平台的诸多先天不足，则需要时间来完成进——集成诸如64位架构，虚拟化支持，企业级稳定性等。而这也将增加ARM架构的复杂性，那么低功耗的优势还会存在么？而2013年底22nm凌动“Avoton”处理器将要上市，新架构还集成了以太网控制器，在满足应用性能的基础上，最大化的减少了各组件的能耗。　　对于微型服务器来说，追求密度和低功耗固然是其诞生的原因，然而作为数据中心的一部分，与其他x86服务器的兼容，与整个64位软件生态系统的兼容，才应该是平台的首要考虑因素之一。