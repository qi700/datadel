浅谈数据备份系统及其硬件、软件技术与产品
复杂的网络环境下，网络数据备份系统的重要性日益显著。文章简述了网络备份系统的基础构架，对几种备份硬件技术与产品、多种备份管理软件进行详细的介绍和对比，探讨各种应用环境下，数据备份系统硬件和软件的选择。 引言     在复杂的IT架构中，有很多可能导致数据丢失或损坏的因素，如人为操作错误、系统软件或应用软件缺陷、硬件损坏、病毒／黑客入侵、意外宕机、自然 害等，会给企业造成无法估量的损失。因此对系统数据进行备份显得非常重要。     数据备份是指为防止系统出现操作失误或系统障碍导致数据丢失，而将全系统或部分数据集合，从应用主机的硬盘或阵列中复制到其它存储介质上的过程。早期的数据备份通常是采用单个主机内置或外置的磁带机或磁盘机对数据进行冷备份。但随着网络的发展和广泛应用、数量的大量增长，单机备份方式已不再适用。网络系统备份不仅备份系统中的数据，还备份系统中的应用程序、数据库系统、用户设置、系统参数等信息，以便迅速恢复整个系统。一个理想的网络数据备份是在软件数据备份的基础上加上硬件级物理容错系统。并且能够自动地跨越整个网络系统平台，具有保护性、可管理性和可扩展性。 1 备份系统的基础构架     一个完整和完善的备份系统包括几部分。 1.1备份硬件     目前比较流行的硬件备份解决方法包括硬盘存储、光学介质和磁带／磁带机存储备份技术。     与磁带／磁带机存储技术和光学介质备份相比，硬盘存储所需费用极其昂贵。磁盘存储技术虽能提供容错性解决方案。但容错却不能抵御用户错误和病毒。一旦两个磁盘在短时间内失灵，在一个磁盘重建前，不论是磁盘镜像还是磁盘双工都不能提供数据保护。因此，在大容量数据备份方面，硬盘并不是备份介质的最佳选择。     与硬盘备份相比，光学介质备份提供了比较经济的存储解决方案，但其所用的访问时问要比硬盘多儿倍，且容量相对较小。当备份大容量数据时，所需光盘数量多。虽保存时间较长，但整体可靠性较低。所以光学介质也不是大容量数据备份的最佳选择。     利用磁带机进行大容量的信息备份具有容量大、可灵活配置、速度相对适中、介质保存长久(存储时间超过30年)、成本较低、数据安全性高、可实现无人操作的自动备份等优势。所以一般来说，磁带设备是大容量网络备份用户的主要选择。 1.2备份管理软件     备份软件主要分为两大类：一是各个操作系统厂商在操作系统软件内附带的备份功能(如NetWare操作系统的Backup功能)；二是各个专业厂商提供的全面的专业备份软件， 如HP OpenView OmniBackⅡ和CA 的ARCserveIT等     对于备份软件的选择，需注重使用方便、自动化程度高、好的扩展性和灵活性。同时，跨平台的网络数据备份软件能满足用户在数据保护、系统恢复和病毒防护方面的支持。一个专业的备份软件配合高性能的备份设备，能够使遭受损坏的系统迅速恢复。 1.3备份策略     备份策略是指确定需要备份的内容、备份时间以及备份方式。备份的数据往往根据企业或组织的需要来确定。在实际应用中，必须根据备份窗口和恢复窗口的大小、整个数据量决定备份方式。 1.4灾难恢复计划     数据备份与灾难恢复密不可分，数据备份是灾难恢复的前提和基础，而灾难恢复是在数据备份基础上的具体应用。灾难恢复的目标与计划决定了所需要采取的数据备份策略。 2 备份硬件 2.1几种磁带技术的比较     目前，磁带技术与产品主要有AIT、DLT、LTO、DAT等几种。AIT格式(先进的智能磁带机)采用螺旋扫描技术．是SONY 公司在快速访问高密度磁带录制技术方面的创新。DLT原为Quantum(昆腾)公司的专利技术，现以OEM 方式向多厂家开放。LTO(1ine tape open)技术，最新由HP,SEAGATE及IBM 等厂商推出的敖群(Ultrium)磁带机采用这一开放的标准磁带技术，确保来自不同厂商的Ultrium磁带机实现数据的互换性。     下面就几种技术作简单比较，见表1。 表1  2.2磁盘存储技术     磁盘又称硬盘。具有高速、安全、方便维护的优势。磁盘的读写速度比内存低，但比光存储和磁带存储速度快很多，且属于随机存储设备，这些特点决定了磁盘存储作为数据输入输出设备被广泛用于电信、金融等信息化和数据安全要求很高的领域，作为实现数据备份，信息归档的强有力工具。     磁盘阵列是由一个硬盘控制器来控制多个硬盘的相互连接，使多个硬盘的读写同步，减少错误，增加效率和可靠度的技术。RAID是磁盘阵列在技术上实现的理论标准，其目的在于减少错误、提高存储系统的性能与可靠度。     这里主要介绍RAID 3-5的性能，见表2。 表2      RAID 5在速度、花费、容错几个方面都达到一个较好的平衡，所以得到了较为广泛的应用。 3 备份管理软件     数据备份的核心是数据库备份，流行的数据库(如Oracle、MS．sql)均有自己的数据库备份工具，但不能实现自动备份，只能将数据备份到磁带机或硬盘，而不能驱动磁带库等自动加载设备。显然，利用数据库本身的备份工具远达不到用户要求，必须采用具有自动加载功能的磁带库硬件产品与数据库在线备份功能的自动备份软件。目前流行的备份软件有多种，如Legato Networker、CA Arcserve、HP Openview Omniback Ⅱ、IBM Adsm 和Veritas Netbackup。各家软件在备份管理方式上各有千秋，都具有自动定时备份管理、备份介质自动管理、数据库在线备份管理等功能。其中，Legato，CA是独立软件开发商，注重于对各种操作系统和数据库平台的支持，而惠普和IBM 等更注重于对本公司软／硬件产品的支持。各家软件凭借自身的功能特性和优势，在网络数据备份领域都占据了一定的市场。这里简要介绍其中2种备份管理软件。 3,1 Legato NetWorker     NetWorker是美国Legato Systems Inc．研制开发的数据存储管理系统，提供了客户机／服务器体系结构下网络数据存储管理解决方案。NetWorker通过在网络中选定一台机器作为数据管理的备份服务器，并在其它机器上安装NetWorker的客户端软件。从而将整个网络的数据全自动地备份到与备份服务器相连的存储设备上，并在备份服务器上为各个备份客户端建立相应的备份数据的索引表、存储介质使用索引表实现数据的全自动恢复。     需要重点说明的是，NetWorker具有非常全面的应用环境支持，提供了DAS、NAS和SAN环境中的UNIX(Solaris、HP·UX、HP Tru64、IBM AIX 和SGI 1R~X)、Windows、Linux等在内的几乎所有主流平台的应用版本。这从很大程度上降低了混合存储环境下的管理开销。     NetWorker具备的功能和特性包括几部分。     (1)多服务器网络环境平行作业处理技术；     (2)在线式数据库的全自动备份接口，为先进的数据库、消息处理、内容管理和ERP应用提供在线备份、无性能影响的保护和精确的恢复；     (3)最广泛的存储设备支持，包括单一磁带驱动器、磁带库、信息井或磁盘阵列；     (4)与其它UNIX命令格式如cpio格式兼容，使得备份的磁带可相互通用：     (5)高可靠性、易于使用和管理等。 3.2 Veritas NetBackup     Veritas软件公司是世界唯一一家能提供多种企业级的存储管理软件的公司，为用户提供端到端的多平台、混合计算的存储解决方案。其高端产品VeritasNetBackup数据库备份软件适用于大中型存储系统，广泛地支持各种开放平台，支持复杂的网络备份方式和LAN Free的数据备份方式。Veritas有一款低端产品BackupExec，只支持小规模应用，相当于一个家庭版的NetBackup。     Veritas NetBackup软件是一个功能强大的能为异构操作环境和存储基础架构提供企业级备份和恢复的备份管理软件。NetBackup能够提供基于磁盘和磁带的统一数据保护、归档和恢复管理，可以将保护范围扩展到最大型的UNIX、Windows、Linux和NetWare环境，从远程办公到数据中心。NetBackup能实现全面保护和单个控制台来管理所有备份和恢复操作。     NetBackup能够提供以下几项功能，旨在降低保护、恢复和归档数据的复杂性和操作成本。     (1)统一的保护和恢复管理，通过单个控制台实现不同备份环境的集中式简化管理；     (2)关键应用程序的高级恢复，主要功能包括Oracle DB2 Sybase SAP Vmw~e M icrosoft SharePointPortal Server和Exchange的全面恢复功能以及l5分钟之内即可在任意平台(从Windows、Linux到UNIX)上完成系统恢复。     (3)数据归档、迁移和保留，通过Enterprise Vault实现智能归档，并通过智能分类引擎管理数据，提供了集成的数据保护和归档解决方案，降低成本并简化管理。置双网卡，判断如果请求IP是外网则返回外网地址，如果请求IP是内网则返回内网地址，有效的解决了内部电脑访问师大网站速度过慢的问题。让电信用户解析到电信服务器，网通用户解析到网通服务器。在DNS服务器上创建两个视图，一个电信视图一个网通视图，并且把电信和网通的IP分别录到两个视图内，然后再针对不同的客户端分别在两个视图内实现DNS智能解析。