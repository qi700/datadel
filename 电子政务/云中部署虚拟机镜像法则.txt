云中部署虚拟机镜像法则
启动和停止虚拟机是使用云计算资源的例行公事。在云中部署虚拟机有两个基本的选项：客户可以拷贝一个预先配置好的虚拟机镜像(也被称为最终版)，或者他们可以按照需求装配一个自定义的虚拟机镜像。
要启用一个虚拟机，首先要从云目录中选择一个机器镜像。当你在部署一个跟Apache Web或者是Jboss应用服务器有关的应用时，最好选择一个预先装好这些组件的Linux镜像。如果你是一个.NET程序员，最好选择一个预先安装并配置好开发工具的Windows操作系统。除了选择一个安装好必备软件的虚拟机镜像之外，还必须确认这些软件是最新的并且打过补丁。一旦你选择好了镜像，下一步就是在云中部署这个镜像。
完成版镜像：最少的精力但选择有限
使用最终版镜像有几大优势。最主要的是它可以保证虚拟机的一致性。此外，以一个已有的镜像开始可以节省很多精力和时间。终端客户不必去关心怎么安装程序库或者附加的包;他们可以依靠云管理员来维护最终版镜像。
终端用户拥有的选项受限是这个方法的缺陷;镜像目录通常会包含常用的镜像而不是一些不常用的组件集合。对于一个专业的虚拟机镜像，你可以选择一个最终版并且安装所需的组件。如果一个终端用户经常部署自定义的镜像，那么他必须保留一个镜像的副本，但是这就意味着用户必须自己打补丁，从而失去了使用最终版的优势。
考虑专业的云中实例并不是很重要的情况：你的网页应用已经在你配置负载均衡后的环境中运行了几周，如果你的应用突然发生了中断，你可能会考虑为负载均衡集群增加几台服务器。在这种情况下，你需要在集群中运行完全相同的镜像以保持一致性。如果你以前重做过这个镜像，那么系统中就可能出现不同版本的组件。这种情况也会发生在一个组件在两次部署期间发布了新版本。
最新的组件和按需装配
每次部署新镜像时创建自定义镜像使终端用户可以自己安装所需的组件。云用户喜欢以一个基础系统镜像开始，然后安装应用程序组件(数据库，应用服务器和web服务器)。然而，如果没有工具的帮助，创建所需的云对于经常性的部署是不切实际的。在这种情况下，应考虑使用配置管理工具(例如Chef或者Puppet)，它们允许你指定你想包含在镜像中的组件。如果最新版本的应用和补丁对于镜像至关重要，按需装配它们是最好的选择。举例来说，如果你有一份数据库服务器的标准配置，创建一个Chef或者Puppet脚本来创建镜像可以保证你拥有最新版本的组件。
按需装配还有助于在多服务器中保持一致性，因为数据库管理员不太喜欢点对点的为一个过时的最终版镜像打补丁。
这两种部署云中虚拟机方法(创建最终版镜像和创建按需迭代镜像)并不是相互独立的。当举例来说，当你需要创建一个服务器集群时，你应该建立脚本来装配一个自定义的镜像并使它成为最终版。首先通过配置管理工具创建多个虚拟机镜像然后使用这个镜像创建多个虚拟机实例。在这个场景中，只要你需要为集群添加新的虚拟服务器就要保留最终版镜像。
这里并没有单一的途径来在云环境中装配和部署镜像。最终版镜像在以一致性为主的案例中运作良好;而装配按需版本则可以保证你的环境中运行着最新的组件。