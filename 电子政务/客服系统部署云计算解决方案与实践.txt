客服系统部署云计算解决方案与实践
客服系统部署云计算解决方案与实践发表时间：2013/6/8 崔忻 王新宇 来源：万方数据关键字：云计算 桌面虚拟化 客服系统 节能降耗信息化调查找茬投稿收藏评论好文推荐打印社区分享客服系统目前面临着成本高、维护难的问题。文章采用桌面虚拟化(Virtual Desktop Infrastructure，VDI)技术，提出了客服系统虚拟化的技术方案及实施策略，该方案将不同桌面用户的计算机硬件、操作系统、用户配置文件和应用分离，使最终用户可以通过网络随时随地访问各自的桌面工作环境。实践表明，虚拟化客服可大幅降低能耗，改善坐席环境。1 客服系统虚拟化实施背景    客服系统现有坐席包括在线平台坐席和电话营销平台坐席，两个平台为独立接入，在线平台通过中继与固网和移动网汇接局连接，电话营销平台与移动网汇接局连接，平台之间的网络使用光纤链路连接。在线平台使用的是TDM(时分)排队机(以下简称ACD排队机)，坐席PC配置专用语音板卡实现语音功能，坐席与排队机之间使用语音专线电路传输语音信号，无法连接到虚拟化服务器上，暂时不具备实施坐席虚拟化的条件；电话营销平台坐席使用的是IP排队机，坐席终端可以通过以太网实现业务数据和接续话路的交互，具备部署虚拟化的技术条件。    现有的PC维护方式成本高，主要体现在三个方面。第一，客服业务包括自动IVR(互动式语音应答，Interactive Voice Response)业务和人工业务，业务逻辑较复杂。客服系统与BSS系统、IOM系统、集团ECS枢纽系统、ESS系统等多个支撑系统具有接口，而且数据接口传输的实时性要求较高，当系统出现故障时，修复起来费时费力；第二，由于客服坐席人员密集，PC数量大，所以硬件故障频繁，更换部件的成本较高；第三，传统的PC机的能耗比虚拟机使用的瘦终端普遍高200~300W，对于大量的PC而言，能耗是比较高的。    虚拟化技术正好可以解决这三个问题，对于出现故障的虚拟机，无论是软件故障还是硬件故障，只需要一条指令即可解决，而且终端的能耗低、绿色环保；所以虚拟化座席非常适合客服系统。    本文客服系统坐席虚拟化改造的目标定位为将电话营销平台的坐席终端改造成为虚拟化模式。同时，在线平台新建了部分虚拟化坐席用于后台管理和业务培训的人员使用，便于未来在线平台坐席使用人员向虚拟化工作方式的平滑过渡。2 客服系统虚拟化改造方案及关键策略    2.1 客服系统虚拟化整体方案    传统的客服系统坐席采用PC机工作模式，在PC设备上运行客服系统客户端，通过网络访问数据中心的服务器后台进程，实现业务流程的贯通(见图1) 。  图1 传统PC模式流程示意图    实施坐席虚拟化部署后业务流程产生了较大变化，通过坐席终端虚拟化协议“分离”坐席用户的操作界面(即本地物理终端)和程序执行/数据存放(即数据中心系统)，便于集中部署及管理与工作相关的桌面环境(见图2) 。  图2 虚拟化模式流程示意图    部署客服系统座席虚拟化后，原来保存在PC设备上的应用程序和系统数据被上移到终端虚拟化服务器上运行和存储，实现了核心业务流程和系统数据的集中管理和保存，座席终端设备只显示桌面影像。运行在终端虚拟化服务器上的业务应用程序通过网络访问数据中心的服务器后台进程和数据，系统部署如图3所示。  图3 虚拟化系统网络部署示意图    虚拟化方案以两台高性能的9306交换机作为枢纽，将虚拟化服务器、在线平台工作区以及电话营销工作区连接起来，两个工作区分别连接一套排队机设备，虚拟化服务器派生出多台虚拟终端为话务人员提供服务，排队机则提供语言接入功能。    在线平台侧作为本次项目的核心区域部署两台虚拟化域管理服务器，域管理服务器衍生出多台虚拟机，分别承载着虚拟化平台的资源配置、用户管理、鉴权认证等多项服务，相当于将多个主备运行服务器集成在两台域管理服务器上。将域管理服务器部署于在线平台侧的主要目的是基于未来在线平台侧PC类坐席进行后续虚拟化改造的考虑，核心服务器设备和虚拟化坐席部署在同一个工作区便于改造建设、业务测试和日常维护。  在线平台侧部署云计算服务器和桌面云存储，每个服务器承载30个左右瘦客户端应用。如果后续PC类坐席实施虚拟化改造，核心侧只需增加云计算服务器和相应的存储容量即可满足使用需求。    电话营销平台的瘦客户端通过IP方式与在线平台连接，访问云计算服务器。使用该方案，随着后期客服系统虚拟化坐席扩容的需要，可以通过增加云计算服务器和软件License方式，保证后续虚拟化坐席应用的平滑扩容。    2.2 客服系统的数据保护策略    客服系统坐席按照角色的不同，分别授予其不同的数据访问权限，实现系统核心数据的安全保护，防止数据泄密带来的运营风险和管理风险。    客服系统坐席的使用人员包括普通话务代表、投诉处理专员、质检员、现场管理人员、业务受理人员等不同的角色，他们对系统数据的使用需求也不尽相同。在使用PC的工作中发现部分使用人员私自插入U盘等介质拷贝与工作无关的文件，这样既影响了正常工作生产又为系统核心数据的安全性带来了隐患。技术部门的维护人员为全台坐席安装PC防U口程序的工作耗费了大量的人力和时间，同时也影响了部分管理人员正常使用U盘进行数据拷贝的工作。这一问题一直是困扰客服业务使用和日常维护的难点。    在实施虚拟化改造的工作中，技术人员将不同需求的客服人员规划成不同的域用户，每个域的用户具有独立的权限和角色，修改某个域的配置不会影响其他域用户的使用。普通话务代表可以接听客户咨询电话，解答用户疑问，投诉处理专员具有生成投诉工单并进一步处理的权限，质检员负责监听普通话务代表的通话，以保证通话质量，业务受理角色完成指定业务的现场受理，现场管理人员则可以根据话务量需要在上述四种员工之间进行调配。在2.1节中，图3所标示的“域管理服务器”完成此功能。域管理服务器是登陆坐席的第一道闸门，完全可以实现域与域之间的独立，同时，不会对语音通话的质量造成影响。对于像普通话务员为代表的客服人员的权限为屏蔽U口(不包含键盘和鼠标的数据流)，该部分使用人员只能通过显示器查看系统数据，无法通过移动介质拷贝数据和打印。对于以班长和现场管理人员为代表的客服人员的权限为支持U口，该部分使用人员可以通过移动介质拷贝数据和连接打印机进行打印。对于以业务受理为代表的客服人员的权限为支持扫描仪等设备输入，该部分使用人员可以利用扫描设备留存客户的相关资料。技术人员按照客服部门对使用人员工号的规划制定了个性化的策略，从而保障了数据和系统的安全性。    每个用户在被创建后需要绑定一个角色。域角色的设定基于用户，与使用的瘦客户端无关，这样就解决了由于客服人员不固定坐席而带来的管理问题。    通过以上方式可有效提高虚拟化终端数据的安全性和系统的可用性。    2.3 网络系统中的配置方案    实施坐席虚拟化改造前，客服系统网络架构不尽合理，主要表现为：1)网络设备多为百兆级交换机且老化现象严重。2)网络规划过于粗放，一个C类地址只划分了一个VLAN，曾经出现过由于一台终端发送ARP(地址解析协议，Address Resolution Protocol)攻击包导致该VLAN内其他终端全部阻断的故障。3)坐席终端IP经常被误操作修改，导致多台终端无法正常使用业务，甚至曾经出现过坐席IP修改为网关地址引起全部坐席中断业务的事故。    针对以上问题，对客服系统的网络设备进行升级改造，使其支持三层路由工作模式，将坐席划分为多个VLAN，合理规划组内终端数量，防止因一台终端故障引起组内其他终端全部无法使用的现象出现。在实施坐席虚拟化工作中采取了以下措施和方案。    1) 升级改造网络设备并重新规划网络架构。技术人员将客服系统现有的全部网络交换机进行升级改造，替换成三层网络交换机，使原有的百兆接入提升到千兆网络接入能力，其拓扑位置可以参考图3中标注的9306交换机，该交换机具备足够的吞吐量，为未来全面部署虚拟化系统奠定了网络基础。    2) 重新规划网络配置。VLAN的规划直接影响坐席的使用，原有的VLAN过大，导致一旦出现故障，影响面积过大；如果VLAN规划过小，将造成IP地址的浪费。结合网络交换机端口数量，最终VLAN组内的终端数定为64台，一个C类地址划分成为4个VLAN。将三台24口的网络交换机堆叠后刚好能够满足规划使用，又不浪费过多的端口资源和IP地址。    3) 瘦客户端和虚拟机IP地址区隔。瘦客户端作为网络接入设备需要分配IP地址，由于其只与虚拟机通信，而且访问其他业务系统的真实IP地址是虚拟机的地址，基于这一原因，技术人员决定将私有地址分配给瘦客户端使用，在虚拟机上配置DCN(数据通信网络，Data Communication Network)网络的IP地址。这样节约了50%的IP地址资源，同时保证了坐席使用者可以正常使用各类业务系统。    2.4 外置语音通路，保证话音质量    在终端和排队机之间外置语音通路，减少语音信号经过的设备和因此带来的延时。    目前虚拟化实施主要集中在营业厅和IDC等项目，客服系统坐席虚拟化比营业厅虚拟化对语音的处理要求更高，语音与数据的耦合程度也更紧密。客服系统实施虚拟化改造能否成功，关键取决于对接续话音的处理能力是否能够满足要求。    技术人员通过分析其他省份客服系统坐席虚拟化实施方案，多采用了在瘦客户端与客服业务服务器群之间增加一层虚拟化服务器平台，由该平台承担客户端与后台通信承上启下的功能，语音集成与处理功能也加载在这一平台上。天津联通客服坐席虚拟化改造在实施过程中发现采用此方案语音的延迟较传统PC模式大，接续语音与系统数据传输到达坐席侧不一致，而且音质不清晰。由于客服人员为客户提供服务工作需要精确到秒，一通电话几秒的延迟会极大地影响业务生产，对客服业务的使用造成较大的影响。这一问题的主要原因是：1)接续语音数据流通过IP排队机、虚拟化服务器群、NCBroker等设备后到达瘦客户端侧，经过的设备较多，存在延时的可能；2)接续语音数据流在虚拟化服务器侧经过了压缩和处理，导致语音质量不清晰并滞后于业务数据流到达瘦客户端侧。    基于上述原因，技术人员采用了将语音通路单独外置，不经过中间的服务器平台，在IP排队机和瘦客户端之间直接建立通道传输语音信号的思路。具体实施方案为：    1)在瘦客户端的操作系统中安装客服接续软件，客服代表签入业务系统时直接在瘦客户端上进行操作；    2)在接续软件的系统参数中直接设置IP排队机的路由信息，语音信号不进行压缩处理，以保证语音通话质量。    通过上述举措，语音通话质量有了明显的提升，客服人员在使用虚拟化设备时与使用PC设备接听客户来话没有明显的差异，使用感知良好。语音通道改造见图4。图4 客服虚拟化语音通道改造示意图    2.5 虚拟机预装防病毒程序    在镜像文件中预装防病毒软件后再分发安装全部虚拟机，实现对虚拟机的安全防护。    终端防病毒是集团公司重点关注的工作之一，客服虚拟机防病毒工作实施也是本次虚拟化改造的重要内容。为了保证虚拟机正常工作和安全生产，技术人员在制作虚拟机镜像前预装了最新版本的防病毒软件，同时搭建了防病毒服务器，由专人定期对病毒库进行更新，保证虚拟机的病毒库版本保持最新状态。为了防范某个虚拟机病毒发作影响其他设备的使用，技术人员对防病毒服务器实时监控模块进行跟踪，发现某个虚拟机异常就及时进行隔离并重新安装虚拟机，有效减少了影响的范围。3 客服虚拟化应用实施过程中的关键问题及应对策略    坐席虚拟化作为呼叫中心领域的新生事物，必然会在日常生产和维护使用中遇到问题与挑战。为了避免全部坐席集中改造给话务生产和管理工作带来冲击和影响，在设计过程中需采用分阶段实施改造，积累运营经验并收集改进需求和方案，再逐步推广使用。首批上线的虚拟机遇到的主要问题及解决方法如下。    1) 虚拟机的双核CPU冲突。主要表现为：当话务繁忙，CPU利用率接近70%时，虚拟坐席吞吐能力降低，响应时间增长。经过分析，确认为虚拟机虚拟双核访问客服系统内存地址空间产生冲突，导致系统空闲值降低、争用增加，系统变慢。把双核改为单核后，故障消失。    2) IP地址的DHCP策略不利于人员管理。DHCP用于IP地址动态分配，节省IP地址，但是在话务员进行违规操作后无法根据IP地址准确、迅速定位违规工号，故最终取消了DHCP策略，改用静态地址的方式。4 客服系统虚拟化的实施效益分析    4.1 符合公司节能降耗要求    集团公司对节能减排工作明确了节能目标、节能要求、节能措施、节能技术，指导信息化支撑专业节能减排工作。对于新建的系统和平台项目，要求密切跟踪虚拟化技术趋势，加强集中化布局能耗的控制，对于现网应用的IT系统和业务平台，要求对其使用情况和使用效率进行评估，推进系统优化整合，降低设备能耗，客服坐席虚拟化工作正是按照集团公司这一指导方针进行的。    普通PC的能耗在300W左右，瘦客户端的能耗在10W左右，按照200个坐席每天运行10小时使用量计算，对比如表1所示。  表1 传统PC与虚拟化坐席的能耗对比    瘦客户端的运行噪声和散热量均比PC低得多，为客服话房营造舒适的工作环境，也间接的降低了话房空调的负荷和用电量。    4.2 改善了坐席人员的工作环境，增强便捷性    坐席虚拟化对使用者来讲，会给他们增加很多的方便，用户可以不受工作地点的限制，实现个人移动化办公。从全球通信行业的发展趋势和用户需求来看，开展虚拟化已成为未来的发展趋势。一阶段坐席虚拟化部署的成功在取得良好经济效益和社会效益的同时也为客服系统全部坐席实施虚拟化改造积累了宝贵经    4.3 维护费用大大降低    虚拟化可以降低终端价格、终端维护费用，以200台坐席为例，节约成本如表2所示。  表2 传统PC与虚拟化坐席的节约成本对比