云计算VMwarre vSphere虚拟化技术的架构分析
随着高校信息化建设的发展与深入，云计算平台的搭建对于高校数据中心的建设是一种趋势。探讨了服务器虚拟化对云平台的意义，就目前最为成熟而且应用最广的VMware vSphere虚拟化技术架构进行了分析。　 引言    虚拟化技术是伴随着计算机的产生而发展的，虚拟化意味着对计算机资源的抽象。虚拟化技术实现了物理资源的逻辑抽象和统一表示，通过它可以提高资源利用率，并能够根据用户业务需求的变化，快速、灵活地进行资源部署，因此，虚拟化技术已经成为构建云计算环境的一项关键技术。    VMware云基础架构能够让现有的用户从虚拟化中获益，加速了现有数据中心云计算的转移，与公共云基础兼容，铺平了向混合云模式前进的道路，成为云计算的新里程碑。    本文主要讨论作为X86体系结构虚拟化技术的代表，VMware公司基于已有的虚拟化技术和优势，提供了云基础架构及管理、云应用平台和终端用户计算等多个层次上的解决方案，主要支持企业级组织机构利用服务器虚拟化技术，实现从目前的数据中心向云计算环境转变方面的架构分析。　 1 VMware vSphere简介    VMware vSphere是在原来的V I3基础上推出的系统，被成为业界首款云计算操作系统。vSphere将应用程序和操作系统从底层硬件分离出来，从而简化了IT操作。现有的应用程序可以看到专有资源，而服务器则可以作为资源池进行管理。vSphere以原生架构的ESX/ESXi Server为基础，让多台ESX Server能并发负担更多个虚拟机。主要包括3部分：一是虚拟化管理器VMM部分的VMware ESX 4 , VMware ESX Server主要是用于调配物理服务器中内存、CPU、存储及网络各种硬件资源，运行在物理服务器上的一个虚拟层并根据预定好的策略将这些资源分配到运行在其中的各虚拟机中，这些虚拟机以安全独立的模式并行运行;二是用于整合和管理VMM的VMware vCenter，提高在虚拟基础架构每个级别上的集中控制和可见性，通过主动管理发挥vSphere潜能，是一个具有广泛合作伙伴体系支持的可伸缩、可扩展平台；三是用于管理客户端的软件VMware Infrastruc-ture Client。　 2 VMware vSphere的基本架构    VMware vSphere主要通过虚拟化技术将数据中心转变为云计算基础架构，通过虚拟化提供自助部署和调配的功能，将IT基础架构作为服务来交付使用。vSphere是一个整体架构而非单个产品，基本架构如图1。                  图1   VMware vSphere的基本架构
2.1 vSphere的云端部分    vSphere所谓的云端是指平台及架构部分(PaaS和IaaS)，可以分为内部和外部云端。内部云端由各种硬件资源组成，并有vSphere负责统合云端资源，在IaaS及PaaS中，资源为硬件及OS资源。外部云端vSphere可以将这些第三方提供的资源集成到企业的IT架构中。　　2.2 vSphere的底层:架构服务(Infrastructure Service)    有了硬件资源之后，就需要一个Hypervisor将资源集成，然后ESX和ESXi服务器将负责硬件资源虚拟化口Infrastructure Service主要可以分为运算部分的vCom-pute、存储部分vStorage以及网络部分的vNetwork。    (1) vCompute部分。vCompute包括了ESX/ESXi以及DRS。ESX/ESXi主要实现服务器整合、提供高性能并担保服务品质、流水式测试和部署及可伸缩的软硬件架构。DRS确保按需调整资源配置，根据需要和优先级压缩和增加应用系统的资源，动态的响应负载平衡。    (2)vStorage部分。vStorage包括VM所在硬盘的文件系统VMFS以及动态分配大小的Thin Provisioning，提供多种存储虚拟连接选择，通过vStorage VMotion减少或消除计划内停机，通过精简部署降低虚拟环境的存储要求，通过vStorage API简化管理并提高存储操作的效率。V MFS是专门为虚拟机设计的高性能集群文件系统，该系统可以在VMware虚拟机的VMware虚拟数据中心环境中访问共享存储。    (3) vNetwork部分。VMware的网络虚拟化技术主要通过VMware vSphere中的vNetwork网络元素实现。通过这些元素，部署在数据中心物理主机上的虚拟机可以像物理环境一样进行网络互连。vNetwork的组件主要包括虚拟网络接口卡Vnic. vNetwork标准交换机vSwitch和vNetwork分布式交换机dvSwitcho vSphere提供了一个Distributed Network的架构，不但有完Bridged/NAT/ Host only架构，更和Cisco合作推出一个专门安装在vSphere上的分布式网络。　　2.3 vSphere的Application Service    应用软件服务是针对VM的，可以让多台服务器多个VM排列组合，达到企业应用的目的。    (1)VMotiono  VMware的在线迁移是由VMotion这个组件实现的，虚拟机的迁移是指源主机上的操作系统和应用程序移动到目的主机，并且能够在目的主机上正常运行。通过VMotion可以实现在业务不中断的前提下，动态迁移虚拟机。Vmotion的实时解决方案的特点是有其自己的 Cluster File System：VMFS，此外也支持NFSaVmotion把整个虚拟机包括其完整状态封装在几个文件中，存放在SAN/NAS等共享存储中。迁移的过程是把内存和运行状态通过高速网从源复制到目标。                      图2   VMotion原理 　 (2) HA(高可用性)。当1台服务器故障时，自动在其他服务器上重新启动虚拟机。不需要临时增加或独占新的服务器自动完成，无需人工干预经济有效的提高应用程序的高可用性。    (3) VMware Fault Tolerance(冗余性)。在不同的主机上同步运行相同的虚拟机，出现硬件故障时，所有虚拟机均可实现零宕机、零数据损失故障切换零宕机、零数据损失，无需复杂的集群或专用硬件，所有应用程序和操作系统使用通用的单一机制。    (4)VMware Data Recoveryp Data Recovery是vSphere新提供的数据备份功能，是一种基于磁盘的数据备份方式，不支持以磁带为目标的备份。VDR由VCB插件、运行在ESX主机上的虚拟机以及备份存储这3个部件组成。　　2.4 vSphere的管理平台:VMware vCenter    vCenter作为管理节点控制和整合属于其域的vSphere主机，可以安装在物理机的操作系统上，也可以安装在虚拟机的操作系统上。提高在虚拟基础架构每个级别上的集中控制和可见性，通过主动管理发挥vSphere潜能，是一个具有广泛合作伙伴体系支持的可伸缩、可扩展平台。    (1) VMware vCenter Client。在vSphere中，所有的VM管理、创建、运行、维护都靠vCenter Client。    (2)VMware vCenter Server。在vSphere中，vCenterServer具有动态迁移、资源优化、容错、高可用性、备份以及应用部署等高级功能。　 3 结语    VMware vSphere是业界领先且最可靠的虚拟化平台。vSphere将应用程序和操作系统从底层硬件分离出来，从而简化了IT操作，VMware vSphere的出现改变了人们对虚拟机的看法，更让企业应用从单纯的服务器合并到取代整个企业基础架构，在越来越强调效率的企业环境中，将重写企业IT的观念。