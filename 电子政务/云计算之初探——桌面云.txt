云计算之初探——桌面云
主要介绍了桌面云的概念、桌面云的典型逻辑架构,并简要介绍了两家桌面云厂商的解决方案。通过实际部署这两家厂商的桌面云产品,对其功能进行了比较,同时测试、比较了在各种实际应用场景中这两种产品对网络带宽的消耗,通过对比分析阐述了目前桌面云技术的优缺点与适用场景。引言    维基百科关于“云计算”的解释是：“一种基于互联网的计算方式，通过这种方式，共享的软硬件资源和信息可以按需提供给计算机和其他设备。整个运行方式很像电网。用户不再需要了解‘云’中基础设施的细节，不必具有相应的专业知识，也无需直接进行控制。云计算提供商提供通用的网络业务应用，通过浏览器等软件或者其他Web服务来访问，而软件和数据都存储在服务器上”。    桌面云则是以云的方式向最终用户提供桌面服务，最终用户可以通过PC、工作站、笔记本、上网本、智能手机、PDA等任何与网络相连的设备来访问跨平台的应用程序以及整个客户桌面。    目前桌面云厂商对于桌面云的实现有2种不同的方式：桌面虚拟化、应用虚拟化。    桌面虚拟化：基于服务器虚拟化技术，将计算机的桌面进行虚拟化，以达到桌面使用的安全性和灵活性。可以通过任何设备，在任何地点，任何时间访问在网络上的属于个人的桌面系统。    应用虚拟化：不需要基于服务器虚拟化，可以部署在物理服务器上。将软件或应用程序安装在服务器中，通过发布，被企业用户远程使用，允许软件在独立的环境中交付与更新，保证了操作系统和应用程序的完整性。1 桌面云简介    1．1桌面云的原始需求与业务价值    传统桌面在以下几个方面存在着缺陷或者说不足：    (1)安全性方面：客户端自身易受病毒等侵害；企业机密信息与数据易流失或泄密；企业信息系统需要开放一些端口和防火墙策略，易被非法利用或攻击。    (2)管理与维护方面：客户端日常管理与维护，费时费力，效率低，成本高；业务系统变化时，不同时期客户端难以完全匹配，随需而变；客户端变化时(操作系统、浏览器)，业务系统也需改造，难以快速适应。    (3)灵活性方面：网络带宽瓶颈影响信息系统的跨地域访问；难以满足用户随时随地访问信息系统的需求；新型电子产品层出不穷(iPad等)，原有业务系统难以适应这些设备的访问需求。    云桌面正好可以满足这些方面的需求：    （1）安全性方面：桌面资源集中管理，统一桌面安全策略，用户端可采用瘦客户机；数据可强制服务器访问和保存，防止流出；应用均通过云桌面访问，对外无需开放其他端口。    （2）管理与维护方面：集中管理与配置，创建标准桌面镜像和应用模板，统一维护，减少维护工作量；由云桌面访问各业务系统，桌面标准化后，不受业务系统升级或访问终端设备变化的影响。    （3）灵活性方面：通过云桌面访问信息系统，终端设备与后台服务仅传输屏幕变化信息，可减少带宽消耗；通过安装插件，支持多种访问设备。    1．2桌面云的虚拟化技术本质    桌面云的技术本质是虚拟化。虚拟化体现在“拆”与“合”两个方面：    “拆”包括将操作系统与硬件资源进行拆分，使得操作系统运行并不依赖和独占特定的硬件贷源；也包括将桌面的用户操作环境与实际运行环境进行拆分，从而使用户可借助不同访问设备和网络条件使用个人桌面。    “台”则是在解除操作系统、应用程序和用户数据间的紧耦合后，集中后台统一管理，根据使用需求，将这些内容动态拼装(“台”)成用户桌面，在“合”的过程中采用高性能传输协议(如RDP，ICA）与用户访问设备的客户端软件进行通信。    1．3桌面云的典型逻辑架构    桌面云的典型逻辑架构可以用图1来表示。    图1 桌面云典型逻辑架构图    桌面云架构主要包括以下部分：终端设备、网络接人、管理控制台、身份认证、操作系统或者应用程序等。最终用户使用Pc、工作站、笔记本、上网本、智能手机、PDA等备类终端醴备，通过阿络访问桌面云。在桌面云中有专门的管理控制台，用于制定桌面分配策略、安全策略、管理用户连接等。对于最终用户共性的应用软件需要通过虚拟桌面提供，对于个性的应用软件需要则通过虚拟应用提供。2 桌面云具体实现    目前市场上有桌面云解决方案的厂商主要包括VMware，Citrix，IBM，Microsoft，华为等，其中VMware是xS6服务器虚拟化领域的龙头，Citfix是应用虚拟化领域的领导者，这二家厂商的桌面云解决方案大致如下。    2.1 VMwR件桌面云解决方案VMware View    (1)通过vSphere(包括ESX和vcenter Server)实现服务器虚拟化，将服务器虚拟为若干虚拟桌面。vCenter Sewer的管理配置信息存放在关系型数据库中，支持Oracle，DB2，SQLSewer。    (2)原有Pc可作为桌面池中的资源分配给用户使用。    (3)终端设备通过View Connection Server分配到某一个随机的或指定的虚拟桌面上。管理员使用View Administmtor进行远程管理。    (4)使用Microsoft AD作为用户管理和身份认证。    (5)通过ThinApp实现应用虚拟化，但和Citrix不同，它叠加在虚拟桌面上运行，不独立提供给用户。    2．2 Citrix桌面云解决方案XenDesktop    (1)使用XenServer完成服务器虚拟化，将服务器虚拟成若干虚拟桌面。    (2)使用Provisioning Server实现桌面虚拟化；使用XenApp实现应用虚拟化，可直接提供用户访问。两者的配置信息均采用关系型数据库存储。    (3)使用Microsoft AD作为用户管理和身份认证，使用Desktop Deliver Controller通过DB存储配置信息。    (4)终端设备通过Desktop Delivery Controller分配到某一个随机的或指定的虚拟桌面上，可直接访问虚拟应用，但后台也是远程桌面连接。DataCollector用于大规模部署XenApp时，实现负载均衡。    2．3 VMwareView与XenDesktop功能比较    VMware View与XenDesktop功能比较如表1所示。    表1 VMware View与XenDesktop功能比较表    2．4 VMware View与XenDesktop网络带宽消耗比较    VMware View与XenDesktop网络带宽消耗比较如表2所示。
3 桌面云适用场景    根据测试与分析，大规模部署、使用桌面云，在以下几方面还存在着障碍：    (1)桌面的管理权问题：使用桌面虚拟化后，最大的变化是回收了最终用户对桌面的管理权，并对桌面及可使用应用程序进行标准化和规范化，从而实现集中管理和桌面安全。若还是一人一个桌面镜像，甚至允许自行安装软件，整个桌面的维护量没有变化，安全性反而更差(由于一个桌面可能会影响后端所有系统)。    (2)用户体验不一致问题：由于采用服务器虚拟化技术，每个虚拟桌面后端对应一个虚拟机，每个虚拟机共享服务器上的CPU、内存等系统资源。由于资源共享，可能会由于每台服务器的资源和并发度不一样，而产生不同的用户体验。若是使用企业内部应用，由于不同的网络和系统资源原因造成的不同用户体验，在判断故障原因时将难以快速定位。    表2 VMware View与XenDesktop网络带宽消耗比较    (3)桌面软件License问题：服务器后端共享软件，让企业内员工通过虚拟桌面使用，并不能节省桌面软件License费用(厂商按使用终端设备计算)，真正使用量较难统计。    (4)网络瓶颈问题(带宽和延迟)：通过测试，桌面虚拟化的实用效果并不如厂商宣传的，尤其是在因特网和3G网条件下。但随着网络技术的发展，相信这个问题可以得到解决。    因此，现阶段要部署、使用桌面云，可能比较适合以下场景：培训中心、学校课堂、医疗中心、银行柜面、研发中心、开发外包。4 桌面云成本分析    为分析部署桌面云的成本，模拟如下业务场景：企业内部网络环境、1000终端用户，比较传统桌面与云桌面解决方案的初期建设成本。    (1)传统PC桌面    办公终端(含显示器、OS)：4 500元×1 000=450万元    (2)云桌面    瘦客户端(含显示器)3 000元×1 000=300万元；桌面虚拟化相关软件1 500元×1 000 =150万元；服务器、存储250万元；其他软件(DB，AD等)30万元；网络及安全设备50万元；实施服务费用50万元。合计830万元。    从以上简单比较，可见采用桌面云方案，初期建设成本明显增加，那后期运维成本是否会下降呢?    电力成本：传统PC终端每台使用功耗约在60—90W左右，瘦客户端则约在20—40 W左右，从这点上瘦客户端可以节省电力消耗。但“桌面云”还需加上后端服务器及相关设备的电力消耗(包括设备本身和空调、UPS消耗)，而且这个消耗是7×24 h的，而传统PC则只在工作时段产生消耗。    维护成本：传统PC终端更新周期在3—5年，瘦客户端及后端服务器等硬件一般在5～10年，并且瘦客户端自身故障率也较传统Pc低。但“桌面云”还需加上桌面虚拟化及相关软件(数据库、AD、备份等)的升级维护成本和桌面云自身管理维护成本。另外，还需考虑“桌面云”万一故障时，临时替代方案的成本。    可见采用桌面云方案，后期运维成本一样是增加的。    当然，采用桌面云方案也是有经济效益的，主要体现在以下方面：
安全成本：实施“桌面云”后，现场的瘦客户端基本无需安全控制，所有桌面安全集中在机房内由管理员统一管控，降低桌面安全管控成本。同时，实施“桌面云”后，可有效控制企业机密信息和数据的安全，否则其造成的损失无法计算。    其他隐性成本：由于实施“桌面云”，某些信息系统和桌面软件可继续使用若干年，从而带来成本的节约。实施“桌面云”后，可以带来桌面部署效率的提高，如新人报到能快速拥有工作环境。5 结论    “桌面云”目前仅推荐在局域网范围内使用。“桌面云”适合对桌面管理要求比较严格的企业或者企业中一个特定场景，适合以“安全性”、“灵活性”需求为目的的业务场景，而不是简单将桌面集中管理的需求。“桌面云”解决方案较传统PC方案，并不节省初期建设成本和后期运行维护成本，相反更多。“桌面云”在安全性、灵活性及对原有投资保护方面做得更好。由于达到的效果不一样，多支出的成本是否合适，需个案独立分析，不能一概而论。