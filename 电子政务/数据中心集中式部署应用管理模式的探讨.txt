数据中心集中式部署应用管理模式的探讨
随着消防部队信息化的进一步深入，越来越多的业务系统不断增加，由此引发服务器资源分配不均、机房面积和耗电量增加、数据备份和管理难度增大等一系列问题，已成为影响数据中心发展的一个瓶颈。本文以云南省公安消防总队统一建设数据中心为例，对消防数据中心的集中式部署、服务器和存储的虚拟化改造作初步探讨。1 数据中心的现状    按照信息化建设要求，消防业务信息系统采用多级部署方式，除总队外每个州市级支队至少需部署10台服务器，同时还需部署如下设备：服务器专用机柜、KVM 视频切换器、服务器控制台、网络交换机、存储系统（根据支队实际情况，部署10-15TB 存储系统）、UPS 不间断电源系统、通风散热系统。目前，总队和所有州市消防支队均建设了数据中心，各级消防业务信息系统分别部署在两级数据中心，并由两级管理员分别管理各单位系统硬件设备。2 数据中心建设目前存在的问题    2.1 资源利用效率不高    服务器按照业务划分，本质上具有分布性，在应用中发现，有的服务器所装应用系统占用资源少，但仍必须使用1 台独立的服务器安装运行，对资源造成极大的浪费，而且服务器价格相对较高，难以通过资源集中共享的方式来提高利用率、降低成本。    2.2 日常维护和管理难度大    由于云南省特殊的地理环境，各个支队分布地域广泛，交通不便，服务器及存储厂家技术服务站都只设在昆明，地州没有服务器及存储厂家技术力量，在这种情况下，分散式部署的技术保障极其困难，一旦有任何技术问题解决起来时间周期较长，而且很难形成标准化的管理。此外，从目前专业技术人员的水平能力来说，各个支队信息技术人员的技术能力参差不齐，技术保障能力有限，对复杂业务系统的部署和应用将存在一定的问题。    2.3 难于实现数据保护    各个支队的数据存储方式各异，对数据的处理也有差别，基本上采取服务器硬盘本地备份和移动硬盘异地备份方式进行数据保护，一旦出现服务器上的数据损坏、丢失、病毒侵害或者移动硬盘损坏，都非常容易对业务的连续性造成致命的影响。如何屏蔽数据造成的风险，这不仅是对各支队的前期技术保障能力有较高的要求，并且对日常的维护、对数据安全性也提出了更高的要求。从系统备份角度来说，因为每个服务器都是单机，如果都配置为双机模式成本会更高。系统维护和升级或者扩容时候需要停机进行，造成应用中断。目前，出于成本考虑，数据中心所有业务系统都没有做应用系统的热备，如果服务器出现硬件故障，必然导致相应的软件系统宕机，且恢复困难，恢复周期过长，严重影响了日常工作。特别是对于早期部署的应用系统，有些服务器硬盘没有做冗余备份，如果硬盘损坏，其信息难以恢复，将给业务工作带来难以估计的损失。    2.4 系统迁移难度大    随着时间的推移和硬件老化，应用系统必将迁移到新硬件上继续运行。每一次业务系统的迁移或新增都需要经过需求分析、服务器招标采购、综合布线、软硬件安装等步骤，延长了系统部署周期，浪费了大量的人力、物力和时间。3 解决存在的问题    3.1 计算资源虚拟化    方案设计包含了以下几个架构部分组成：所有支队的服务器全部集中到总队，进行统一的集中式管理，统一部署。总队将为各个支队构建一个统一的云计算中心，16个支队完全不用关心服务器的运行情况，只需要通过网络的连接，就能保证所有信息化业务的正常运行。    服务器计算资源集中式虚拟化部署优点是：总队构建的是一个虚拟化的平台，部署在刀片服务器上。首先所有刀片构成的是一个刀片集群计算中心。其中，由若干刀片构建硬件平台，再由若干虚拟机共同组成的“虚拟池”，对于不同的“虚拟池”，系统资源根据需求和优先级动态分配给每台虚拟主机，实现对服务器资源的有效利用和控制。在此模式下，根据应用系统和各支队业务量的大小，通过服务器虚拟化实现服务器资源的动态管理。同时，虚拟化可实现集中快速部署数台服务器，以往从一台服务器上架到操作系统安装调试完毕需要1 个多小时，但采用虚拟化，一台虚拟服务器只需要几分钟就可完成设置。    3.2 存储资源虚拟化    有了虚拟化的计算平台，同样需要对应的虚拟化的存储平台。利用存储虚拟化则能将SAN 的固态结构困扰转化为能现实动态匹配的优势，不仅能创建大容量存储池，并可根据实际I/O 流量要求来进行后端动态分配，彻底的解决潜在的流量瓶颈问题。将新一代服务器前端虚拟化与后端存储虚拟化技术进行完美结合，构建成了一个完善的“动态虚拟存储中心”。传统的存储设备主要由DPE和DAE组成，DPE 是系统控制和处理的核心，而DAE 主要提供容量的扩展。因此，整个系统的性能不是随着容量线性增加的。因此应该采用对等存储设计，每个阵列都有自己的控制器处理单元，每添加一个盘柜，整个系统的容量和性能都线性增加。    这种方式的优点是，当虚拟主机数量越来越多，并且频繁进行数据交换的时候，有足够的动态数据通路保证虚拟主机的正常运行。虽然虚拟机不可以横跨两台物理主机来执行任务，但是对等存储设计的存储设备却可以把后端的存储卷同时分布在多台阵列和多路径的安排下的来匹配和提高全面I/O 性能要求，在高效的I/O 条件下，每台物理主机可以运行更多的虚拟机，大大的增加虚拟化IT投资的回报。4 方案实施后的优势    （1）电力资源成本：我们可以通过功耗对服务器的耗电量进行计算得出的结果是，5 年时间，各个支队分散服务器的电费是总队集中方式的近10 倍，5年时间下来将至少有近200万的多余开支。    （2）管理成本：16个支队就至少需要16个服务器的系统管理员。而集中到总队只需要2 至3名管理员就能胜任。    （3）业务的连续性和数据的安全性：如何保障16 个支队的160台服务器每一台都不出问题或者说保障24小时业务的不间断性？从方案角度设计得到的答案是每个支队部署20台服务器，即每个应用采用2台服务器实现双机热备高可用。再加上必要的双机软件和存储，那么投入将直接增加一倍以上。采用集中式管理和虚拟化架构，那么每一台服务器及应用，构成一个虚拟机，就像是一个文件包。当服务器出现任何硬件故障，那么将此虚拟机自动或手动“漂移”到其他任何一台服务器，业务不会收到任何影响。5 结束语    目前，消防部队信息化已从“打基础、搭框架、建体系”，向现代信息技术在消防工作中的深度应用和提高消防工作的科技含量上全面转变，越来越多的信息系统部署到数据中心，对数据安全、响应速度等方面的要求也越来越高，集中式部署降低了全省数据中心建设成本和日常维护管理的难度，虚拟化技术彻底解决了“大马拉小车”的问题，打破了业务系统和硬件服务器的一一对应关系，具有降低能耗、提高资源利用率、提高安全性等优点，已得到了业界的广泛认可，虚拟化的应用推广已成为数据中心发展的必然。云南省公安消防总队数据中心将稳步推进全省消防数据中心的集中式虚拟化部署与容灾备份工作，并最终建成绿色高效、安全可靠的新一代消防数据中心。