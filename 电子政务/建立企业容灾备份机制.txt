建立企业容灾备份机制
数据库的备份是一个长期的过程，而恢复只在发生事故后进行，恢复程度的好坏很大程度上依赖于备份的情况。随着办公自动化和电子商务的飞速发展，国内越来越多的企业已经意识到存储信息的重要性，正处于从数据分散存储向集中存储转变的过程，开始投资搭建存储系统，但许多企业还没有意识到容灾备份是信息存储的一个重要环节。本文从容灾备份的概念、必要性、预先考虑的因素、容灾备份等级、容灾方案的选择等几方面论述了如何建立企业容灾备份机制。　　数据备份，实际上就是给企业重要的数据买保险。当你了解到国内各大数据恢复公司每天都会应对使用者捧来的一大堆需要急救的硬盘，了解到企业工厂数万元用以专业数据备份设备的投入，了解到美国关于9.11后90%公司在发生灾难性数据丢失后在两年内倒闭的报告，你就会知道企业数据容灾有多么的重要了。　　一、容灾备份的概念　　广义上讲，灾难恢复计划的实施包括日常维护、灾难恢复、恢复后三个阶段。在日常工作中，日事业单位要按照计划和分工，认真及时地开展系统维护与相关记录工作，包括硬件巡检、数据备份、为软件打补丁、病毒查杀、资料收集与管理，等等。对出现故障的如硬件，要及时修复。对关键设备，要规划、装备必要的冗余设备，以备不时只需。　　容灾备份是通过特定的容灾机制，在各种灾难损害发生后，仍然能够最大限度地保障提供正常应用服务的信息系统。容灾备份可以分为数据备份和应用备份。数据备份需要保证用户数据的完整性、可靠性和一致性。而对于提供实时服务的信息系统，用户的服务请求在灾难中可能会中断，应用备份却能提供不间断的应用服务，让客户的服务请求能够继续运行，保证信息系统提供的服务完整、可靠、一致。　　数据备份是容灾系统的基础，也是容灾系统能够正常工作的保障；应用备份则是容灾系统的建设目标，它必须建立在可靠的数据备份的基础之上，通过应用系统、网络系统等各种资源之间的良好协调来实现。一个完整的容灾备份系统包括本地数据备份、远程数据复制和异地备份中心。当然并不是所有的企业都需要这样一个系统，只有对不可中断的关键业务才有必要建立容灾备份中心。而小型企业通过建立NAS或SAN的离线数据备份和人为的数据转移就可以达到很好的容灾备份效果。　　二、灾备工作注意要点　　灾难恢复的目的是保证业务的延续性，为了达到这个目的，必须保证业务相关数据的完整性、可用性等，因此其解决方案应包括一套标准的多层次数据保护方案，可以在不同的产品和平台上实施。制定方案需注意以下几点：　　1、明确优先权：当使用相对廉价的第二、第三级存储就可以满足需要时，采用昂贵的第一级存储就是一种浪费。所以有必要评估数据的存储需要，然后判断哪些信息确实需要持续备份，并保持可用性。　　2、建立快速、准确的恢复能力。企业必须具备快速、及时地将关键数据恢复至某一特定时间点的能力，实现这一能力需要三个层次的保护：CDP、快照和完整备份。　3、经常测试数据恢复状况。如果复制的数据无法恢复，那么备份系统没有任何价值，但是，这种情况却经常发生。灾难恢复系统的无中断测试应该在首要和次要场所有规律地执行（每天、每周、而不是每季、每年）。这些测试应该在系统联机时进行，在不影响用户和流程的情况下备份任何变更。　　4、巩固和复制。备份数据中心是最低的要求，然而，在今天分布式和移动式的办公环境中，仅仅有这些还不够，必须考虑远程数据，他们也应该有规律地备份到主数据中心。因为，所有场所的数据都应该被保护，而将数据远程复制至总数据中心将更便利、更安全。　　5、远程复制，重复使用分支结构。将一个或多个远程分支结构作为灾难恢复场地，并将主数据中心的数据复制到该地点是一项明智之举。当然，企业也可以选择合作伙伴的场地和设施，但可能需要通过加大带宽或使用WAN优化应用来完成完整复制。灾难恢复成本可能很高，因此，重复使用分支机构对灾难恢复来说可能更明智。　　三、灾难备份等级的确定　　1.确立灾难备份恢复目标　　企业在设计容灾方案时，应充分考虑投资因素，即灾难恢复方案的投资一定要小于灾难本身带来的经济损失，灾难备份等级确定的出发点体现在三个指标：数据恢复点目标、恢复时间目标、网络恢复目标。　　数据恢复点目标：灾难发生后，恢复运转时数据丢失的可容忍程度；　　恢复时间目标：灾难发生后，需要恢复的紧迫性也就是多久能够恢复的问题　　网络恢复目标：灾难发生后，工作网点什么时候才能通过备份网络与数据中心重新恢复通信的指标。　　企业核心流程由于灾难发生而无法正常运行时对企业的损失可能是可以量化的，也可能是无形的损失，企业灾备方案制定者必须在认真研究应用系统的业务需求后通过对可量化和不可量化损失的综合考虑，得出灾难受损的可容忍度以及损失的决策依据。　　2.依据恢复目标确定灾备等级　　2005年4月，国务院信息化工作办公室下发《重要信息系统灾难恢复指南》，指南将灾难恢复划分为6个等级：　　第一级基本支持　　第二级备用场地支持　　第三级电子传输和部分设备支持　　第四级电子传输及完整设备支持　　第五级实时数据传输及完整设备支持　　第六级数据零丢失和远程集群支持　　每个灾难恢复等级都有以下管理要素的相应要求（详细内容可查阅国家规范《重要信息系统灾难恢复指南》）：数据备份系统、备用数据处理系统、备用网络系统、备用基础设施、技术支持、运行维护支持、灾难恢复预案。　　四、灾备方案的选择与比较　　灾难备份等级确定之后，即可以开始灾难备份方案的研究和确定。当前国际流行的灾备方案主要包括以下几种：　　基于存储设备的灾备方案：方案基本思路是备份中心配置与生产中心完全相同的存储设备，通过相关的控制软件在两则的存储设备上实现数据的同步镜像，保证数据的一致；此种备份方式是通过存储系统与主机系统分隔而实现的，因此可应用到多种系统平台上，使一种开放性的体系结构。　　基于操作系统的灾备方案：方案基本思路是通过安装在生产中心操作系统上的灾备软件，对其操作系统的指令进行监控，并利用预定的数据操作模式完成数据的备份操作。此种备份方式可以使用第三方软件提供灾难备份功能，并能够适应各个厂家的存储硬件设备。　　基于数据库的灾备方案：方案基本思路是在灾备中心建立与生产中心对等的数据库，生产中心数据库在产生数据库日志的同时，自动将日志文件传输到在被中心数据库，并将日志文件运行于该数据库,从而保证生产中心数据库和灾备数据库的数据一致性。基于应用系统的灾备方案：方案基本思路是对待处理的业务数据，通过网络分别传输至生产中心和灾备中心进行处理，保证在灾难发生后，系统能够继续处理业务，并实现各节点间数据的一致。　　五、结束语　　从企业的长远利益来看，有效的灾难恢复计划对企业的生存至关重要。灾难恢复就是企业的保险，离开它，你无法生存，企业建立切实有效的容灾备份机制已刻不容缓！